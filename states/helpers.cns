;======================================================================
;---------------------------
;Detect life Helper (Coded by 2OS)
[Statedef 2]

[State 2OS]
type = statetypeset
trigger1 = 1
movetype = I
ignorehitpause = 1
persistent = 1

[State 2OS, Blank Animation]
type = changeanim
trigger1 = 1
value = 1
ignorehitpause = 1
persistent = 1

[State 2OS]
type = bindtoroot
trigger1 = root,cond(PlayerIDexist(ID),1,0) ;Functionally, Root,exist
pos = 0,0
ignorehitpause = 1
persistent = 1

[State 2OS, Damage Var Delay Reset]
type = varset
trigger1 = var(1)>1
var(1) = 0
ignorehitpause = 1
persistent = 1

[State 2OS, Damage Var Delay]
type = varadd
trigger1 = var(2) != root,life
var(1) = 1
ignorehitpause = 1
persistent = 1

[State 0, invul]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[State 2OS, Damage Var]
type = varset
trigger1 = (var(1)!=[0,1])
var(2) = root,life
ignorehitpause = 1
persistent = 1

;======================================================================
;Projectile Armour
[Statedef 8]
type = A
MoveType = A
physics = N
ctrl = 0
;anim = root,anim
velset = 0,0
sprpriority = -1

[State -2, Reset projectile armour vars]
type = varadd
trigger1 = root,cond((var(26)&2**10) = 0,1,0) ;Weird but proper way of checking roots bits
trigger2 = root,Movetype = H && root,stateno !=[120,150]
trigger3 = prevstateno != 0 && root,stateno != 30500 ;Only 1 hit
var(26) = 1
ignorehitpause = 1
persistent = 0

[State -2, Meter gain on proj hit]
type = poweradd
triggerall = var(27) = 0
trigger1 = prevstateno != 0
trigger1 = var(27) := 1 ;ONLY ONCE PER LIFETIME
value = floor(40 * cond(root,var(54) > 0, root,fvar(6),1))
ignorehitpause = 1
persistent = 0

[State -2, Reset projectile armour vars]
type = parentvaradd
triggerall = prevstateno != 0 && root,stateno != 30500 ;Only 1 hit
trigger1 = root,cond((var(26)&2**11) != 0,1,0)
var(26) = -2**11
ignorehitpause = 1
persistent = 0

[state 0m ebd]
type = destroyself
trigger1 = var(26) = 1

[state 0, novis]
type = assertspecial
trigger1 = 1
flag = Invisible
flag2 = Noshadow
ignorehitpause = 1
persistent = 1

[state 0, follow root]
type = posset
trigger1 = 1
x = root,pos x
y = root,pos y
ignorehitpause = 1
persistent = 1

[state 0, follow root]
type = turn
trigger1 = facing != root,facing
ignorehitpause = 1
persistent = 1

[State S]
type = hitoverride
trigger1 = time <= 0
time = -1
Attr = SCA,AP
stateno = Stateno
slot = 1
ignorehitpause = 1
;persistent = 0

[State S]
type = nothitby
trigger1 = time <=0
time = -1
value = ,AA,AT ; Can Mugen stop being weird for 2 seocnds?????
ignorehitpause = 1
persistent = 0

;Distinction to prevent Debug Errors
[state 0, Root anim]
type = changeanim
trigger1 = selfanimexist(root,anim)
value = root,anim
elem = root,animelemno(0)
ignorehitpause = 1
persistent = 1

[state 0,Enemy Custom anim]
type = changeanim2
trigger1 = !selfanimexist(root,anim)
value = root,anim
elem = root,animelemno(0)
ignorehitpause = 1
persistent = 1

[State 0, Safety]
type = playerpush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, Enable walk back]
type = Attackdist
trigger1 = 1
value = 0
ignorehitpause = 1


;======================================================================
; POWER CHARGE AURA
[Statedef 905]
type = A
movetype = I
physics = N
ctrl = 0
anim = cond(root,var(54) > 0,912,905)
velset = 0,0
sprpriority = -1

[State 1902, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1902, AssertSpecial]
type = AngleDraw
trigger1 = root,anim=902
scale = 1.4,1.4

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

;[state 17100, front aura]
;type = explod
;trigger1 = anim=905 && animelemtime(7)=0
;anim = 907
;ID = 907
;pos = 0,0
;postype = P1
;sprpriority = 4
;ownpal = 1
;supermovetime = -1
;bindtime = -1
;removetime = -1
;persistent = 1

[State 1900, front aura helper]
type = Helper
triggerall = !numhelper(907)
trigger1 = animelemtime(7)=0
id = 907
stateno = 907
name = "Dust"
pos = 0,0
postype = P1
;helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1902, BindToParent]
type = BindToParent
triggerall = parent,cond(PlayerIDexist(ID),1,0) ;Functionally, Root,exist
trigger1 = anim = 905 || anim = 10905
pos = 0,0

[State 1902, BindToParent]
type = BindToParent
triggerall = parent,cond(PlayerIDexist(ID),1,0) ;Functionally, Root,exist
trigger1 = anim = 912 || anim = 10912
pos = 0,0

[State 1902, End Anim]
type = ChangeAnim
trigger1 = anim = cond(root,var(54) > 0,912,905)
trigger1 = root,stateno != 900
value = anim + 1

[State 1902, DestroySelf]
type = DestroySelf
;triggerall = !numexplod(907)
trigger1 = (anim = 905 || anim = 10905 || anim = 912 || anim = 10912) && (Root,StateNo != 188) && (Root,StateNo != 192) && (Root,StateNo != 193) 
trigger1 = (Root,StateNo != 900) && (Root,StateNo != 2300) && (Root,StateNo != 2500) && (Root,StateNo != 2700) && (Root,StateNo != 2745) && (Root,StateNo != 30010)
trigger2 = (anim = 906 || anim = 10906 || anim = 913 || anim = 10913) && animtime = 0
trigger3 = Root,stateno = [5000,5090]

;[State 1902, DestroySelf]
;type = DestroySelf
;trigger1 = anim = 905 && (Root,StateNo != 900)
;trigger2 = anim = 906 && animTime = 0
;trigger3 = Root,stateno = [5000,5090]


;======================================================================
; POWER CHARGE FRONT AURA
[Statedef 907]
type = A
movetype = I
physics = N
ctrl = 0
anim = 907
velset = 0,0
sprpriority = 3

[State 1902, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1902, AssertSpecial]
type = AngleDraw
trigger1 = root,anim=902
scale = 1.4,1.4

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 1902, BindToParent]
type = BindToRoot
triggerall = parent,cond(PlayerIDexist(ID),1,0) ;Functionally, Root,exist
trigger1 = anim = 907 || anim = 10907
pos = 0,0
time = 1

[State 1902, DestroySelf]
type = DestroySelf
trigger1 = anim = 907 && (Root,StateNo != 900)
trigger2 = !numhelper(905)
trigger3 = Root,stateno = [5000,5090]


;======================================================================
; DUST Helper (normal aura charge)
[Statedef 908]
type	= A
MoveType	= I
physics	= N
ctrl	= 0
anim	= 908
velset	= 0,0
sprpriority = 4
[State 909, BindToRoot]
type = BindToRoot
triggerall = root,cond(PlayerIDexist(ID),1,0) ;Functionally, Root,exist
trigger1 = statetype != A
trigger1 = root,movetype = I
time = 1
pos = -17,5

[State 908, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 908, DestroySelf]
type	= DestroySelf
trigger1 = !animtime
trigger2 = root,movetype = H

;======================================================================
; DUST Helper (Blasts)
[Statedef 1003]
type	= A
MoveType	= I
physics	= N
ctrl	= 0
anim	= 1206
velset	= 0,0
sprpriority = 4

[State 2196, noshadow]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 909, BindToRoot]
type = BindToRoot
triggerall = root,cond(PlayerIDexist(ID),1,0) ;Functionally, Root,exist
trigger1 = statetype != A
trigger1 = root,movetype = I
time = 1
pos = -17,5

[State 1003, end]
type = destroyself
trigger1 = !animtime


;======================================================================
;Ki Mine Projectile
[Statedef 1006]
type = A
movetype = A
physics = N
anim = 1010
sprpriority = 2
velset = cond(root,var(16) = 2, 4.1,cond(root,var(16) = 3, 4.8, 3.4)),cond(root,var(16) = 2, 4.1,cond(root,var(16) = 3, 4.8, 3.4))
hitcountpersist = 1
movehitpersist = 1

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 1005, changestate]
type = changestate
trigger1 = pos y >= 0 && vel y  > 0
value = 1007
ctrl = 0

;======================================================================
;Ki Mine Projectile grounded
[Statedef 1007]
type = A
movetype = A
physics = N
anim = 1010
sprpriority = 2
velset = 0,0
hitcountpersist = 1
movehitpersist = 1

[State 1005, changestate]
type = angledraw
trigger1 = 1
value = 2
scale = 2*root,fvar(12),2*root,fvar(12)

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

;[State 1005,changestate]
;type = changestate
;trigger1 = root,stateno = 1008
;value = cond(root,var(16) = 2, 1016,cond(root,var(16) = 3,1017,1015))
;ctrl = 0

[State 1005,changestate]
type = changestate
trigger1 = root,stateno = 1008 && root,animelem = 4
value = 1009
ctrl = 0

;======================================================================
;Ki Mine Projectile Explode
[Statedef 1009]
type = A
movetype = A
physics = N
anim = 28270
sprpriority = 2
velset = 0,0
hitcountpersist = 1
movehitpersist = 1

[State 250, 1]
type = HitDef
trigger1 = !movecontact
attr = S, NA
animtype  = Hard
damage = ceil(cond(root,fvar(11) * 36 < 7, 7, root,fvar(11) * 36)), 0 
priority = 4, Hit
guardflag = MA
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-80
hitsound   = s5,5
guardsound = S6,1
ground.type = high
ground.slidetime = 15 + cond(root,var(54) > 0, 3,0)
ground.hittime = 20 + cond(root,var(54) > 0, 3,0)
ground.velocity = -8
ground.cornerpush.veloff = -7.6 *cond(root,var(54) > 0,2,1)
guard.hittime = cond(anim = 250,20,18)
air.velocity = -4,-4
air.animtype = back
getpower= ceil(cond(p2movetype=H, 40, 210)  * cond(var(54) > 0, fvar(6),1)), ceil(35 * cond(var(54) > 0, fvar(6),1))
givepower = 35,35
yaccel = 0.5
ID = 29780

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget(29780)
trigger1 = !(target, ishelper)
value = 275
ID = 29780
ignorehitpause = 1
persistent = 0

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 1009, end]
type = destroyself
trigger1 = !animtime


;======================================================================
;QCF FIREBALL
[Statedef 1010]
type = A
movetype = A
physics = N
anim = cond(root,var(54) > 0, 1015,1010); + (10000*(root,var(49)=0))
sprpriority = 2
velset = cond(root,var(16) = 2, 4.1,cond(root,var(16) = 3, 4.8, 3.4))-((root,var(54))/2),0
hitcountpersist = 1
movehitpersist = 1

[State 0, Projectile Guarding assistance]
type = Projectile
;trigger1 = 1 ; this is for beams or moves that are basically full screen
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

;Added to constantly update this var
[State 802, cinematic contingency]
type = varset
trigger1 = var(37) != root,var(37)
var(37) = root,var(37)
ignorehitpause = 1
persistent = 1

[State 2196, noshadow]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = root,fvar(12),root,fvar(12) 
persistent = 1

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0.5
ignorehitpause = 1

[State 1061, EX Fireball]
type = VarSet
trigger1 = !time
var(15) = cond(root,stateno = 1004,1,0)

[State 1061, gethit gut ?]
type = VarSet
trigger1 = !time
var(14) = root,var(14)

[State 0, ParentVarAdd] ;This is used to limit fireballs. The limit is 5 in the hitdefs
type = ParentVarAdd
triggerall = root,stateno != 1004 ; EX Fireball
trigger1 = MoveHit = 1
var(55) = 1
ignorehitpause = 1

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1061, NoScreen]
type = Screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(49)>0
trans = addalpha
alpha = 200 ,128
ignorehitpause = 1

[State 1061, Velocity]
type = VelSet
trigger1 = Movehit
x = 0

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1020
;attr = SCA, NP, SP, HP
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 1061, Hitdef]
type = HitDef
triggerall = var(14) = 0
;Added this section as a safeguard so projectil;es don't interrupt cinematics
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
attr = S, SP
animtype  = hard
damage    = ceil(cond(root,fvar(11)*24<7,7, root,fvar(11)*24)),ceil(3*root,fvar(11))
priority  = 4,Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7010
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.8,0
guard.velocity = -3.5
air.velocity = -3.8,-2
airguard.velocity = -3, -2
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
air.fall = 1
fall.recover = 0
fall = Cond(root,var(55)>=5,1,0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = cond(var(15) = 1,0,ceil(cond(p2movetype=H, 40, 140)  * cond(root,var(54) > 0, fvar(6),1)) * cond(root,var(14) = 2,0,1)), ceil(10 * cond(root,var(54) > 0, fvar(6) ,1))
givepower = 35,35
hitonce = 1
ignorehitpause = 0
persistent = 0
id = 1011

[State 1061, Hitdef]
type = HitDef
triggerall = var(14) = 1
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
attr = S, SP
animtype  = hard
damage    = ceil(cond(root,fvar(11)*24<7,7, root,fvar(11)*24)),ceil(3*root,fvar(11))
priority  = 4,Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7010
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,0
ground.type = Low
air.type = high
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.8,0
guard.velocity = -3.5
air.velocity = -3.8,-2
airguard.velocity = -3, -2
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
air.fall = 1
fall.recover = 0
fall = Cond(root,var(55)>=5,1,0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = cond(var(15) = 1,0,ceil(cond(p2movetype=H, 40, 140)  * cond(root,var(54) > 0, fvar(6),1))), ceil(10 * cond(root,var(54) > 0, fvar(6) ,1))
givepower = 35,35
hitonce = 1
ignorehitpause = 0
persistent = 0
id = 1011

[State 3001, Guardshake]
type = envshake
trigger1 = moveguarded
time = 4
ampl = 6
freq = 176
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = (pos x!=[-240,240])
trigger2 = time>180

[State 1061, Fade]
type = changestate
trigger1 = movecontact
trigger2 = root,var(37) = 1
trigger3 = var(37) = 1
value = 1020
ignorehitpause=1

;======================================================================
;Ki Mine Projectile Rain
[Statedef 1016]
type = A
movetype = A
physics = N
anim = 1013
sprpriority = 2
velset = 0,random%-12
hitcountpersist = 1
movehitpersist = 1

[State 1016, adjsut]
type = posadd
trigger1 = time <= 0
x = random%20 - random%20

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 250, 1]
type = HitDef
triggerall = !movecontact
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
attr = S, NA
animtype  = Hard
damage = ceil(cond(root,fvar(11) * 36 < 7, 7, root,fvar(11) * 36)), 0 
priority = 4, Hit
guardflag = MA
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-80
hitsound   = s5,5
guardsound = S6,1
ground.type = high
ground.slidetime = 15 + cond(root,var(54) > 0, 3,0)
ground.hittime = 20 + cond(root,var(54) > 0, 3,0)
ground.velocity = -8
ground.cornerpush.veloff = -7.6 *cond(var(54) =1,2,1)
guard.hittime = cond(anim = 250,20,18)
air.velocity = -4,-4
air.animtype = back
getpower= ceil(cond(p2movetype=H, 40, 210)  * cond(root,var(54) > 0, fvar(6),1)), ceil(35 * cond(root,var(54) > 0, fvar(6),1))
givepower = 35,35
yaccel = 0.5

[State 1016, end]
type = destroyself
trigger1 = movecontact

;======================================================================
;Ki Mine Projectile Freeze
[Statedef 1017]
type = A
movetype = A
physics = N
anim = 28270
sprpriority = 2
velset = 0,0
hitcountpersist = 1
movehitpersist = 1

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 250, 1]
type = HitDef
triggerall = root,var(37) = 0
trigger1 = var(37) = 0
trigger1 = !movecontact
attr = S, NA
animtype  = Hard
damage = ceil(cond(root,fvar(11) * 36 < 7, 7, root,fvar(11) * 36)), 0 
priority = 4, Hit
guardflag = MA
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-80
hitsound   = s5,5
guardsound = S6,1
ground.type = high
ground.slidetime = 15 + cond(root,var(54) > 0, 3,0)
ground.hittime = 20 + cond(root,var(54) > 0, 3,0)
ground.velocity = -8
ground.cornerpush.veloff = -7.6 *cond(root,var(54) > 0,2,1)
guard.hittime = cond(anim = 250,20,18)
air.velocity = -4,-4
air.animtype = back
getpower= ceil(cond(p2movetype=H, 40, 210)  * cond(root,var(54) > 0, fvar(6),1)), ceil(35 * cond(root,var(54) > 0, fvar(6),1))
givepower = 35,35
yaccel = 0.5
ID = 29780

[State -2, TargetState] ; Ki Mine freeze
type = targetstate
Triggerall = enemy,stateno != 1018
trigger1 = movehit
trigger1 = numtarget(29780)
value = 1018
ignorehitpause = 1
persistent = 0

[State 1009, end]
type = destroyself
trigger1 = !animtime

;======================================================================
;QCF FIREBALL CONTACT
[Statedef 1020]
type = U
movetype = I
physics = N
ctrl = 0
anim = cond(root,var(54) > 0,1014,1013)
sprpriority = 2
velset = 0,0

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(49)>0
trans = addalpha
alpha = 200 ,128
ignorehitpause = 1

[State 1002, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1020, end]
type = destroyself
trigger1 = !animtime
;trigger2 = root,movehit
;======================================================================
; Repel helper : 1305
; Destroyed : 1306
; Reflect with random projectile : 1308
; Reflected projectile : 1315
; Reflected projectile explods : 1316
;======================================================================

; REPEL HELPER FOR Focus Attack
[Statedef 1305]
type = S
physics = N
movetype = A
ctrl = 0
sprpriority = 4

[State 1305, nothitby]
type = nothitby
trigger1 = 1
time = -1
value = SCA
ignorehitpause = 1

[State 1305, HB]
type = hitby
trigger1 = 1
time = 1
value = SCA, NP, SP, HP
ignorehitpause = 1

[State 1305, HitOverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA, AA, AP, AT
stateno = 1306
ignorehitpause = 1

[State 1305, HitOverride]
type = hitoverride
trigger1 = 1
time = -1
attr = SCA, NP, SP,HP
stateno = 1308
ignorehitpause = 1

[State 1305, Anim]
type = changeanim
trigger1 = anim != 1305
value = 1305

[State 1305, timevar]
type = varadd
trigger1 = 1
var(4) = 1

[State 1305, Shadows]
type = afterimage
trigger1 = !time && !prevstateno
time = 999
timegap = 1
framegap = 4
length = 12
palcontrast = 30, 60, 120
trans = add

[State 1305, Type]
type = statetypeset
trigger1 = movecontact
movetype = I

[State 1305, End]
type = changestate
trigger1 = var(4) >= 13
value = 1306

;-----------------------------------------
; Destroyed
[Statedef 1306]
type = A
physics = N
movetype = I
velset = 0, 0
ctrl = 0
sprpriority = 1
anim = 1

[State 3000, nhb]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 1306, End]
type = destroyself
trigger1 = !animtime

;-----------------------------------------
; Reflect with projectile
[Statedef 1308]
type = A
physics = N
movetype = I
ctrl = 0
anim = 1

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 1308, reflected]
type = helper
triggerall = !numhelper(1315)
trigger1 = !time
stateno = 1315
ID = 1315
name = "Reflected"
postype = p1
pos = 25, -20
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1308, End]
type = changestate
trigger1 = 1
value = 1306   ;1305

;-----------------------------------------
; Reflected projectile Kamehameha
[Statedef 1315]
type=S
physics=N
movetype=A
ctrl=0
velset=0,0
sprpriority=4
poweradd = 100

[State 200, Ki goes SFX]
type = PlaySnd
trigger1 = !time
value = 10,0
channel = 1

[State -2, Explod];P1 Side.
type = Explod
trigger1 = !time && numexplod(13300)=0 && teamside = 1
anim = 13300
pos = 10,80
postype = left  ;p2,front,back,left,right
removetime = -2
;scale = 0.5,0.5
sprpriority = 0
id = 13300
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State -2, Explod];P2 Side.
type = Explod
trigger1 = !time && numexplod(13300)=0 && teamside = 2
anim = 13301
pos = -169,80
postype = right
removetime = -2
;scale = 0.5,0.5
sprpriority = 0
id = 13300
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
persistent = 0

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(49)>0
trans = addalpha
alpha = 200 ,128
ignorehitpause = 1

[State 1315, HitOverride]
type=hitoverride
trigger1= 1
time=-1
attr=SCA,AA,AP,AT
stateno=1316
ignorehitpause=1

[State 1315, HB]
type=hitby
trigger1= 1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1

[state 1315]
type = varset
triggerall = numenemy
triggerall = enemy,authorname = "Balthazar & Cybaster"
trigger1 = enemy,name = "Goku Z2"
trigger2 = enemy,name = "SSJ Goku Z2"
trigger3 = enemy,name = "Vegeta Z2"
trigger4 = enemy,name = "Gohan Z2"
var(11) = 1

[State 1315, Anim];normal kamehameha FX (yellow/blue)
type=changeanim
trigger1= !time && !prevstateno && var(11)=0 && root,var(44)=0
value=1311
[State 1315, Anim];normal kamehameha FX (old purple)
type=changeanim
trigger1= !time && !prevstateno && var(11)=0 && root,var(44)>=1
value=1310
[State 1315, Anim];Vegeta kamehameha FX
type=changeanim
trigger1= !time && !prevstateno && var(11)=1
value=1010

[State 1315, Vel]
type=velset
trigger1= 1
x = 8

[State 1315, image]
type=afterimage
trigger1= !time && !prevstateno
time=999
timegap=1
framegap=2
length=5
palcontrast=50,50,200
trans=add

[State 1315, Hit]
type=hitdef
;trigger1= 1
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
priority=4,Hit
attr = S,SP
damage = ceil(61*root,fvar(12)), ceil(6*root,fvar(12))
animtype = Hard
hitflag = MAF
guardflag=MA
pausetime=0,10
sparkno = -1
guard.sparkno = -1
sparkxy = -10,0
hitsound  = S999,0
guardsound = S6,1
ground.type=High
ground.slidetime=16
ground.hittime=16
ground.velocity=-10,0
ground.cornerpush.veloff=0
air.velocity=-4,-2
getpower= cond(p2movetype=H,40,140), 35
givepower = 35,35
envshake.time=14
envshake.freq=120
envshake.ampl=4
air.fall=1
fall.recover=1
fall.recovertime=16
yaccel=.5
airguard.ctrltime= 16
airguard.velocity= -8, -1.5
forcestand=1
p1sprpriority = 5

[State 1315, Sparks]
type=explod
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
anim=7020
sprpriority=3
postype=p2
trans = addalpha
alpha = cond(root,var(49) > 0, 200,256),cond(root,var(49) > 0, 128,256)
pos=(target,const(size.ground.front)-10),-floor(p2dist y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 1315, End]
type=changestate
trigger1= movecontact
value=1316
ignorehitpause=1

[State 1315, End]
type=destroyself
trigger1=pos x!=[-200,200]

;-----------------------------------------
; Kamehameha explod/vanish
[Statedef 1316]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=4

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 3005, anim];VS Z2 chars
type = changeanim
trigger1 = !time && var(11)=1
value = 1013
[State 3005, anim];Repel (old)
type = changeanim
trigger1 = !time && var(11)=0 && prevstateno=1315 && root,var(44)>=1
value = 1316
[State 3005, anim];Repel (yellow/blue)
type = changeanim
trigger1 = !time && var(11)=0 && prevstateno=1315 && root,var(44)=0
value = 1311

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(49)>0
trans = addalpha
alpha = 200 ,128
ignorehitpause = 1

[State 1316, End]
type=destroyself
trigger1= !animtime

;-----------------------------------------
; Intro 3: Trail FX
[Statedef 1831]
type=A
physics=N
movetype=I
velset=0,0
anim = 1831
ctrl=0
sprpriority=0

[State 0, noshadow]
type = assertspecial
trigger1 = 1
flag = noshadow

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 0, bind]
type = bindtoparent
trigger1 = 1
pos = 0, -80

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[state 0, angle]
type = angledraw
trigger1 = 1
scale = 2,2
value = 90

;==========================================================
; KAMEHAMEHA HELPER
[Statedef 2001]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5

[State 0, Projectile Guarding assistance]
type = Projectile
;trigger1 = 1 ; this is for beams or moves that are basically full screen
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

;Added to constantly update this var
[State 802, cinematic contingency]
type = varset
trigger1 = var(37) != root,var(37)
var(37) = root,var(37)
ignorehitpause = 1
persistent = 1

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 3005, anim]
type = changeanim
trigger1 = !time && !prevstateno
value = 1315 ;If this var is 0, have solid effects

[State 3005, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 1055, movehitvar]
type=varset
trigger1= movecontact && numtarget
trigger1= cond(numtarget,!(target,IsHelper),0)
var(3)=1
ignorehitpause=1

[State 13100, goes SND]
type = playsnd
trigger1 = !time && !prevstateno
value = 2000,2
channel = 2

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = cond(var(2)<5,2001,2002)
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1061, Velocity]
type = VelSet
trigger1 = 1
x = cond((time<2 && var(2)>1),1,12 + var(2))

[State 1315, image]
type = afterimage
trigger1 = !time
time = 999
timegap = 1
framegap = 2
length = 5
palcontrast = 150,30,30
trans = add
ignorehitpause = 1

[State 3005, hit]
type = hitdef
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
;trigger1 = 1
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage =  cond(root,var(54) > 0,9,7)+ceil(cond(root,fvar(11)*28<7,7, root,fvar(11)*28)), 3		;ceil(22*root,fvar(15)), 2
getpower = 0,0
givepower = 35,35
pausetime = 4*(var(2)<5),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= cond(root,var(54) > 0,-6.2,-6), cond(root,var(54) > 0,-7,-2.5)
guard.velocity = -9
air.velocity = cond(root,var(54) > 0,-6,-5.5),cond(root,var(54) > 0,-8.5,-3.1)
airguard.velocity = -5.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=(var(2)>=6)
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s1
guard.sparkno = s1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[State 1315, Sparks]
type=explod
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
anim=7020
sprpriority=3
postype=p2
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
pos=(target,const(size.ground.front)-10),-floor(p2dist y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3005, end]
type = changestate
trigger1 = movecontact
value = cond(var(2)<6,2001,2002)

[State 3001, Guardshake]
type = envshake
trigger1 = movecontact=1 && numtarget
time = cond(root,var(54) > 0,5,4)
ampl = cond(root,var(54) > 0,9,6)
freq = cond(root,var(54) > 0,181,176)
ignorehitpause = 1

[State 1010, ParentVarAdd - for 'Emo']
type = ParentVarSet
trigger1 = pos x!=[-240,240]
var(54) = 0
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = pos x!=[-240,240]

;-----------------------------------------
; Kamehameha explod/vanish
[Statedef 2002]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=4
MoveHitPersist=1

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 3005, anim];Kmh horizontal
type = changeanim
trigger1 = !time
value = 1317

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1


[State 1315, image]
type = afterimage
trigger1 = !time
time = 999
timegap = 1
framegap = 2
length = 5
palcontrast = 150,30,30
trans = add
ignorehitpause = 1

[State 0, PalFXWiz]
type = PalFX
trigger1 = root,var(54) 
time = 1
add = 40,10,40
mul = 257,256,256
sinadd = 40,80,93,10
invertall = 0
color = 0
ignorehitpause = 1


[State 1316, End]
type=destroyself
trigger1= !animtime
[State 1316, End with Zzyzzyxx fix]
type= null;destroyself
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target, time <= 1 && !(target, hitshakeover)

;==========================================================

;----------------------------------------------------
;Rapiddohiru danmaku afterimage
[Statedef 2103]
type    = S
movetype= A
physics = N
sprpriority = 1
velset = 4,0
;anim = 2100
hitcountpersist = 1
movehitpersist = 1

[State 0, Projectile Guarding assistance]
type = Projectile
;trigger1 = 1 ; this is for beams or moves that are basically full screen
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

;Added to constantly update this var
[State 802, cinematic contingency]
type = varset
trigger1 = var(37) != root,var(37)
var(37) = root,var(37)
ignorehitpause = 1
persistent = 1

[State 1061, HitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA
time = 1
ignorehitpause = 1

[State 2196, noshadow]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 2103, anim]
type =  changeanim
trigger1 = time <= 0
value = root,anim
elem = 6

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = cond(root,var(54) > 0,0.1,0.2)
ignorehitpause = 1

[State 620, 3]  ;Flurry Kicks
type = HitDef
triggerall = root,anim != 2101
triggerall = root,var(37) = 0
triggerall = var(37) = 0
trigger1 = animelemtime(12) = 0
trigger2 = animelemtime(17) = 0
trigger3 = animelemtime(29) = 0
;trigger5 = AnimElemTime(29) = 0
;trigger6 = AnimElemTime(35) = 0
attr = S, HA
damage = 12,1;cond(root,var(54) > 0, 1,0)+(Ceil(cond(root,fvar(11) * 30 < 7, 7, root,fvar(11) * 30))), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = HAF
guardflag = MA
animtype = Hard
priority = 4, Hit
pausetime = 12,12  ;16,16
guard.pausetime = 7,7
sparkno = s1
guard.sparkno = s1
sparkxy = -30,-50
hitsound   = -1;s5,7
guardsound = -1;S6,1
ground.type = High
ground.slidetime = 50
ground.hittime  = 50
ground.velocity = 5,0
air.hittime  = 50
air.velocity = 5,-4
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 1
fall.recover = 0
kill = 0
id = 2104
ignorehitpause = 0

[State 650, hitspark]
type = Explod
triggerall = !numexplod(21104)
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2104)
trigger1 = movecontact
anim = cond(movehit,7030,7000)
pos = -30,-50
id = 21104
postype = p2
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 620, 3]  ;Flurry Kicks
type = HitDef
triggerall = root,var(37) = 0
triggerall = var(37) = 0
triggerall = root,anim != 2101
trigger1 = animelemtime(22) = 0
trigger2 = animelemtime(25) = 0
;trigger5 = AnimElemTime(29) = 0
;trigger6 = AnimElemTime(35) = 0
attr = S, HA
damage = 12,1;cond(root,var(54) > 0, 1,0)+(Ceil(cond(root,fvar(11) * 30 < 7, 7, root,fvar(11) * 30))), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = HAF
guardflag = MA
animtype = Hard
priority = 4, Hit
pausetime = 12,12  ;16,16
guard.pausetime = 7,7
sparkno = s1
guard.sparkno = s1
sparkxy = -30,-50
hitsound   = -1;s5,7
guardsound = -1;S6,1
ground.type = High
ground.slidetime = 50
ground.hittime  = 50
ground.velocity = 5,0
air.hittime  = 50
air.velocity = 5,-4
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 1
fall.recover = 0
kill = 0
id = 2103
ignorehitpause = 0

[State 650, hitspark]
type = Explod
triggerall = !numexplod(21103)
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2103)
trigger1 = movecontact
anim = cond(movehit,7030,7000)
pos = -30,-50
id = 21103
postype = p2
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
ignorehitpause = 1
persistent = 1
sprpriority = 5
ownpal = 1

[State 1606, follow]
type = posset
trigger1 = 1
x = root,pos x
y = root,pos y

[State 0, kick snds]
type = playsnd
triggerall = anim = 2100
triggerall = cond(numtarget(2103),(!target,ishelper),0)
trigger1 = movecontact && hitpausetime = 1
value = cond(movehit,5,6),cond(movehit,4,1)
channel = 9
ignorehitpause = 1
persistent = 1
loop = 0

[State 0, kick snds]
type = playsnd
triggerall = anim = 2100
triggerall = cond(numtarget(2100),(!target,ishelper),0)
trigger1 = movecontact && hitpausetime = 1
value = cond(movehit,5,6),cond(movehit,4,1)
channel = 9
ignorehitpause = 1
persistent = 1
loop = 0

[State 0, kick snds]
type = playsnd
triggerall = anim = 2100
triggerall = cond(numtarget(2104),(!target,ishelper),0)
trigger1 = movecontact && hitpausetime = 1
value = cond(movehit,5,6),cond(movehit,4,1)
channel = 9
ignorehitpause = 1
persistent = 1
loop = 0

[State 13001, Aftimg]
type = AfterImage
trigger1 = time <= 0
time = 900
PalContrast = 125,125,125
TimeGap = 4
PalColor = 0
trans = add1

[State 1606, afterimagetime]
type = afterimagetime
trigger1 = root, MoveType != A
trigger2 = root, anim = 2101
trigger3 = root, anim = 2100
trigger3 = root,animelemtime(36) >= 0
time = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root, MoveType != A
trigger2 = root, anim = 2101
trigger3 = root, anim = 2100
trigger3 = root,animelemtime(36) >= 0
trigger4 = !animtime

;==========================================================
; R.KMH (LVL 3)
[Statedef 2199]
type = A
physics = N
movetype = A
anim = cond(root,stateno = 2198,2199,2198) ;If this var is 0, have solid effects
velset = cond(root,stateno= 2198,7,0),0
movehitpersist = 0
hitcountpersist = 1
sprpriority = 7

[State 0, Projectile Guarding assistance]
type = Projectile
;trigger1 = 1 ; this is for beams or moves that are basically full screen
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

;Added to constantly update this var
[State 802, cinematic contingency]
type = varset
trigger1 = var(37) != root,var(37)
var(37) = root,var(37)
ignorehitpause = 1
persistent = 1

[State 2199, Emoscale]
type = angledraw
triggerall = root,var(54) > 0
trigger1 = 1
scale = 2* root,fvar(12),2*root,fvar(12)
ignorehitpause = 1
persistent = 1

[State 2199, bound]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 0

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0.5
ignorehitpause = 1

[State 1061, set] ;Set to only go to edge of screen if in stateno 2198 and the var for the first blast is 
;at its highest, otherwise it causes the blast to go to the edge of the screen everytime it hits
type = posset
triggerall = root,stateno = 2198
triggerall = root,var(51) = 15 ;Set in Stateno 2197, this checks for the varset for the first blast 
trigger1 = time <= 0
x = enemynear, pos x + 240 * (enemynear,facing)
y = enemynear, pos y - 40

[State 2199, nojugglecheck]
type = assertspecial
trigger1 = 1
flag = nojugglecheck

[State 1061, Hitdef]
type = hitdef
triggerall = root,stateno= 2198
trigger1 = root,var(51) >= 1
;trigger1 = root,var(37) = 0
;trigger1 = var(37) = 0
attr = A, HP
animtype  = hard
;ceil(23*root,fvar(15)), ceil(3*root,fvar(15))
damage    = cond(root,var(54) > 0,1,0)+ceil(cond(root,fvar(11)* 25 <12,12, root,fvar(11)*25)),ceil(3*root,fvar(11))
priority  = 4,Hit
guardflag = MA
hitflag = MAF
pausetime = 4,4
sparkno = s1
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 0,0
guard.velocity = 0
air.hittime = 20
air.velocity = 0,0
airguard.velocity = 0,0
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
air.fall = 0
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 35,35
ignorehitpause = 1
persistent = 0
kill = 0
id = stateno
p2stateno = 2194

[State 650, hitspark]
type = Explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(stateno)
trigger1 = movecontact
anim = cond(movehit,7020,7000)
pos = 0,-45
postype = p2
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 1061, Hitdef]
type = parentvaradd
triggerall = root,var(51) != 0
trigger1 = movehit
var(51) = cond((Matchover) && (WinKO) || (target, stateno = 5941) || (target, stateno = 5943), 0, -1)

[State 1061, Velocity]
type = VelSet
trigger1 = movehit 
x = 0.4

[State 3025, p2sent spinning] ;Cinematic
type = targetstate
triggerall = root,stateno = 2198
trigger1 = root,var(51) = 0
value = 2201
ignorehitpause = 0

[State 2197, end]
type = targetstate
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = root,stateno = 2205
triggerall = root,var(51) = 0 && !matchover
trigger1 = !MatchOver
value = 2206

[State 3005, end]
type = changestate
trigger1 = movehit
value = cond((root,var(51) != 0),2199,2200)

[State 2197, destroyself]
type = destroyself
;triggerall = (target, stateno = 5941) || (target, stateno = 5943); Killed by R.KMH
trigger1 = numtarget
trigger2 = cond(numtarget,!(target,IsHelper),0)
trigger1 = target,anim = 1 || target,anim = 1 ;Invisible
trigger2 = enemynear,stateno = 5942

;==========================================================
; R.KMH(LVL3) PT 2
[Statedef 2200]
type = A
physics = N
movetype = A
anim = cond(root,stateno = 2198,2199,2198) ;If this var is 0, have solid effects
velset = 9,cond(root,var(54) > 0,3,1.3)
sprpriority = 7

[State 3025, p2state - killed]
type = targetstate
triggerall = (target, stateno != 5941) && (target, stateno != 5943)
trigger1 = MatchOver
trigger1 = target,life = 0
trigger1 = WinKO
value = cond((target, SelfAnimExist(5941)), 5941, 5943)
ignorehitpause = 1

[State 3005, end]
type = changestate
triggerall = (target, stateno != 5941) && (target, stateno != 5943)
trigger1 = MatchOver
trigger1 = target,life = 0
trigger1 = WinKO
value = 2200

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 2199, Emoscale]
type = angledraw
triggerall = root,var(54) > 0
trigger1 = 1
scale = 2*root,fvar(12),2*root,fvar(12)
ignorehitpause = 1
persistent = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time <= 0
value = 5941,0
channel = 0
loop = 0
pan = 25

[State 2200, bound]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 0

[State 1061, End]
type = destroyself
trigger1 = (pos x!=[-240,340]) && pos y >=90
trigger2 = root,movetype = I
persistent = 1

;-----------------------------------------
; R.KMH Hand Blast FX
[Statedef 2210]
type = A
physics = N
movetype = I
velset = root,vel x, root,vel y
ctrl = 0
sprpriority = 4
anim = 2210 ;If this var is 0, have solid effects

[State 2210,pos]
type = posset
trigger1 = 1
x = root,pos x
y = root,pos y
ignorehitpause = 1
persistent = 1

[State 2210, scale]
type = angledraw
trigger1 = 1
scale = root,fvar(12),root,fvar(12)
ignorehitpause = 1
persistent = 1

[state  2210, vel]
type = velset
trigger1 = vel x != root,vel x
trigger2 = vel y != root,vel y
x = root,vel x
y = root,vel y
ignorehitpause = 1
persistent = 1

[State 3000, nhb]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1
persistent = 1

[State 2210, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0
time = 1
ignorehitpause = 1
persistent = 1

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 1306, End]
type = destroyself
trigger1 = root,stateno != 2197 && root,stateno != 2205

;==========================================================
; KAMEHAMEHA HELPER - DOWNWARDS
[Statedef 20001]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5

[State 0, Projectile Guarding assistance]
type = Projectile
;trigger1 = 1 ; this is for beams or moves that are basically full screen
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

;Added to constantly update this var
[State 802, cinematic contingency]
type = varset
trigger1 = var(37) != root,var(37)
var(37) = root,var(37)
ignorehitpause = 1
persistent = 1

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 3005, anim]
type = changeanim
trigger1 = !time && !prevstateno
value = 20001 ;If this var is 0, have solid effects

[State 3005, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = cond(var(2)<5,20001,20002)
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 3055, vel]
type=velset
trigger1= 1
x = cond((time<2 && var(2)>1),1,8)
y = cond((time<2 && var(2)>1),1,6)

[State 13100, goes SND]
type = playsnd
trigger1 = !time && !prevstateno
value = 2000,2
channel = 2

[State 1315, image]
type = afterimage
trigger1 = !time
time = 999
timegap = 1
framegap = 2
length = 5
palcontrast = 150,30,30
trans = add
ignorehitpause = 1

[State 3005, hit]
type = hitdef
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
;trigger1 = 1
attr = S,HP
hitflag = MAF
guardflag = MA
priority = 7,Hit
damage =  cond(root,var(54) > 0,9,7)+ceil(cond(root,fvar(11)*28<7,7, root,fvar(11)*28)), 3		;ceil(22*root,fvar(15)), 2
getpower = 0,0
givepower = 35,35
pausetime = 4*(var(2)<5),6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = High
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= cond(root,var(54) > 0,-6.2,-6), cond(root,var(54) > 0,-7,-2.5)
guard.velocity = -9
air.velocity = cond(root,var(54) > 0,-6,-5.5),cond(root,var(54) > 0,-8.5,-3.1)
airguard.velocity = -5.5, -1.5 
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=(var(2)>=6)
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s1
guard.sparkno = s1
sparkxy = 0,0
hitsound   = s1000,0
guardsound = S6,1
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5
id = 20001

[State 1315, Sparks]
type=explod
trigger1= movehit && numtarget
trigger1= (target,movetype=H) && !(target,time)
anim=7020
sprpriority=3
postype=p2
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
pos=(target,const(size.ground.front)-10),-floor(p2dist y)
removetime=-2
ownpal=1
facing=-1
ignorehitpause=1
persistent=0
pausemovetime=100
supermovetime=100

[State 3005, end]
type = changestate
trigger1 = movecontact
value = cond(var(2)<6,20001,20002)

[State 3001, Guardshake]
type = envshake
trigger1 = movecontact=1 && numtarget
time = 4
ampl = 6
freq = 176
ignorehitpause = 1

[state 17100, Hit Ground Effect]
type=explod
trigger1=pos y>=-20
anim=17100
id=17100
pos=20,20
postype=P1
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
sprpriority=-3
ownpal=1
supermovetime=-1
removetime = -2
persistent = 0

[state 17100, Wave Effect]
type=explod
trigger1=pos y>=-20
anim=20005
id=20005
pos=25,30
postype=P1
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
sprpriority=7
ownpal=1
supermovetime=-1
removetime = -2
persistent = 0

[State 3055, end]
type = PlaySnd
trigger1 = pos y>=-30
value = s1000,0
persistent = 0

[State 1010, ParentVarAdd - for 'Emo']
type = ParentVarSet
trigger1 = pos x!=[-240,240]
var(54) = 0
ignorehitpause = 1

[State 3055, end]
type = changestate
trigger1 = pos y>=-30 && !movecontact
trigger2 = root,var(37) = 1
trigger3 = var(37) = 1
value = 20011
ignorehitpause = 1

[State 3055, end]
type = changestate
trigger1 = root,var(37) = 1
trigger2 = var(37) = 1
value = 20002
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = pos x!=[-240,240]

;-----------------------------------------
;-----------------------------------------
; Kamehameha explod/vanish
[Statedef 20002]
type=A
physics=N
movetype=I
velset=0,0
ctrl=0
sprpriority=4
MoveHitPersist=1

[State 1010, ParentVarAdd - for 'Emo']
type = ParentVarSet
trigger1 = 1
var(54) = 0
ignorehitpause = 1

[State 1308, nothitby]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 3005, anim];Kmh horizontal
type = changeanim
trigger1 = !time
value = 20002 ;If this var is 0, have solid effects

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 1010, ParentVarAdd - for 'Emo']
type = ParentVarSet
trigger1= !animtime
var(54) = 0
ignorehitpause = 1

[State 1316, End]
type=destroyself
trigger1= !animtime
[State 1316, End with Zzyzzyxx fix]
type= null;destroyself
trigger1 = !numtarget
trigger2 = numtarget
trigger2 = target, time <= 1 && !(target, hitshakeover)

;==========================================================
;==========================================================
; KAMEHAMEHA HELPER - DOWNWARDS, Hitting ground
[Statedef 20011]
type = A
physics = N
movetype = A
ctrl = 0
sprpriority = 5
velset = 0,0

[State 0, Projectile Guarding assistance]
type = Projectile
;trigger1 = 1 ; this is for beams or moves that are basically full screen
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

;Added to constantly update this var
[State 802, cinematic contingency]
type = varset
trigger1 = var(37) != root,var(37)
var(37) = root,var(37)
ignorehitpause = 1
persistent = 1

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 3005, anim]
type = changeanim
trigger1 = !time
value = 20011 ;If this var is 0, have solid effects

[State 3005, hitvar]
type=varadd
trigger1= !time
var(2)=1

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 1316
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1315, image]
type = afterimage
trigger1 = !time
time = 999
timegap = 1
framegap = 2
length = 5
palcontrast = 150,30,30
trans = add
ignorehitpause = 1

[State 3005, end]
type = changestate
trigger1 = movecontact
value = cond(var(2)<6,20011,20002)

[State 3005, hit]
type = hitdef
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
attr = A,HP
hitflag = MAFD
guardflag = HA
priority = 7,Hit
;ceil(35*root,fvar(15)), 4
damage    = ceil(cond(root,fvar(11) * 25 < 7, 7, root,fvar(11) * 25)), 4
getpower = 0,0
givepower = 35,35
pausetime = 3,6
animtype = Back
air.animtype = Back
fall.animtype = Back
ground.type = Low
air.type = Low
ground.hittime = 16
ground.slidetime = 16
guard.hittime = 16
air.hittime = 13
airguard.ctrltime = 16
ground.velocity= -6, -7
guard.velocity = -8
air.velocity = -4,-9
airguard.velocity = -4, -1.5 
down.velocity = 0,0
down.hittime = 20
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
yaccel = .5
fall=1
air.fall = 1
fall.recover = 0
fall.recovertime = 13
sparkno = s7020
hitsound   = s1000,0
guardsound = S6,0
envshake.time = 16
envshake.ampl = 6
envshake.freq = 100
forcestand = 1
palfx.sinadd=64,64,64,4
palfx.mul=128,128,128
palfx.time=32
p1sprpriority = 5

[state 17100, Hit Ground Effect]
type=explod
trigger1 = time = 10
trigger2 = time = 20
anim=17100
id=17100
pos=10,30
postype=P1
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
sprpriority=-3
ownpal=1
supermovetime=-1
removetime = -2

[state 17100, Wave Effect]
type=explod
trigger1 = time = 10
trigger2 = time = 20
anim=20005 ;If this var is 0, have solid effects
id=20005
pos=15,40
postype=P1
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
sprpriority=7
ownpal=1
supermovetime=-1
removetime = -2

[State 3055, end]
type = PlaySnd
trigger1 = time = 5
trigger2 = time = 10
trigger3 = time = 15
trigger4 = time = 20
value = s1000,0

[State 1010, ParentVarAdd - for 'Emo']
type = ParentVarSet
trigger1 = !animtime
var(54) = 0
ignorehitpause = 1

[State 3055, end]
type = changestate
trigger1 = !animtime
value = 1316
ignorehitpause = 1

[State 3055, end]
type = changestate
trigger1 = root,var(37) = 1
trigger2 = var(37) = 1
value = 20002
ignorehitpause = 1

[State 1061, End]
type = destroyself
trigger1 = pos x!=[-240,240]
;---------------------------
; SSR Shield AURA
[Statedef 2705]
type = A
movetype = A
physics = N
ctrl = 0
anim = 2705
velset = 0,0
sprpriority = 5

[State 0, Projectile]
type = Projectile
;trigger1 = 1
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,HP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600


[State 905, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 222, hit]
type = HitDef
triggerall = enemy,anim = [5000,5009]
trigger1 = Time = 1
attr = A, HP
damage = 0
animtype = Hard	
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,13
guard.pausetime = 0,0
sparkno = -1
guard.sparkno = s7000
sparkxy = -17,-73
hitsound = s2705,0
;guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 24
ground.velocity = -6,0
guard.velocity = -9
guard.ctrltime = 10
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -1,-2
air.hittime = 12
air.animtype = back
fall.recover = 0
getpower= 0,0
givepower = 0,0
yaccel = 0.5
fall = 0
ID = 1098

[State 222, hit]
type = HitDef
triggerall = enemy,anim = [5010,5019]
trigger1 = Time = 1
attr = A, HP
damage = 0
animtype = Hard	
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,13
guard.pausetime = 0,0
sparkno = -1
guard.sparkno = s7000
sparkxy = -17,-73
hitsound = s2705,0
;guardsound = S6,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 24
ground.velocity = -6,0
guard.velocity = -9
guard.ctrltime = 10
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -1,-2
air.hittime = 12
air.animtype = back
fall.recover = 0
getpower= 0,0
givepower = 0,0
yaccel = 0.5
fall = 0
ID = 1098

[State 222, hit]
type = HitDef
triggerall = !(enemy,anim = [5000,5009]) && !(enemy,anim = [5010,5019])
trigger1 = Time = 1
attr = A, HP
damage = 0
animtype = Hard	
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,13
guard.pausetime = 0,0
sparkno = -1
guard.sparkno = s7000
sparkxy = -17,-73
hitsound = s2705,0
;guardsound = S6,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 24
ground.velocity = -6,0
guard.velocity = -9
guard.ctrltime = 10
airguard.velocity = -2.5,-1.3
air.type = High	
air.velocity = -1,-2
air.hittime = 12
air.animtype = back
fall.recover = 0
getpower= 0,0
givepower = 0,0
yaccel = 0.5
fall = 0
ID = 1098

[State 905, BindToParent]
type = BindToParent
trigger1 = parent,cond(PlayerIDexist(ID),1,0) ;Functionally, Root,exist
pos = 0,0

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1

[State 905, DestroySelf]
type = DestroySelf
trigger1 = !AnimTime

;==========================================================


;==========================================================
;------------------------------------------------
;Fade in/out effects BLACK
[StateDef 2771] 
type = A
movetype = I
physics = N
anim = 1
velset = 0,0

[State 13300, Expl]
type = Explod
triggerall = !numexplod(2771)
trigger1 = Time = 30
anim = 2771
ID = 2771
postype = left
pos = -30,-30
bindtime = -1
removetime = 71
pausemovetime = 71
ontop = 1
scale = 2,2

[State 13300, Fadeout]
type = PalFX
trigger1 = Time = [30,100]
time = 1
add = 4*(Time-30),4*(Time-30),4*(Time-30)

[State 13001, End]
type = DestroySelf
trigger1 = time=101

;==========================================================
; SUPERIOR GAUGE Helper P1
[Statedef 2860]
physics = N
velset = 0, 0
sprpriority = 7
anim = 1

[State 2860, barvar]
type = varset
trigger1 = 1
var(54) = root,var(54)
persistent = 1
ignorehitpause = 1

[State 3033, Assert]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State -2, Explod];SUPERIOR Gauge
type = Explod
triggerall = var(37) = 0
trigger1 = !NumExplod(2860) && var(54) > 0
anim = 2860
pos = 30+(Root, Var(45)),228-(Root, Var(46))
postype = left
removeTime = -1
;;helpertype = normal
scale = 1,1
sprpriority = 9
id = 2860
bindTime = -1
;ontop = 1
ownpal = 0
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State -2, Explod];SUPERIOR Bar LVL3
type = Explod
triggerall = var(37) = 0
trigger1 = !NumExplod(2863) && var(54) > 0
anim = 2863
pos = 30+(Root, Var(45)),228-(Root, Var(46))
postype = left
removeTime = -1
;;helpertype = normal
scale = 1,1
sprpriority = 10
id = 2863
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 1
pausemoveTime = 999999
supermoveTime = 999999

[State -2, Explod];SUPERIOR Bar LVL2
type = Explod
triggerall = var(37) = 0
trigger1 = !NumExplod(2862) && var(54) > 0
anim = 2862 
pos = 30+(Root, Var(45)),228-(Root, Var(46))
postype = left
removeTime = -1
;;helpertype = normal
scale = 1,1
sprpriority = 10
id = 2862
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 1
pausemoveTime = 999999
supermoveTime = 999999
[State -2, Explod];SUPERIOR Bar LVL1
type = Explod
triggerall = var(37) = 0
trigger1 = !NumExplod(2861) && var(54) > 0
anim = 2861
pos = 30+(Root, Var(45)),228-(Root, Var(46))
postype = left
removeTime = -1
;;helpertype = normal
scale = 1,1
sprpriority = 10
id = 2861
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 1
pausemoveTime = 999999
supermoveTime = 999999


;SUPERIOR Gauge
[state 17100,remove FX]
type = removeExplod
trigger1 = var(54) = 0
id = 2860
;SUPERIOR Bar
[state 17100,remove FX] ;LVL1
type = removeExplod
trigger1 = var(54) != 1
id = 2861
[state 17100,remove FX] ;LVL2
type = removeExplod
trigger1 = var(54) != 2
id = 2862
[state 17100,remove FX] ;LVL3
type = removeExplod
trigger1 = var(54) != 3
id = 2863

[State 3033, End]
type = DestroySelf
trigger1 = var(54) = 0 && !numExplod(2860)

;==========================================================
; SUPERIOR GAUGE Helper P2
[Statedef 2870]
physics = N
velset = 0, 0
sprpriority = 7
anim = 1

[State 2860, barvar]
type = varset
trigger1 = 1
var(54) = root,var(54)
persistent = 1
ignorehitpause = 1

[State 3033, Assert]
type = assertspecial
trigger1 = 1
flag = invisible
ignorehitpause = 1

[State -2, Explod];SUPERIOR Gauge
type = Explod
triggerall = var(37) = 0
trigger1 = !NumExplod(2870) && var(54) > 0
anim = 2870
pos = 289-(Root, Var(45)),228-(Root, Var(46))
postype = left
removeTime = -1
;;helpertype = normal
scale = 1,1
sprpriority = 9
id = 2870
bindTime = -1
;ontop = 1
ownpal = 0
ignorehitpause = 1
pausemoveTime = 999999
supermoveTime = 999999

[State -2, Explod];SUPERIOR Bar LVL3
type = Explod
triggerall = var(37) = 0
trigger1 = !NumExplod(2873) && var(54) > 0
anim = 2873
pos = 289-(Root, Var(45)),228-(Root, Var(46))
postype = left
removeTime = -1
;;helpertype = normal
scale = 1,1
sprpriority = 10
id = 2873
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 1
pausemoveTime = 999999
supermoveTime = 999999

[State -2, Explod];SUPERIOR Bar LVL2
type = Explod
triggerall = var(37) = 0
trigger1 = !NumExplod(2872) && var(54) > 0
anim = 2872 
pos = 289-(Root, Var(45)),228-(Root, Var(46))
postype = left
removeTime = -1
;;helpertype = normal
scale = 1,1
sprpriority = 10
id = 2872
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 1
pausemoveTime = 999999
supermoveTime = 999999
[State -2, Explod];SUPERIOR Bar LVL1
type = Explod
triggerall = var(37) = 0
trigger1 = !NumExplod(2871) && var(54) > 0
anim = 2871
pos = 289-(Root, Var(45)),228-(Root, Var(46))
postype = left
removeTime = -1
;;helpertype = normal
scale = 1,1
sprpriority = 10
id = 2871
bindTime = -1
;ontop = 1
ownpal = 1
ignorehitpause = 1
persistent = 1
pausemoveTime = 999999
supermoveTime = 999999


;SUPERIOR Gauge
[state 17100,remove FX]
type = removeExplod
trigger1 = var(54) = 0
id = 2870
;SUPERIOR Bar
[state 17100,remove FX] ;LVL1
type = removeExplod
trigger1 = var(54) != 1
id = 2871
[state 17100,remove FX] ;LVL2
type = removeExplod
trigger1 = var(54) != 2
id = 2872
[state 17100,remove FX] ;LVL3
type = removeExplod
trigger1 = var(54) != 3
id = 2873

[State 3033, End]
type = DestroySelf
trigger1 = var(54) = 0 && !numExplod(2870)

;===========================================================================
;SUPERIOR CLONE HIT
[Statedef 2879]
type = S
movetype = A
physics = N
ctrl = 0
velset = gethitvar(xvel)*facing,gethitvar(yvel)

[state 0, darken]
type = PalFX
trigger1 = 1
add = Root,Var(53),Root,Var(53),Root,Var(53)
time = 1
ignorehitpause = 1

[state 0, anim]
type = changeanim
triggerall = anim != 2878 && anim != 2879
trigger1 = time <= 0
trigger1 = gethitvar(yvel) >= 0 ;If not knocked up
value = 2878
[state 0, anim]
type = changeanim
triggerall = anim != 2878 && anim != 2879
trigger1 = time <= 0
trigger1 = gethitvar(yvel) < 0 ;If knocked up
value = 2879

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, AA
ignorehitpause = 1

[State 250, 1] ;Swing SND
type = PlaySnd
trigger1 = anim = 2878
trigger1 = AnimElem = 3
trigger2 = anim = 2879
trigger2 = AnimElem = 4
value = 0,5   ;21,2

;Gravity if knocked up
[state 0, anim]
type = veladd
trigger1 = gethitvar(yvel) < 0 ;If knocked up
y = gethitvar(yaccel)

[State 3033, End]
type = DestroySelf
trigger1 = !animtime

;===========================================================================
;SUPERIOR C.A-DOWN.H
[Statedef 2901]
type = S
movetype = A
physics = N
anim = 2881
ctrl = 0
velset = 5,0
hitcountpersist = 1
movehitpersist = 1

[state 0, darken]
type = PalFX
trigger1 = 1
add = Root,Var(53),Root,Var(53),Root,Var(53)
time = 1
ignorehitpause = 1

[State 0, Projectile Guarding assistance]
type = Projectile
;trigger1 = 1 ; this is for beams or moves that are basically full screen
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

;Added to constantly update this var
[State 802, cinematic contingency]
type = varset
trigger1 = var(37) != root,var(37)
var(37) = root,var(37)
ignorehitpause = 1
persistent = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NA, SA, HA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 2879
;attr = SCA, NP, SP, HP
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0.5
ignorehitpause = 1

[State 250, fall]
type = HitDef
triggerall = animelem = 4
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
attr = S, NA
animtype  = Hard
;damage    = 48,0
damage = ceil(cond(root,fvar(11) * 50 < 7, 7, root,fvar(11) * 50)), 10
priority = 4, Hit
guardflag = MA
pausetime = 13,13
guard.pausetime = 13,13
sparkno = s1;s7030
guard.sparkno = s1;s7000
;sparkxy = -20,-85
hitsound   = s5,5
guardsound = S6,1
ground.type = high
ground.slidetime = 15
ground.hittime = 18 ;15
ground.velocity = 0,-5.49
air.velocity = -4,2
air.animtype = back
getpower= cond(p2movetype=H,40,210), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
hitonce = 1
id = 2901

[State 200,Hitsparks]
type = explod
triggerall = cond(numtarget,cond(numtarget,!(target,IsHelper),0),0)
triggerall = numtarget(2901)
trigger1 = movecontact
anim = cond(movehit,7030,7000)
postype = P1
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
facing = 1
pos =  66,-23
id = 7000
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(5) >= 0
time = 1
value = SCA, AA
ignorehitpause = 1

[State 250, 1] ;Swing SND
type = PlaySnd
trigger1 = AnimElem = 7
value = 0,5   ;21,2

[State 250, end] 
type = destroyself
trigger1 = !animtime
;Added this section as a safeguard so projectil;es don't interrupt cinematics
;trigger2 = root,stateno = 2300 ;Truth Barrage confirm
;trigger2 = root,movehit
;trigger3 = enemynear,stateno = 2305 ;Truth Barrage confirm P2
;trigger4 = root,stateno = 2190 ;Divine Rush Confirm
;trigger4 = root,movehit
;trigger5 = enemynear,stateno = 2191 ;Divine Rush Confirm P2
;trigger6 = root,stateno = 30400 ;Spirit God Impact Confirm
;trigger6 = root,movehit
;trigger7 = enemynear,stateno = 30401 ;Spirit God Impact Confirm
;trigger8 = root,stateno = 30500 ;Eternal Uniter Confirm
;trigger8 = root,movehit
;trigger9 = enemynear,stateno = 30501 ;Eternal Uniter Confirm
;trigger10 = root,stateno = [1110,1111] ;EX Dive Kick
;trigger10 = root,movehit
;trigger11 = enemynear,stateno = [1112,1114] ;EX Dive Kick
;trigger12 = root,stateno = 1203 ;EX Tatsu
trigger12 = root,movehit

[State 2881, end]
type = changestate
;trigger1 = !animtime
;Added this section as a safeguard so projectil;es don't interrupt cinematics
trigger1 = root,stateno = 2300 ;Truth Barrage confirm
trigger1 = root,movehit
trigger2 = enemynear,stateno = 2305 ;Truth Barrage confirm P2
trigger3 = root,stateno = 2190 ;Divine Rush Confirm
trigger3 = root,movehit
trigger4 = enemynear,stateno = 2191 ;Divine Rush Confirm P2
trigger5 = root,stateno = 30400 ;Spirit God Impact Confirm
trigger5 = root,movehit
trigger6 = enemynear,stateno = 30401 ;Spirit God Impact Confirm
trigger7 = root,stateno = 30500 ;Eternal Uniter Confirm
trigger7 = root,movehit
trigger8 = enemynear,stateno = 30501 ;Eternal Uniter Confirm
trigger9 = root,stateno = [1110,1111] ;EX Dive Kick
trigger9 = root,movehit
trigger10 = enemynear,stateno = [1112,1114] ;EX Dive Kick
trigger11 = root,stateno = 1203 ;EX Tatsu
value = 29061


;===========================================================================
;SUPERIOR C.A-TOWARDS.H
[Statedef 2906]
type = S
movetype = A
physics = N
anim = 2886
ctrl = 0
velset = 3.5,0
hitcountpersist = 1
movehitpersist = 1

[state 0, darken]
type = PalFX
trigger1 = 1
add = Root,Var(53),Root,Var(53),Root,Var(53)
time = 1
ignorehitpause = 1

[State 0, Projectile Guarding assistance]
type = Projectile
;trigger1 = 1 ; this is for beams or moves that are basically full screen
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

;Added to constantly update this var
[State 802, cinematic contingency]
type = varset
trigger1 = var(37) != root,var(37)
var(37) = root,var(37)
ignorehitpause = 1
persistent = 1

[State 1010, Limiter']
type = ParentVarAdd
trigger1 = time <= 0
var(21) = 1
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NA, SA, HA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 2879
;attr = SCA, NP, SP, HP
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 0.4
ignorehitpause = 1

[State 1061, Hitdef]
type = HitDef
triggerall = animelem = 2 || animelem = 4 || animelem = 6 || animelem = 8 || animelem = 4 || animelem = 10 || animelem = 12
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
attr = S,HP
animtype  = hard
damage    = ceil(cond(root,fvar(11)*3<2,2, root,fvar(11)*3)),0
priority  = 4,Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7010
guard.sparkno = -1
sparkxy = 0,0
hitsound   = s5,1
guardsound = S6,0
ground.type = high
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.8,0
guard.velocity = -3.5
air.velocity = -3.8,-2
airguard.velocity = -3, -2
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
air.fall = 1
fall.recover = 0
fall = 0;cond(animelemtime(13) > 0, 1,0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0 ;cond(var(15) = 1,0,ceil(cond(p2movetype=H, 40, 140)  * cond(root,var(54) > 0, fvar(6),1))), ceil(10 * cond(root,var(54) > 0, fvar(6) ,1))
givepower = 35,35
hitonce = 1
ignorehitpause = 1
persistent = 1

[State 1061, Hitdef]
type = HitDef
triggerall = animelem = 3 || animelem = 5 || animelem = 7 || animelem = 9 || animelem = 11 || animelem = 13 || animelem = 15
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
attr = S, SP
animtype  = hard
damage    = ceil(cond(root,fvar(11)*3<2,2, root,fvar(11)*3)),0
priority  = 4,Hit
guardflag = MA
hitflag = MAF
pausetime = 0,10
sparkno = s7010
guard.sparkno = s7000
sparkxy = -25,-80
hitsound   = s5,1
guardsound = S6,0
ground.type = Low
air.type = low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3.8,0
guard.velocity = -3.5
air.velocity = -3.8,-2
airguard.velocity = -3, -2
envshake.time = 5
envshake.ampl = 4
envshake.freq = 176
fall.envshake.time = 10
fall.envshake.ampl = 4
fall.envshake.freq = 176
yaccel = 0.5
air.fall = 1
fall.recover = 0
fall = 0;cond(animelemtime(13) > 0, 1,0)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0 ;cond(var(15) = 1,0,ceil(cond(p2movetype=H, 40, 140)  * cond(root,var(54) > 0, fvar(6),1))), ceil(10 * cond(root,var(54) > 0, fvar(6) ,1))
givepower = 35,35
hitonce = 1
ignorehitpause = 1
persistent = 1


[State 1061, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(14) >= 0
time = 1
value = SCA, AA
ignorehitpause = 1


[State 250, 1] ;Swing SND
type = PlaySnd
trigger1 = AnimElem = 15
value = 0,5   ;21,2

[State 2881, end]
type = destroyself
trigger1 = !animtime
;Added this section as a safeguard so projectil;es don't interrupt cinematics
;trigger2 = root,stateno = 2300 ;Truth Barrage confirm
;trigger2 = root,movehit
;trigger3 = enemynear,stateno = 2305 ;Truth Barrage confirm P2
;trigger4 = root,stateno = 2190 ;Divine Rush Confirm
;trigger4 = root,movehit
;trigger5 = enemynear,stateno = 2191 ;Divine Rush Confirm P2
;trigger6 = root,stateno = 30400 ;Spirit God Impact Confirm
;trigger6 = root,movehit
;trigger7 = enemynear,stateno = 30401 ;Spirit God Impact Confirm
;trigger8 = root,stateno = 30500 ;Eternal Uniter Confirm
;trigger8 = root,movehit
;trigger9 = enemynear,stateno = 30501 ;Eternal Uniter Confirm
;trigger10 = root,stateno = [1110,1111] ;EX Dive Kick
;trigger10 = root,movehit
;trigger11 = enemynear,stateno = [1112,1114] ;EX Dive Kick
;trigger12 = root,stateno = 1203 ;EX Tatsu
trigger12 = root,movehit

[State 2881, end]
type = changestate
;trigger1 = !animtime
;Added this section as a safeguard so projectil;es don't interrupt cinematics
trigger1 = root,stateno = 2300 ;Truth Barrage confirm
trigger1 = root,movehit
trigger2 = enemynear,stateno = 2305 ;Truth Barrage confirm P2
trigger3 = root,stateno = 2190 ;Divine Rush Confirm
trigger3 = root,movehit
trigger4 = enemynear,stateno = 2191 ;Divine Rush Confirm P2
trigger5 = root,stateno = 30400 ;Spirit God Impact Confirm
trigger5 = root,movehit
trigger6 = enemynear,stateno = 30401 ;Spirit God Impact Confirm
trigger7 = root,stateno = 30500 ;Eternal Uniter Confirm
trigger7 = root,movehit
trigger8 = enemynear,stateno = 30501 ;Eternal Uniter Confirm
trigger9 = root,stateno = [1110,1111] ;EX Dive Kick
trigger9 = root,movehit
trigger10 = enemynear,stateno = [1112,1114] ;EX Dive Kick
trigger11 = root,stateno = 1203 ;EX Tatsu
value = 29061

;===========================================================================
;SUPERIOR C.A-Fade contingency
[Statedef 29061]
type = S
movetype = A
physics = N
ctrl = 0
hitcountpersist = 1
movehitpersist = 1

[state 0, darken]
type = PalFX
trigger1 = 1
add = Root,Var(53) - (4*time), Root,Var(53)- (4*time), Root,Var(53)- (4*time)
time = 1
ignorehitpause = 1

[state 0, darken]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 222 - (12*time),100  + (12*time)
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NA, SA, HA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = 2879
;attr = SCA, NP, SP, HP
attr = SCA, AA, AP, AT
ignorehitpause = 1

[State 0, palfx]
type = destroyself
trigger1 = time = 30

;------------------------------------------------
; Diagonal white foreground Chou Kamehameha fatality Up
[Statedef 5945]
type    = S
movetype= I
physics = N
anim = 5944
sprpriority = 8

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, rotate]
type = AngleDraw
trigger1 = 1
value = 150

[State 2260, destroy]
type = DestroySelf
trigger1 = !animtime

;------------------------------------------------
; Diagonal white foreground Chou Kamehameha fatality Down
[Statedef 5947]
type    = S
movetype= I
physics = N
anim = 5944
sprpriority = 8

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 0, rotate]
type = AngleDraw
trigger1 = 1
value = -150

[State 2260, destroy]
type = DestroySelf
trigger1 = !animtime

;---------------------------------------------------------------------------------------------------
;AI Helper1
[Statedef 9998]
type    = A
movetype= H
physics = N
juggle=0;  = 8
velset=0,0
poweradd= 0
ctrl = 0
anim =1;193
sprpriority = 9

;ignorehitpause = 
;persistent = 
;ignorehitpause = 
;persistent = 

[State 0, VarSet]
type = VarSet
trigger1 = root,stateno=110
v =6   ;fv = 10
value = 1
[State 0, VarSet]
type = VarSet
trigger1 = root,movetype=H || root,statetype!=A
v =6   ;fv = 10
value = 0


;var(35) = movehit
[State 0, VarSet]
type = VarSet
triggerall = var(35)=0
trigger1 = enemy,gethitvar(hitshaketime)=1
;define exceptions where movecontact is fine
v = 35    ;fv = 10
value = 1
[State 0, VarSet]
type = parentVarSet
trigger1 = 1;&& enemy,hitshakeover
v = 35    ;fv = 10
value = var(34)
[State 0, VarSet]
type = parentVarSet
trigger1 = 1
v = 36 ;fv = 10
value = var(35)
;===non attacks
;====
;101
;[State 0, Null]
;type = Null
;triggerall =var(34)=-1
;triggerall =(root,stateno=101 &&root,time=20)&& (cond(numhelper(1001),helper(1001),numtarget(201)&&p2statetype=A,0) ||p2stateno=1105 ||p2stateno=[20012,20014])
;trigger1 =(random%5>1 || root,AIlevel >6) 
;trigger1 = var(34):=cond((root,p2bodydist y <-90||root,vel y <0||( p2stateno=1105 ||(p2stateno=[20012,20014])||p2stateno=[20025,20026]))&&root,prevstateno!=1100,211,cond(root,numexplod(650)=0,230,210))
;
;;==Helpers==
[State 0, Null]
type = Null
triggerall =root,numhelper(2901)&&var(34)=-1
trigger1 = helper(2901),movehit && helper(2901),numtarget
trigger1 = var(34):=210
trigger2 = helper(2906),movehit && helper(2906),numtarget
trigger2 = var(34):=210
;
;
;
;;====
;200
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=200 )&& var(35)  && var(34)=-1
;trigger1 =(random%5>1||root,AIlevel=8)&& p2statetype=A  ;&& root,fvar(8)<3
;trigger1 = var(34):=cond(p2bodydist x<20&&root,p2bodydist y>-55,210,420)
;;210
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=210 )&& var(35)  && var(34)=-1
;trigger1 =(random%5>1||root,AIlevel=8)&& p2statetype=A  ;&& root,fvar(8)<3
;trigger1 = var(34):=cond(p2bodydist x>25,1300,420)
;;;420
[State 0, Null]
type = Null
triggerall =(root,stateno=420)&& var(35) && var(34)=-1
trigger1 =(random%5>1 || root,AIlevel >6) 
trigger1 = var(34):=cond(root,vel x,630,600)
;;600
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=600)&& var(35) && var(34)=-1  
;trigger1 =(random%5>1||root,AIlevel=8) && p2statetype=A 
;trigger1 = var(34):=cond(root,p2bodydist y<-20,610,640)
;;610
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=610)&& var(35) && p2statetype=A  && var(34)=-1
;trigger1 =(random%5>1 || root,AIlevel >6) 
;trigger1 = var(34):=cond(root,p2bodydist y <-25,1260,640)
;;630
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=630)&& var(35)   && var(34)=-1
;trigger1 =(random%5>1||root,AIlevel=8) && p2statetype=A 
;trigger1 = var(34):=cond(root,p2bodydist y<-20&&p2bodydist x<35,610,640)
;;640
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=640)&& var(35) && p2statetype=A  && var(34)=-1
;trigger1 =(random%5>1 || root,AIlevel >6) 
;trigger1 = var(34):=1260
;;630
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=630)&& var(35)  
;trigger1 =(random%5>1||root,AIlevel=8) && root,prevstateno=600&& (root,pos y >-65 || root,vel y >-3) && root,vel y >=0
;trigger1 = var(34):=cond(root,numexplod(650)=0,610,640)
;;600
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=600)&& var(35)  
;trigger1 =(random%5>1||root,AIlevel=8) && root,prevstateno=630&& (root,pos y >-65 || root,vel y >-3) && root,vel y >=0
;trigger1 = var(34):=cond(root,numexplod(650)=0,610,640)
;;640
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=640)&& var(35)  
;trigger1 =(random%5>1||root,AIlevel=8) && root,numexplod(650)>0 && root,power>=500 && root,pos y <-45 
;trigger1 = var(34):=1005
;;610
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=610)&& var(35)
;trigger1 =(random%5=0||root,AIlevel=8) && root,power>600&& root,pos y<-40&& helper(10003),numexplod(1000)=0
;trigger1 = var(34):=1005
;trigger2 =(random%5>1||root,AIlevel=8) && root,numexplod(650)=1
;trigger2 = var(34):=cond(root,fvar(15)<40,200,230)
;;====specials
;;1100
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=1100)&& var(35) 
;trigger1 =(random%5>1||root,AIlevel=8) && root,var(2) && root,numexplod(1101)=0
;trigger1 = var(34):=cond(root,frontedgebodydist <65,cond(root,numexplod(650)>0,210,400),101)
;trigger2 =(random%5>1||root,AIlevel=8) && !root,var(2) && root,power >700 && helper(10003),numexplod(1000)=0
;trigger2 = var(34):=1005


;1130
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=1130)&& var(35)  && var(34)=-1
;trigger1 =(random%5>2||root,AIlevel=8)
;trigger1 = var(34):=400
;
;1200
[State 0, Null]
type = Null
triggerall =(root,anim=1201)&& var(35) && var(34)=-1
trigger1 =(random%5>2||root,AIlevel=8)
trigger1 = var(34):=210
[State 0, Null]
type = Null
triggerall =(root,anim=1202)&& var(35) && var(34)=-1
trigger1 =(random%5>2||root,AIlevel=8)
trigger1 = var(34):=220

;
;
;;1330
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=1330)&& var(35)  && var(34)=-1
;trigger1 =(random%5>2||root,AIlevel=8)
;trigger1 = var(34):=200

;
;;1000
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=1000)&& var(35) && root,var(47) = 240 && root,var(2)=0
;trigger1 =(random%5>2) && root,animelemtime(4) > 0
;trigger1 = var(4):=3
;
;;1001
;[State 0, Null]
;type = Null
;triggerall =(root,stateno=1001)&& var(35) && root,var(47) = 240 && root,var(2)=0
;trigger1 =(random%5>2) && root,animelemtime(4) > 0
;trigger1 = var(4):=3

;;1001
;[State 0, Null]
;type = Null
;triggerall =root,stateno=1000&& var(35) && root,var(47) = 240
;trigger1 =root,var(14)  >=8
;trigger1 = var(4):=3
;trigger2 = (random%5>2) 
;trigger2 =var(4):=3



;universaltagout
;[State 0, Null]
;type = Null
;triggerall= numpartner>0; && partner,alive&& root,var(47) = 240
;triggerall = partner,alive&& root,var(47) = 240
;trigger1 =(root,stateno=[1000,1020])&& var(35) 
;trigger1 =root,var(14) >=8
;trigger1 = var(4):=3
;trigger2 =(root,stateno=[1000,1399])&& root,moveguarded&& (random%5>2)
;trigger2 = var(4):=3
;trigger3 =root,numhelper(1022)
;trigger3 = helper(1022),moveguarded&& (random%5>3) &&var(34)=-1
;trigger3 = var(4):=3
;trigger4 =(root,stateno=[1000,1399])&& var(35)  && (random%5>2)
;trigger4 =root,life <500
;trigger4 = var(4):=3
;trigger5 =(root,stateno=[200,410])&& var(35)  && (random%5>2)
;trigger5 =root,var(14)>=12
;trigger5 = var(4):=3
;=====================

[State 0, VarSet]
type = VarSet
trigger1 = var(4)!=0 && root,ctrl
v = 4    ;fv = 10
value = 0
;ignorehitpause = 
;persistent = 


[State 0, VarSet]
type = parentVarSet
trigger1 = p2movetype=H 
v = 35   ;fv = 10
value = var(34)
;ignorehitpause = 
;persistent = 
[State 0, VarSet]
type = VarSet
trigger1 = root,stateno=var(34) && root,time=1
trigger1=var(34)=[1000,1200]
v = 2   ;fv = 10
value = 0
[State 0, VarSet]
type = VarSet
trigger1 =p2movetype!=H || enemy,hitover && p2stateno=5040
trigger2 = root,stateno=var(34)&& root,time=1
v = 34    ;fv = 10
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(35) &&( root,movecontact>1 || root,time=1)
v = 35    ;fv = 10
value = 0
;selection made?
[State 0, VarSet]
type = VarSet
trigger1 = var(34)=[600,699]
trigger1= root,statetype!=A
v = 30    ;fv = 10
value = 1
[State 0, VarSet]
type = VarSet
trigger1 = root,stateno=50
v = 30    ;fv = 10
value = 0

 [State 0, DestroySelf]
type = DestroySelf
trigger1 =roundstate!=2
trigger2 = AILevel = 0

;200;---------------------------------------------------------------------------------------------------
;AI Helper2
[Statedef 9999]
type    = A
movetype= H
physics = N
juggle=0;  = 8
velset=0,0
poweradd= 0
ctrl = 0
anim =1
sprpriority = 9

;[State 0, PowerAdd]
;type = PowerAdd
;triggerall = root,movetype!=A
;trigger1 = gametime%80=0 &&  root,power<1000
;value = -20
;[State 0, VarSet]
;type = parentVarSet
;trigger1 =root,movetype=I 
;v = 1    ;fv = 10
;value = 0

;[State 0, VarSet]
;type = parentVarSet
;trigger1 =root,movetype=I 
;v =2    ;fv = 10
;value = 0




;[State 0, Explod]
;type = Explod
;trigger1 = cond(root,numhelper(1001),helper(1001),numtarget(201)&&helper(1001),movehit=1&&helper(1003),var(10),0)
;anim = 10000
;ID = 1101
;pos = 0,0
;postype = p1  ;p2,front,back,left,right
;facing = 1
;vfacing = 1
;bindtime = 1
;removetime = -1
;scale = 1,1
;sprpriority = 0
;removeongethit = 0
;[State 0, RemoveExplod]
;type = RemoveExplod
;trigger1 = p2movetype!=H || p2stateno=[120,155]
;id =1001 

;
;[State 0, VarSet]
;type = parentVarSet
;trigger1 = 1
;fv = 15    ;fv = 10
;value = p2bodydist x+root,var(35)
;ignorehitpause =1 

 

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = invisible
[State 0, DisplayToClipboard]
type = Null;DisplayToClipboard
trigger1 = 1
text = "var(2) = %d var(3) = %d  vel x = %d movehit= %d\nNeutrality by Kamekaze"
params = numexplod(1000),numexplod(1101),var(30),(root,movecontact)
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 40    ;fv = 10
value = root,Ailevel
;ignorehitpause = 
;persistent = 

;persistent = 
[State 0, VarSet]
type = Varset
trigger1 =var(10)>=0
trigger2 =var(11)>=0
trigger3 =var(12)>=0
v = 3   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = Varset
trigger1 =var(10)>=0
trigger2 =var(11)>=0
trigger3 =var(12)>=0
trigger4 =var(13)>=0
trigger10 =var(20)>=0
trigger11 =var(21)>=0
v = 2   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = Varset
trigger1 =var(10)=0
trigger1 =var(11)=0
trigger1 =var(12)=0
trigger1 =var(13)=0
trigger1 =var(20)=0
trigger1 =var(21)=0
v = 2   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = Varset
trigger1 =var(10)=0
trigger1 =var(11)=0
trigger1 =var(12)=0
v = 3   ;fv = 10
value = 0
ignorehitpause = 1
;enough for lights
[State 0, Explod]
type = varset
triggerall = p2statetype!=A
triggerall = var(10)=0
trigger1 = root,movecontact=1 && (root,stateno=600||(root,stateno=630 )) && root,pos y =[-66,-55]
trigger2 = root,movecontact=1 && (root,stateno=[610,620]) && root,pos y =[-65,-56]
trigger3 = root,movecontact=1 && (root,stateno=[640,650])&& root,pos y =[-65,-56]
trigger4 =root,movecontact=1 &&(root,stateno=226) && p2statetype!=A 
;rigger5 = cond(root,numhelper(1001),(helper(1001),var(10)||root,stateno!=1000&&root,fvar(15)<45)&&helper(1001),movehit&&p2statetype!=A,0)
v=10
value=1

;enough for heavys
[State 0, Explod]
type = varset
triggerall = p2statetype!=A
triggerall = var(10)=0
triggerall = var(11)=0
trigger1 = root,movehit=1 && (root,stateno=600) && root,pos y =[-55,-20]
trigger2 = root,movehit=1 &&  (root,stateno=[610,620])&& root,pos y =[-55,-20]
trigger3 = root,movehit=1 && (root,stateno=630 )&& root,pos y =[-55,-20]
trigger4 = root,movehit=1 && (root,stateno=[640,650])&& root,pos y =[-55,-20]
v=11
value=1



;enough for heavys
[State 0, Explod]
type = varset
triggerall = var(10)=0
triggerall = var(11)=0
triggerall = var(12)=0
trigger1 = root,movehit=1 && (root,stateno=600) && root,pos y >-20
trigger2 = root,movehit=1 && (root,stateno=630)&& root,pos y >-20
trigger3 = root,movehit=1 &&  (root,stateno=[610,620])&& root,pos y >-20
trigger4 = root,movehit=1 && (root,stateno=[640,650])&& root,pos y >-20
;trigger8 = p2stateno=5901 && p2bodydist x <50
v=12
value=1



[State 0, VarSet]
type = Varadd
triggerall = enemy,hitshakeover
trigger1 =root,moveguarded=1 
v = 1   ;fv = 10
value = 1
ignorehitpause = 0
[State 0, VarSet]
type = VarSet
trigger1 = root,movehit
v = 1    ;fv = 10
value = 0
;persistent = 
[State 0, VarSet]
type = Varset
trigger1 =root,statetype=A&& root,movetype!=H
v = 4   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = Varset
trigger1 =root,statetype=A&& root,movetype=H
v = 4   ;fv = 10
value = 2
ignorehitpause = 1
[State 0, VarSet]
type = Varset
trigger1 =var(6)=1
v = 4   ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarSet]
type = Varadd
trigger1 =var(4)=2
v = 5   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = Varset
trigger1 =root,movehit
trigger2 = root,var(15)
v = 5   ;fv = 10
value =0
ignorehitpause = 1 
[State 0, VarSet]
type = Varset
trigger1 = (root,stateno=[5000,5200])&&root,prevstateno=[120,155]
v = 6   ;fv = 10
value = p2stateno
ignorehitpause = 1
;persistent = 

[State 0, VarSet]
type = VarSet
trigger1 =  p2stateno=var(6)
v =7   ;fv = 10
value = 1
ignorehitpause = 1
;persistent = 
[State 0, VarSet]
type = VarSet
trigger1 =  p2stateno!=var(6)
v =7   ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = root,stateno=5120 
v = 8    ;fv = 10
value = 10
[State 0, VarSet]
type = Varadd
trigger1 = root,stateno!=5120 && var(8)>0
v = 8    ;fv = 10
value = -1

[State 0, VarSet]
type = VarSet
trigger1 = var(8)<0
v = 8    ;fv = 10
value = 0

;bait
[State 0, Explod]
type = varset
triggerall = var(10)=0
triggerall = var(11)=0
triggerall = var(12)=0
triggerall = var(13)=0
;triggerall = var(1)>3
trigger1 = root,moveguarded=1 &&root,stateno=200
trigger2 = root,moveguarded=1&& root,stateno=430 
trigger3 = root,moveguarded=1&& root,stateno=230
trigger4 = root,moveguarded=1&& root,stateno=400
v=13
value=1

[State 0, Explod]
type = varset
trigger1= enemy,const(size.head.pos.y)<=-65
v=14
value=1
ignorehitpause =1


;------can air dash
[State 0, Explod]
type = varset
triggerall = root,movetype!=H ;|| root,var(34)=[600,1005]
triggerall = root,statetype=A
triggerall = root,ctrl || root,stateno=57
triggerall = p2statetype=L ||p2stateno!=[3003,3005]
triggerall = p2bodydist x >30 ||  p2movetype!=A || root,statetype=A
trigger1= p2movetype=A  && p2bodydist x !=[1,30]
trigger2 = p2stateno=5120 || enemy,prevstateno=5120
trigger3 = p2bodydist x <80 &&  p2statetype=A
trigger4 = (p2bodydist x>120 && ( p2movetype!=A ||  p2statetype!=A))||backedgebodydist <117
trigger5 = (p2bodydist x =[-30,0]) &&  p2statetype!=A && root,frontedgebodydist >60
trigger6 = p2bodydist x>150 &&  p2stateno=2000
v=15
value=1
ignorehitpause =1


;------can air dash back
[State 15, Explod]
type = varset
triggerall = root,movetype!=H
triggerall = root,statetype=A
triggerall = root,ctrl
triggerall =  p2movetype!=H
triggerall =p2bodydist x<120
trigger1 = (p2bodydist x =[-10,40]) &&  p2statetype=A
trigger2 = (p2bodydist x=[-30,0]) &&  p2statetype!=A && root,frontedgebodydist <60
trigger3= p2bodydist x<90 && ( p2movetype=A && p2statetype!=A&&backedgebodydist >117)
v=16
value=1
ignorehitpause =1

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 17   ;fv = 100
value = (p2movetype=H && (enemy,anim!=5040&&enemy,anim=[5030,5061]))|| enemy,hitfall
;ignorehitpause = 
;persistent = 
[State 0, VarSet]
type = Varadd
trigger1 = root,numtarget
trigger1 = enemy,gethitvar(hitshaketime) =1 && p2statetype=A 
trigger1 = root,stateno=[200,450]
trigger1 = root,anim!=260
v = 18    ;fv = 10
value = 7
[State 0, VarSet]
type = Varadd
trigger1 = root,numtarget
trigger1 = enemy,gethitvar(hitshaketime) =1 && p2statetype=A 
trigger1 = root,stateno=[600,650]
v = 18    ;fv = 10
value = cond(root,var(2) = 1, 1,2)
[State 0, VarSet]
type = Varadd
trigger1 = root,numtarget&& root,hitcount=1
trigger1 = enemy,gethitvar(hitshaketime) =1 && p2statetype=A 
trigger1 = root,stateno=1100 ||  root,stateno=3000
v = 18    ;fv = 10
value = 3
[State 0, VarSet]
type = Varadd
trigger1 = root,numtarget&& root,hitcount=1
trigger1 = enemy,gethitvar(hitshaketime) =1 && p2statetype=A 
trigger1 = root,stateno=1110
v = 18    ;fv = 10
value = 1
[State 0, VarSet]
type = Varadd
trigger1 = root,numtarget && root,hitcount=1
trigger1 = enemy,gethitvar(hitshaketime) =1 && p2statetype=A 
trigger1 = root,stateno=[1200,1203]
v = 18    ;fv = 10
value = cond(anim = 1202, 3,6)

[State 0, VarSet]
type = Varset
trigger1 =  p2statetype!=A 
trigger2 = p2movetype!=H
v = 18    ;fv = 10
value = 0
[State 0, VarSet]
type = VarSet
trigger1 = root,prevstateno=[190,199]
v = 19   ;fv = 10
value = 49
;ignorehitpause = 
;persistent = 
[State 0, VarAdd]
type = VarAdd
trigger1 = var(19)>0 && roundstate=2
v = 19    ;fv = 
value = -1

[State 0, VarRandom]
type = VarRandom
trigger1 = 1
v = 31
range = 0,999
;ignorehitpause = 
;persistent = 
[State 0, VarSet]
type = VarSet
triggerall = p2statetype=A && root,movecontact
trigger1 =  stateno=[600,640]
v = 23    ;fv = 10
value = 1
;ignorehitpause = 
;persistent = 
[State 0, VarSet]
type = VarSet
trigger1 = p2statetype!=A && root,movecontact
trigger2 =  root,numprojid(999)>0
trigger3 = p2movetype!=H
v = 23    ;fv = 10
value = 0

;1000
[State 0, Explod]
type = varset
triggerall = var(20)=0
triggerall = root,numhelper(1005)=0
triggerall = (p2bodydist x =[60,120])
triggerall =  !root,movecontact
triggerall = root,movetype!=H
triggerall =  (root,ctrl||(root,stateno=[100,101])||root,stateno=[10,20]) 
trigger1= p2bodydist x+15<= var(0) && enemy,pos y >=0 && var(0)>-1&&  p2bodydist x >75
trigger2= random<125&&((p2statetype!=A||root,p2bodydist y =[-85,-30])&& (enemy,vel y >=0 && !enemy,hitfall))&&p2bodydist x >=75
;trigger3 = root,movecontact 
v=20
value=1
ignorehitpause =1
;1001
[State 1, Explod]
type = varset
triggerall = var(21)=0
triggerall = root,numhelper(1005)=0
triggerall = (p2bodydist x=[120,190])
triggerall =  !root,movecontact
triggerall = root,movetype!=H
triggerall = (root,ctrl||(root,stateno=[100,101])||root,stateno=[10,20]) 
trigger1= p2bodydist x-10<= var(0) && enemy,pos y >=0 && var(0)>-1&&  p2bodydist x >75
trigger2= random<125&&((p2statetype!=A||root,p2bodydist y =[-85,-30])&& (enemy,vel y >=0 && !enemy,hitfall))&&p2bodydist x>=115
v=21
value=1
ignorehitpause =1
[State 1, Explod]
type = varset
triggerall = var(21)=0
triggerall = root,numhelper(1005)=0
triggerall = (p2bodydist x>190)
triggerall =  !root,movecontact
triggerall = root,movetype!=H
triggerall = (root,ctrl||(root,stateno=[100,101])||root,stateno=[10,20]) 
trigger1= p2bodydist x-5<= var(0) && enemy,pos y >=0 && var(0)>-1&&  p2bodydist x >75
trigger2= random<125&&((p2statetype!=A||root,p2bodydist y =[-85,-30])&& (enemy,vel y >=0 && !enemy,hitfall))&&p2bodydist x>=115
v=22
value=1
ignorehitpause =1


[State 25, VarSet]
type = VarSet
triggerall = random <249  && p2stateno!=1007
triggerall = p2statetype!=A|| p2movetype=H 
trigger1 = ((enemy,movetype !=A)|| p2bodydist x >65)&& p2statetype!=L  
trigger2 = root,backedgebodydist <10 && p2movetype=A
trigger3 = root,p2bodydist y <0 && p2statetype=A  
trigger4 = (var(12) || var(11)||var(10))  

v = 25   ;fv = 10
value = 1



;---adjust for p2's position
[State 0, VarSet]
type = Varadd
trigger1 = p2statetype=L &&(enemy,anim=5160)
v = 0    ;fv = 10
value = 1
;ignorehitpause = 
;persistent = 
[State 0, VarSet]
type = VarSet
trigger1 =  p2statetype!=L
v = 0    ;fv = 10
value = -1
;ignorehitpause = 
;persistent = 

;0----------removeexplods---
[State 0, VarRangeSet]
type = VarRangeSet
trigger1 = p2movetype!=H 
trigger2 = p2statetype=A
trigger3 = root,movecontact && root,statetype!=A && root,stateno!=226
value = 0 ;fvalue = 0
first = 10
last = 12 ;39
;ignorehitpause = 
;persistent = 



[State 0, RemoveExplod]
type = varset
trigger1 = p2stateno=5901||root,movehit=1
v = 13
value=0
ignorehitpause = 1
;persistent = 
[State 0, Explod]
type = varset
trigger1= root,statetype!=A
v=15
value=0
ignorehitpause =1
[State 0, Explod]
type = varset
trigger1= root,statetype!=A
v=16
value=0
ignorehitpause =1
;200
[State 0, RemoveExplod]
type = varset
trigger1 = (root,numhelper(1005)>0 || root,movetype=H)&& !root,movecontact
trigger2= (p2bodydist x !=[60,119])  && !root,movecontact && p2statetype!=L
trigger3 = var(22)
trigger4= var(21)
v = 20
value=0
;ignorehitpause = 1
;230
[State 0, RemoveExplod]
type = varset
trigger1 = (root,numhelper(1005)>0|| root,movetype=H)&& !root,movecontact
trigger2= (p2bodydist x <120 || p2bodydist x>190) && !root,movecontact&& p2statetype!=L
trigger3 = var(20) 
v=21
value=0
[State 0, RemoveExplod]
type = varset
trigger1 = (root,numhelper(1005)>0|| root,movetype=H)&& !root,movecontact
trigger2= (p2bodydist x <190) && !root,movecontact&& p2statetype!=L
trigger3 = var(20) || var(21)
v=22
value=0
;ignorehitpause = 1
;[State 0, RemoveExplod]
;type = varset
;trigger1 =(root,numprojid(999)>0|| root,movetype=H)&& !root,movecontact
;trigger2= p2bodydist x <160 && !root,movecontact&& p2statetype!=L
;v=22
;value=0
;ignorehitpause = 1
[State 25, VarSet]
type = VarSet
triggerall = root,backedgebodydist >10
trigger1 =  enemy,movetype =A
trigger2 = p2bodydist x <65 &&(p2statetype=L)&& root,p2bodydist y=0
;trigger3 = p2statetype=A && p2movetype!=H&& p2bodydist x <25&& root,var(31)=0
;trigger4 = root,var(31)>0 && p2bodydist x <25 && root,var(31)!=6 
v = 25   ;fv = 10
value = 0


[State 0, VarSet]
type = VarSet
triggerall = p2stateno!=40;&& var(30)
trigger1 =  root,frontedgebodydist <20 && enemy,backedgebodydist <20
trigger2 = p2bodydist x <30 && enemy,backedgebodydist <30 
v = 29    ;fv = 10
value = -1
[State 0, VarSet]
type = VarSet
triggerall = p2stateno!=40 ;&& var(30)
trigger1 =  root,frontedgebodydist >120 && enemy,backedgebodydist <20
trigger2 =  p2bodydist x >70 && enemy,backedgebodydist >30 
trigger3 = root,backedgebodydist <40 &&  p2bodydist x >100 
v = 29    ;fv = 10
value = 1
[State 0, VarSet]
type = VarSet
triggerall = p2stateno!=40;&& var(30)
trigger1 = ( root,frontedgebodydist =[20,120]) && enemy,backedgebodydist <20
trigger2 = ( p2bodydist x =[30,70]) && enemy,backedgebodydist <50 
v = 29    ;fv = 10
value = 0
;-----------
[State 0, VarSet]
type = VarSet
;triggerall = var(30)
trigger1 = root,statetype = A
trigger2 = root,movetype=H && root,stateno!=[120,155]
trigger3= root,prevstateno=40||root,prevstateno=123
trigger4= (p2stateno=[5121,5899])
trigger5 = numhelper(10002)
trigger5 = (root,prevstateno=52 ||root,prevstateno=5120) && p2statetype=A&&!helper(10002),var(30)
trigger6 = numhelper(10002)
trigger6 = p2bodydist x<65 && root,frontedgebodydist >60 && p2statetype!=L&&!helper(10002),var(30)
trigger7 = (var(8)>0) && enemy,hitdefattr!=SC,AT 
trigger8 = var(41)>0 && enemy,hitdefattr!=SC,AT
trigger9= (var(12) || var(11)||var(10))  
trigger10 = numhelper(10002)
trigger10 = ((p2bodydist x=[cond(p2statetype=L||p2statetype=C,50,0),110])) &&enemy,hitdefattr!=SC,AT &&!helper(10002),var(30)
trigger11 = p2movetype=H&&p2stateno=[800,899]
trigger12 = root,stateno=620 
v=30
value = 0

[State 0, VarSet]
type = VarSet
triggerall = root,statetype != A
triggerall = (var(8)<=0) ||enemy,hitdefattr=SC,AT  && root,AIlevel >6
triggerall = numhelper(10002)
triggerall =  cond(root,AIlevel >0,random <ceil(((699)*(fvar(5)/(root,AIlevel*1.0)))),1)||enemy,hitdefattr=SC,AT ||helper(10002),var(30)
triggerall = var(41)=0||enemy,hitdefattr=SC,AT  && root,AIlevel >6||helper(10002),var(30)
triggerall = p2bodydist x>45 || root,frontedgebodydist <60 || root,backedgebodydist <30 ||enemy,hitdefattr=SC,AT  && root,AIlevel >6||helper(10002),var(30)
triggerall = root,var(35)<=0 || helper(10002),var(30)
trigger1= enemy,hitdefattr=SC,AT && (root,ctrl||root,stateno=20||root,stateno=100)
trigger2= (p2stateno =[5110,5120]) && (p2bodydist x =[35,90]) && (root,ctrl||root,stateno=20||root,stateno=100) && random%4<2
trigger3= p2stateno =5120 && root,frontedgedist <60 &&(root,ctrl||root,stateno=20||root,stateno=100)&& random%4>1
trigger4 = ((p2bodydist x=[65,cond(root,numhelper(1010),165,100)])||root,frontedgedist <40)&& (root,ctrl||root,stateno=20) && ((p2stateno =[5110,5120])||root,movetype!=H&& p2bodydist x>95) 
trigger5 =  root,backedgebodydist <30 &&(p2stateno =[5110,5120]) && (root,ctrl||root,stateno=20) && p2bodydist x =[65,90] 
trigger6 = ((p2bodydist x=[cond(p2stateno=5110||p2statetype=C,60,105),cond(root,numhelper(1010),195,165)])||root,frontedgedist <40)&& (root,ctrl||root,stateno=20||root,stateno=100) && (root,movetype!=H ||p2stateno=5110)
trigger7 = numhelper(10002)
trigger7 = helper(10002),var(30)
v = 30   ;fv = 10
value = 1
[State 0, VarSet]
type = Varset;how often should I jump?
trigger1 = time=0
fv = 5   ;fv = 10
value = .9

[State 0, VarSet]
type = Varset
triggerall = var(39)
triggerall=enemy,stateno=[200,699]
trigger1 = root,movetype=H && root,statetype=A && root,stateno!=[120,155]
trigger1 = root,gethitvar(hitshaketime)=1
fv = 5   ;fv = 10
value = fvar(5)*.80

[State 0, VarSet]
type = Varset
triggerall = var(39)
triggerall=enemy,stateno=[1000,1999]
trigger1 = root,movetype=H && root,statetype=A && root,stateno!=[120,155]
trigger1 = root,gethitvar(hitshaketime)=1
fv = 5   ;fv = 10
value = fvar(5)*.70

[State 0, VarAdd]
type = VarAdd
trigger1 = fvar(5)<1.1 && time%240=0
fv = 5    ;fv = 
value = .15*fvar(5)
;ignorehitpause = 
;persistent = 


[State 0, VarSet]
type = Varset
trigger1 =root,statetype=A&& root,movetype!=H
v = 39   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = Varset
trigger1 =root,statetype=A&&root,movetype=H&& root,stateno=[5030,5050]
v =39   ;fv = 10
value = 2
ignorehitpause = 1
[State 0, VarSet]
type = Varset
trigger1 =root,statetype!=A
v = 39  ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarSet]
type = Varset
trigger1 =var(40)=2
v = 41   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = Varset
triggerall =root,AILevel>0
trigger1 =root,movehit
trigger2 = root,var(15)
trigger3= var(42)%(30*root,AIlevel)=0
v = 41   ;fv = 10
value =0
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 =  var(41)=0
v = 42    ;fv = 10
value = 0
[State 0, VarSet]
type = Varadd
trigger1 = var(41)=1
v = 42    ;fv = 10
value = 1


;====================================
;===================================================
;DASH COLLISION NOTIFICATION
[Statedef 13200]
type=A
physics=N
movetype=I
anim = 1
velset=0,0
sprpriority=6

[State 8000, Assert]
type=assertspecial
trigger1= 1
flag=noshadow
ignorehitpause = 1

;[State -2, Explod]; Notification
;type = Explod
;trigger1 = !time
;anim = 13200
;removetime = -2
;;;helpertype = normal
;sprpriority = 1
;id = 13200
;bindtime = -1
;ontop = 1
;ownpal = 1
;ignorehitpause = 1
;pausemovetime = -1
;facing = facing
;scale = 0.5,0.5

;[state 17100,scale FX]
;type = modifyexplod
;trigger1 = numexplod(13200)
;trigger1 = time>=10
;scale = 0.5+0.02*(time-10),0.5+0.02*(time-10)
;id = 13200

[State 8000, End]
type=destroyself
trigger1= time>=40

;------------------------------------------------


;===================================================
; Limit basics comboability
[Statedef 15999]
type    = S
movetype= A
physics = N
anim = 15999
sprpriority = -5

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
trigger1 = numenemy
trigger1 = enemynear, movetype != H || (enemynear, stateno = [120,155]) || enemynear, ctrl
trigger2 = time = 24

;======================================================================
;LAND FX
[Statedef 17100]
type=A
movetype=I
physics=N
anim=1
sprpriority=1
velset=0,0

[state 17100,bind]
type = bindtoparent
trigger1 = !time
pos = -11,0

[state 17100, Landing Effect]
type=explod
triggerall = root,stateno != 902
triggerall = !numexplod(17100)
trigger1=!time
anim=17100
id=17100
pos=0,0
postype=P1
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
sprpriority=-3
ownpal=1
supermovetime=-1

[state 17100, Landing Effect]
type=explod
triggerall = root,stateno = 902
triggerall = !numexplod(17100)
trigger1=!time
anim=17100
id=17100
pos=-50,0
postype=P1
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
sprpriority=-3
ownpal=1
supermovetime=-1

[state 17100]
type=removeexplod
trigger1=time>10

[State 17100]
type=destroyself
trigger1=time>10

;===================================================
;Pulse Effect during fall recovery (taken from Possessed Heita by The_None)
[Statedef 52100]
type    = S
movetype = I
physics = S
sprpriority = 4
anim = 1
ctrl = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,AP,AT

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = cond(root,stateno=5201,ceil(parentdist x/3.0),parentdist x)
y = parentdist y

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = parent,anim

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(1) = parent,animelemno(0)

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time
value = var(0)
elem = var(1)

[State 0, VarSet]
type = VarAdd
trigger1 = time
fvar(0) = 11.2

[State 0, VarSet]
type = VarAdd
trigger1 = time
fvar(1) = 0.015

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1+fvar(1),1+fvar(1)

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, PalFX]
type = PalFX
trigger1 = 1
time = 1
add = floor(0-fvar(0)),floor(0-fvar(0)),floor(0-fvar(0))

[State 0, ]
type = DestroySelf
trigger1 = root,stateno != 5201
trigger1 = root,stateno != 5210

;===============+===========================================
;INTRO6: VICTIM
[Statedef 19231]
type = S
movetype = I
ctrl = 0
anim = 19231 + random%10
velset = 0,0
sprpriority = 0

 


[State 0, camera]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,1
persistent = 1

[State 0, camera]
type = offset
trigger1 = anim = 19239
x = -40
persistent = 1

[State 0, camera]
type = offset
trigger1 = anim = 192390
x = -56
persistent = 1

[State 0, camera]
type = turn
trigger1 = anim = 192390
trigger1 = animelemtime(5) = 0
persistent = 0

[state 19231, death] ;THANOS PT2
type = changeanim
triggerall = anim = 19238 ;MUST BE THANOS
triggerall = root,stateno = 198
trigger1 = root,vel y > 0
value = 192380

[state 19231, death] ;DIO PT2
type = changeanim
triggerall = anim = 19239 ;MUST BE DIO
triggerall = root,stateno = 198
trigger1 = root,vel y > 0
value = 192390

[State 19231, displayover]
type = sprpriority
trigger1 = anim = 19232 ;COPY VEGETA
trigger2 = anim = 19234 ;E.RYU
trigger3 = anim = 19235 ;BLACXKHEART
trigger4 = anim = 19237 ;RAVANGE
trigger5 = anim = 19238 || anim = 192380 ;thanos
value = 1
[State 19231, anim]
type = changeanim
triggerall = root,anim = 1925
trigger1 = root, animelem = 1
value = 1
;[State 19231, anim]
;type = angledraw
;triggerall = root,anim = 1925
;trigger1 = root, animelem = 1
;scale = 2,2

[State 0, Explod]
type = Explod
triggerall = !numexplod(19242)
triggerall = root,anim = 1925
trigger1 = root, animelem = 1
anim =  19242
ID =  19242
pos = -10,24
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 2,2
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
;ignorehitpause =
;trans = 
;persistent =
;supermove = 0
;pausemove = 0

[State 19231, end]
type = removeexplod
triggerall = numexplod(19242)
triggerall = root,anim = 1925
trigger1 = root, animelem = 2
trigger2 = root,stateno != 198
id = 19242


[State 19231, end]
type = destroyself
trigger1 = root,anim = 1925
trigger1 = root, animelem = 2
trigger2 = root,stateno != 198 
;==========================================================
; SUPER BG - Street Fighter 3
[Statedef 19875]
type = S
velset = 0,0
sprpriority = 0
anim = 1
ctrl = 0

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,1

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,2
[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,3

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = time <= 55
flag = noFG

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic

[State 10000, Explod]; White BG
type = Explod
triggerall = !numexplod(19875)
trigger1 = time <= 0
anim = 19877
id = 19875
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 99999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.20,1.20
ignorehitpause = 1
persistent = 0

[State 10000, Explod SF3]
type = Explod
triggerall = !numexplod(10000)
trigger1 = time <= 0
anim = 19875
id = 10000
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = 1.20*0.9,1.20*1.05
ignorehitpause = 1
persistent = 0

[State 10000, pause]
type = Pause
trigger1 = time <= 0
time = 40
movetime = 40

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 44
id = 10000

[State 10000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 55
id = 10500

;==========================================================
; SUPER BG - Super DBZ (Physics)
[Statedef 19885]
type = S
velset = 0,0
sprpriority = 0
anim = 1
ctrl = 0

[State 1000, shake]
type = EnvShake
trigger1 = !(Time%4) && Time<150
Time=4
freq=80
ampl=7

[State 10500, snd]
type = PlaySnd
trigger1 = !Time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noFG
flag2 = nokoslow
ignorehitpause = 1

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic
flag2 = nobardisplay
ignorehitpause = 1

[State 10000, Explod]; White BG
type = Explod
triggerall = !numexplod(19884)
trigger1 = time <= 0
anim = 19884
id = 19884
pos =  160,120
postype = left
sprpriority = -4
facing = 1
bindTime = -1
ownpal = 1
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
scale = 1.20,1.20
ignorehitpause = 1
persistent = 0
removeTime = -2

[State 10000, Explod Krak]
type = Explod
triggerall = !numexplod(19885)
trigger1 = time <= 0
anim = 19885
id = 19885
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindTime = -1
ownpal = 1
removeTime = 9999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
;;helpertype = normal
scale = 1,1
ignorehitpause = 1
persistent = 0

[State 10000, Scale Explod]
type = ModifyExplod
trigger1 = Time>6
scale = 1+.01*Time, 1+.01*Time
id = 19885

[State 10000, RemoveExplod Krak]
type = RemoveExplod
trigger1 = Time = 44
id = 19885

[State 10000, Explod Space BG]
type = Explod
triggerall = !numexplod(19886)
trigger1 = Time = 23
anim = 19886
id = 19886
pos =  160,120
postype = left
sprpriority = -7
facing = 1
bindTime = -1
ownpal = 1
removeTime = 9999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
scale = 1.3,1.3
ignorehitpause = 1
persistent = 0

[State 10000, Explod planet left]
type = Explod
triggerall = !numexplod(19887)
trigger1 = Time = 23
anim = 19887
id = 19887
pos =  0,240
postype = left
sprpriority = -6
facing = 1
ownpal = 1
removeTime = 9999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
scale = 1.2,1.2
ignorehitpause = 1
persistent = 0
;vel = -.2,0
bindTime = -1

[State 10000, Explod planet right]
type = Explod
triggerall = !numexplod(19888)
trigger1 = Time = 23
anim = 19888
id = 19888
pos =  320,240
postype = left
sprpriority = -6
facing = 1
ownpal = 1
removeTime = 9999999999999
pausemoveTime = 99999999999999
supermoveTime = 99999999999999
scale = 1.2,1.2
ignorehitpause = 1
persistent = 0
;vel = .2,0
bindTime = -1

[State 1000, Helper]
type = Helper
triggerall = NumHelper(19890)<80 
triggerall = NumHelper(19891)<80
trigger1 = Time>=23 && Time<70 && !(Time%5)
;helpertype = normal
name = "rocks"
id = 19890
pos = 160,20
postype = left
facing = 1
stateno = 19890
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999

[State 13300, black screen fade]
type = Explod
triggerall = !numexplod(2771)
trigger1 = Time = 60
anim = 19883   ;2771
ID = 2771
postype = left
pos = 0,-50
bindTime = -1
removeTime = 91
pausemoveTime = 91
ontop = 1
scale = 2,3

[State 10000, RemoveExplod Krak]
type = RemoveExplod
triggerall = numexplod(19886)
trigger1 = Time = 150
id = 19886

[State 10000, RemoveExplod Krak]
type = RemoveExplod
triggerall = numexplod(19887)
trigger1 = Time = 150
id = 19887

[State 10000, RemoveExplod Krak]
type = RemoveExplod
triggerall = numexplod(19888)
trigger1 = Time = 150
id = 19888

[State 8020, End]
type = DestroySelf
trigger1 = !(roundstate>2)
trigger2 = Time=150  ;1000

;------------------------------------------------------
;Rocks going up
[Statedef 19890]
type = A
MoveType = I
physics = N
anim = 1

[State 1003, Helper]
type = Helper 
;triggerall = !NumHelper(19892)
trigger1 = !Time
;helpertype = normal
name = "rocks"
id = 19891
pos = ((random%320)),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, Helper]
type = Helper
;triggerall = !NumHelper(19893)
trigger1 = !Time
;helpertype = normal
name = "rocks"
id = 19891
pos = ((random%320)+320),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, Helper]
type = Helper
;triggerall = !NumHelper(19894)
trigger1 = !Time
;helpertype = normal
name = "rocks"
id = 19891
pos = ((random%320)-320),10*(random%13)
postype = left
facing = 1
stateno = 19891
keyctrl = 0
ownpal = 1
supermoveTime = 9999
pausemoveTime = 9999
ignorehitpause = 1
size.xscale = .5
size.yscale = .5

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = Time=2

;-----------------
[Statedef 19891]
type = A
MoveType = I
physics = N
anim = 19890 + random%6
sprpriority = -5

[State 1004, assert]
type = assertspecial
trigger1 = 1
flag = NoShadow

[State 1004, vel]
type = velset
trigger1 = !Time
y = -3-random%7

[State 1004, vel]
type = VarSet
trigger1 = !Time
var(10) = random%2

[State 1004, assert]
type = angledraw
trigger1 = 1
value = cond(var(10)=0,5*Time,-5*Time)

[State 1004, DestroySelf]
type = DestroySelf
trigger1 = Time > 300
trigger2 = pos Y < -340
trigger3 = root,stateno = 180

;==========================================================
; SUPER BG - Super DBZ (Ki attacks)
[Statedef 19892]
type = S
velset = 0,0
sprpriority = 0
anim = 1
ctrl = 0

[State 3001, screen]
type = PosSet
trigger1 = !time
x = 0
y = -ceil(screenpos Y)
ignorehitpause = 1

[State 3001, screen]
type = PosSet
trigger1 = 1
x = 0
ignorehitpause = 1

[State 1000, shake]
type = EnvShake
trigger1 = !(time%4) && time<150
time=4
freq=80
ampl=7

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noFG
flag2 = nokoslow
ignorehitpause = 1

[State 10000, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic
flag2 = nobardisplay
ignorehitpause = 1

[State 10000, Explod]; White BG
type = Explod
triggerall = !numexplod(11111)
trigger1 = !time
anim = 957
id = 11111
pos =  0,-30
postype = left
sprpriority = -7
facing = 1
bindtime = -1
ownpal = 1
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
scale = 2,2

[State 10000, Explod Zwang]
type = Explod
triggerall = !numexplod(19896)
trigger1 = time <= 0
anim = 19896
id = 19896
pos =  160,120
postype = left
sprpriority = -5
facing = 1
bindtime = -1
ownpal = 1
removetime = 9999999999999
pausemovetime = 99999999999999
supermovetime = 99999999999999
ignorehitpause = 1
scale = .9,1.2

[State 10000, Scale Explod]
type = ModifyExplod
trigger1 = time>50
scale = .9+.005*(time-50), 1.2+.005*(time-50)
id = 19896

[State 1003, Helper]
type = Helper
triggerall = !NumHelper(19897)
trigger1 = !time
name = "yellow_BG"
id = 19897
pos = 0,0
postype = left
facing = 1
stateno = 19897
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
persistent = 0

[State 13300, white screen fade]
type = Explod
triggerall = !numexplod(2771)
trigger1 = Time = 60
anim = 19883
ID = 2771
postype = left
pos = 0,-50
bindtime = -1
removetime = 91
pausemovetime = 91
ontop = 1
scale = 2,3
ignorehitpause = 1

[State 10000, RemoveExplod zwang]
type = RemoveExplod
trigger1 = time = 140
id = 19896
[State 10000, RemoveExplod yellow BG]
type = RemoveExplod
trigger1 = time = 140
id = 19897
[State 10000, RemoveExplod white BG]
type = RemoveExplod
trigger1 = time = 140
id = 11111

[State 10000, pause]
type = Pause
trigger1 = !time
time = 20
movetime = 20
ignorehitpause = 1

;--------------------------------------
;Yellow Super BG Helper
[Statedef 19897]
type = S
movetype = I
physics = N
anim = 19897
sprpriority = -6

[State 1004, assert]
type = bindtoparent
trigger1 = 1
pos = 0,120
ignorehitpause = 1

[State 1004, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
flag2 = noFG
ignorehitpause = 1

[State 1004, assert]
type = angledraw
trigger1 = time < 50
value = 10*time
scale = .7,.7
ignorehitpause = 1

[State 1004, assert]
type = angledraw
trigger1 = time >= 50
value = 10*time
scale = .7+.01*(time-50),.7+.01*(time-50)
ignorehitpause = 1

;==========================================================
; SUPER BG - Jojo's Bizarre Adventure
[Statedef 19900]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 1
sprpriority = -21

[State 1211, Exclamation]
type = Explod
triggerall = !numexplod(8001)
trigger1 = time <= 0
anim = 19910
id = 8001
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
triggerall = !numexplod(80010)
trigger1 = time <= 0
anim = 19911
id = 80010
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
triggerall = !numexplod(8002)
trigger1 = time <= 0
anim = 19912
id = 8002
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
triggerall = !numexplod(8003)
trigger1 = time <= 0
anim = 19913
id = 8003
pos = 0,-10
postype = back
sprpriority = -21
bindtime = -1
scale = 0.83333333333333333333333333333333,1.0810810810810810810810810810811
removetime = -1
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1

[State 1211, Exclamation]
type = Explod
triggerall = !numexplod(19900)
trigger1 = time <= 0
anim = 19900
id = 19900
pos = 0,0
postype = back
sprpriority = 5
bindtime = -1
scale = .84, 1.07
supermovetime = -1
pausemovetime = -1
ignorehitpause = 1
persistent = 0
ontop = 1

[State 10500, snd]
type = playsnd
trigger1 = !time
value = 9,0

[state haha]
type = varset
trigger1 = time <= 0
var(3) = 0

[state haha]
type = varadd
trigger1 = time >= 5
trigger1 = var(3) < 220
var(3) = 5

[State that starts the inverted effect]
type           = PalFX
trigger1       = time >= 5
add            = var(3),var(3),var(3)
time           = 1
ignorehitpause = 1

[State 2030, 0]
type = AssertSpecial
Trigger1 = Time < cond(matchover, 120, 50)
flag = nofg
flag2 = nobardisplay
ignorehitpause = 1

[State haha]
type = RemoveExplod
triggerall = numexplod(8001)
trigger1 = Time = cond(matchover, 120, 50)
id = 8001

[State haha]
type = RemoveExplod
triggerall = numexplod(80010)
trigger1 = Time = cond(matchover, 120, 50)
id = 80010

[State haha]
type = RemoveExplod
triggerall = numexplod(8002)
trigger1 = Time = cond(matchover, 120, 50)
id = 8002

[State haha]
type = RemoveExplod
triggerall = numexplod(8003)
trigger1 = Time = cond(matchover, 120, 50)
id = 8003

[State haha]
type = RemoveExplod
triggerall = numexplod(19900)
trigger1 = Time = cond(matchover, 120, 50)
id = 19900

[State ChangeState!]
type = DestroySelf
trigger1 = RoundState = 0

;====================================
; Broken Back - BG Arms + legs
[Statedef 245947]
type = S
movetype = H
physics = N
velset = 0,0
anim = 5947

[State 2260, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
trigger1 = time = 126

;====================================
; RE Broken Back - BG Arms + legs
[Statedef 355947]
type = S
movetype = H
physics = N
velset = 0,0
anim = 5947

[State 2260, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 2260, muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2260, destroy]
type = DestroySelf
trigger1 = time = 19


;========================<EXPLODSIVE BUFFERING HELPER>=============================
;Explod Buffering
[StateDef 90000005]
type = A
physics = N
moveType = I
anim = 1
velSet = 0,0
ctrl = 0

[State 90000005, Turn]
type = Turn
trigger1 = (enemy, NumExplod(94646464) || enemy, NumExplod(92468246)) && !var(0)
trigger2 = !enemy, NumExplod(94646464) && !enemy, NumExplod(92468246) && var(0)
ignoreHitPause = 1

[State 90000005, Reverse Left/Right]
type = VarSet
trigger1 = (enemy, NumExplod(94646464) || enemy, NumExplod(92468246)) && !var(0)
var(0) = 1
ignoreHitPause = 1

[State 90000005, Reset Turn Variable]
type = VarSet
trigger1 = !enemy, NumExplod(94646464) && !enemy, NumExplod(92468246) && var(0)
var(0) = 0
ignoreHitPause = 1

;Guard Check 1
[State 0, VarAdd]
type = VarAdd
trigger1 = NumEnemy
trigger1 = enemynear, StateNo = [130,155]
trigger1 = enemynear, MoveType = H
var(1) = 1
;Guard Check 2
[State 0, VarSet]
type = VarSet
trigger1 = Var(1) >=300
var(2) = 3
 
;Guard window counter
[State 0, VarAdd]
type = VarAdd
triggerall = NumEnemy
triggerall = Var(2) >=1
trigger1 = enemynear, StateNo != [130,155]
var(2) = -1
;no guard
[State 0, VarSet]
type = VarSet
triggerall = NumEnemy
trigger1 = enemynear, StateNo != [130,155]
var(1) = 0

[State 90000005, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
text = "by JustMorphPointman"
ignoreHitPause = 1

;----------------------------