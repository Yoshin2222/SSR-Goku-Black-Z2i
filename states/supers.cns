;===========================================================================
;Shippu Jinrai Kyaku
[Statedef 14000]
type = S
physics = S
movetype = A
anim = 1400
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd = cond(var(54) >0, 0,-1000)
juggle = 4

[State 200, Voice] ;Its over!
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = time = 16
value = 215,1
channel = 0
persistent = 0
ignorehitpause = 0

[State 200, vel]
type = velset
triggerall = anim = 1400
trigger1 = animelemtime(3) = 0
x = 6

[State 240, 1] ;Shippu Kicks
type = PlaySnd
triggerall = anim = 1400
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(8) = 0
trigger3 = animelemtime(14) = 0
trigger4 = animelemtime(21) = 0
trigger5 = animelemtime(30) = 0
value = 0, 4
channel = 1
ignorehitpause = 1

[State 240, 1] ;Spin Kicks
type = PlaySnd
triggerall = anim = 1401
trigger1 = animelem = 3
trigger2 = animelem = 10
trigger3 = animelem = 16
trigger4 = animelem = 23
value = 0, 4
channel = 1

[State 200, super snd]
type = PlaySnd
trigger1 = time <= 0
value = 2000,0
channel = 3

[State 3000, superpause]
type = superpause
trigger1 = time=0
time = 49
p2defmul = 1
unhittable = 1
anim = -1
sound = s2000,0
darken = 0
movetime = 49

[State 2500, bgpalfx1]
type = bgpalfx
trigger1 = time <= 0
time = 51
color=0
mul=0,0,0

[State 0, Super FX]
type = Explod
triggerall = !numexplod(2003)
trigger1 = time = 5
anim = 2003
id = 2003
pos = -110,45    ;-145,52
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 240, 2]
type = HitDef
triggerall = enemynear,alive
triggerall = anim = 1400
trigger1 = animelem = 9
trigger2 = animelem = 15
trigger3 = animelem = 22
attr = S, HA
animtype = Medium
damage = Ceil(cond(fvar(11) * 16 < 7, 7, fvar(11) * 16)), 1
;Ceil(cond(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 0
;35, 0
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 8, 8
guard.pausetime = 6,6
sparkno = s1
guard.sparkno = s1
sparkxy = -20,-75
hitsound   = s5,4
guardsound = S6,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = cond(animelemtime(15) < 0, 2, 0),cond(animelemtime(30) < 0, 0, cond(!enemynear,alive,-4,-13.5) - cond(var(54) > 0, 6,0))   ;-4
ground.cornerpush.veloff = 0
guard.hittime = 9
guard.velocity = 1
air.velocity = 0, cond(animelemtime(30) < 0, -3, -7.1)
airguard.velocity = -2,-1.1
air.animtype = back
fall = cond(animelemtime(30) < 0, 0, cond(enemynear,alive,1,0))
air.fall = 1
fall.recover = 0
getpower= 0,0
givepower = 35,35
yaccel = cond(enemynear,alive,0.5,1)
;id = cond(animelem=4, 1400,(cond(animelem=9,1401,(cond(animelem=15,1402,(cond(animelem=22,1403,(cond(animelem=30,1404,1404)))))))))
;ID = cond(((animelemtime(30) < 0) || (enemynear,stateno = [150,155]) && (enemynear,alive)), 0, 1400)
ID = cond(((animelemtime(30) < 0) || (enemynear,stateno != [150,155]) && (!enemynear,alive)),0, 1400)
forcestand = 1

[State 650, hitspark]
type = Explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(cond(((animelemtime(30) < 0) || (enemynear,stateno != [150,155]) && (!enemynear,alive)),0, 1400))
trigger1 = hitpausetime = cond(movehit, 8,6)
anim = cond(movehit,7020,7000)
pos = -20,-75
postype = p2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ignorehitpause = 1
persistent = 1
sprpriority = 5
ownpal = 1

[State 240, 2]
type = HitDef
triggerall = enemynear,alive
triggerall = anim = 1400
trigger1 = animelem = 4
trigger2 = animelem = 30
attr = S, HA
animtype = Medium
damage = Ceil(cond(fvar(11) * 16 < 7, 7, fvar(11) * 16)), 1
;Ceil(cond(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 0
;35, 0
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 8, 8
guard.pausetime = 6,6
sparkno = s1
guard.sparkno = s1
sparkxy = -20,-75
hitsound   = s5,4
guardsound = S6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = cond(animelemtime(15) < 0, 2, 0),cond(animelemtime(30) < 0, 0, cond(!enemynear,alive,-4,-13.5) - cond(var(54) > 0, 6,0))   ;-4
ground.cornerpush.veloff = 0
guard.hittime = 9
guard.velocity = 1
air.velocity = 0, cond(animelemtime(30) < 0, -3, -7.1)
airguard.velocity = -2,-1.1
air.animtype = back
fall = cond(animelemtime(30) < 0, 0, cond(enemynear,alive,1,0))
air.fall = 1
fall.recover = 0
fall.yvelocity = cond(var(54) = 0, -7.8, -10.2)
fall.xvelocity = 0
getpower= 0,0
givepower = 35,35
yaccel = cond(enemynear,alive,0.5,1)
;id = cond(animelem=4, 1400,(cond(animelem=9,1401,(cond(animelem=15,1402,(cond(animelem=22,1403,(cond(animelem=30,1404,1404)))))))))
;ID = cond(((animelemtime(30) < 0) || (enemynear,stateno = [150,155]) && (enemynear,alive)), 0, 1400)
ID = cond(((animelemtime(30) < 0) || (enemynear,stateno != [150,155]) && (!enemynear,alive)),0, 1400)
forcestand = 1

[State 650, hitspark]
type = Explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(cond(((animelemtime(30) < 0) || (enemynear,stateno != [150,155]) && (!enemynear,alive)),0, 1400))
trigger1 = hitpausetime = cond(movehit, 8,6)
anim = cond(movehit,7020,7000)
pos = -20,-75
postype = p2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ignorehitpause = 1
persistent = 1
sprpriority = 5
ownpal = 1

[State 802, changeanim]
type = targetstate
;triggerall = !enemynear,alive
triggerall = (anim = 1400 && animelem >= 30) || (anim = 1401)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
value = 14001;5950
ignorehitpause = 1
persistent = 1


[State 802, changeanim]
type = targetbind
;triggerall = !enemynear,alive
triggerall = anim = 1400 && animelem = 30
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
time = 1
pos = 30, -20
ignorehitpause = 1
persistent = 0

[State 802, changeanim]
type = changeanim
triggerall = enemynear,alive
triggerall = !WinKO
triggerall = anim = 1400
triggerall = numtarget(1400)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
value = 1401
ignorehitpause = 0
persistent = 0

;SPIN KICKS
;-------------------------------------------------------------------
[State 1400, leave the ground]
type = statetypeset
triggerall = enemynear,alive
triggerall = !WinKO
trigger1 = anim = 1401
;triggerall = numtarget(1400)
;triggerall = cond(numtarget,!(target,IsHelper),0)
;trigger1 = movehit = 1
statetype = A
physics = N
ignorehitpause = 1
persistent = 1

[State 1400, velset] ;Initial speed when leaving the ground
type = velset
triggerall = statetype = A
triggerall = enemynear,alive
triggerall = !WinKO
trigger1 = anim = 1401
;triggerall = numtarget(1400)
;triggerall = cond(numtarget,!(target,IsHelper),0)
;trigger1 = movehit = 1
x = 0
y = cond(var(54) > 0, -15, -13)
ignorehitpause = 1
persistent = 0

[State 1400, grav] ;Gravity pulling you down
type = veladd
triggerall = anim = 1401
trigger1 = vel Y < 2.5 && var(54) = 0
trigger2 = vel Y < 2 && var(54) > 0
y = 0.5
ignorehitpause = 1
persistent = 1

[State 240, 2] ;Spin Kicks
type = HitDef
triggerall = enemynear,alive
triggerall = anim = 1401
trigger1 = animelem = 4
trigger2 = animelem = 11
trigger3 = animelem = 17
trigger4 = animelem = 24
attr = S, HA
animtype = Medium
damage = Ceil(cond(fvar(11) * 10 < 7, 7, fvar(11) * 10)), 0
;Ceil(cond(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 0
;35, 0
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6, 6
guard.pausetime = 6,6
sparkno = s1
guard.sparkno = s1
sparkxy = -20,-75
hitsound   = s5,4
guardsound = S6,0
ground.type = High
ground.slidetime = 11
ground.hittime  = 30
ground.velocity = 2  ;-4
ground.cornerpush.veloff = 0
guard.hittime = 9
guard.velocity = 1
air.velocity = 0, -3.8- cond(var(54) > 0, 0.45,0)
airguard.velocity = -2,-1.1
air.animtype = back
fall.yvelocity = -6.8
fall.xvelocity = 0
fall = 1
air.fall = 1
fall.recover = 0
getpower= 0,0
givepower = 35,35
yaccel = 0.75
id = 1401
kill = 1

[State 650, hitspark]
type = Explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(1401)
trigger1 = movecontact
trigger1 = hitpausetime = 6
anim = cond(movehit,7020,7000)
pos = -20,-75
postype = p2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ignorehitpause = 1
persistent = 1
sprpriority = 5
ownpal = 1

[State 1400, grav] ;control while falling down
type = ctrlset
triggerall = !ctrl
triggerall = anim = 1401
trigger1 = vel y < 0
trigger1 = pos y <= -20
;trigger1 = vel Y < 2.5 && var(54) = 0
;trigger2 = vel Y < 2 && var(54) > 0
value = 1
ignorehitpause = 1
persistent = 1

;-------------------------------------------------------------------
;POSITION ADJUSTMENTS
;-------------------------------------------------------------------
[State 1400, adjust]
type = posadd
triggerall = anim = 1400
trigger1 = animelemtime(3) = 0
x = 16
persistent = 1
ignorehitpause = 1

[State 1400, adjust]
type = posadd
triggerall = anim = 1400
trigger1 = animelemtime(7) = 0
x = 26
persistent = 1
ignorehitpause = 1

[State 1400, adjust]
type = posadd
triggerall = anim = 1400
trigger1 = animelemtime(13) = 0
x = 10
persistent = 1
ignorehitpause = 1
[State 1400, adjust]
type = posadd
triggerall = anim = 1400
trigger1 = animelemtime(20) = 0
x = 28
persistent = 1
ignorehitpause = 1

[State 1400, adjust]
type = posadd
triggerall = anim = 1400
trigger1 = animelemtime(27) = 0
x = 20
persistent = 1
ignorehitpause = 1

;[State 101, ctrl]
;type = ctrlset
;trigger1 = anim = 1401
;value = cond(AILevel > 0 && Var(40) > 0 && numenemy && roundstate = 2 && animelemtime(20),0,1)
;ignorehitpause = 1
;persistent = 1

[State 3000, end]
type = changestate
triggerall = anim = 1400
trigger1 = !animtime
value = 0
ctrl = 1

[State 3000, end]
type = changestate
triggerall = anim = 1401
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 52
ctrl = 1

;===========================================================================
; Shippu Gethit
;===========================================================================
[Statedef 14001]
type = A
physics = N
movetype = H
ctrl = 0
;velset = gethitvar(fall.xvel) * facing, cond(gethitvar(fall.xvel) != 0,gethitvar(fall.xvel), gethitvar(xvel))
velset = 0,0

[state velocity]
type = velset
trigger1 = time < gethitvar(hitshaketime)
;trigger1 = time <= 0
x = 0
y = 0
ignorehitpause = 1
persistent = 1

[state velocity]
type = velset
trigger1 = time >= gethitvar(hitshaketime)
;trigger1 = time <= 0
x = gethitvar(fall.xvel) * facing
y = gethitvar(fall.yvel)
ignorehitpause = 0
persistent = 0

[State 5950, 4]
type = Veladd
trigger1 = 1
y = gethitvar(yaccel)
ignorehitpause = 0

;[State 5950, 4]
;type = NotHitBy
;trigger1 = 1
;value = SCA

[State 5950, 4]
type = ChangeAnim2
trigger1 = time <= 0
value = 1402

[State 1100, ChangeState]
type = SelfState
trigger1 = time >= gethitvar(hitshaketime)
trigger1 = pos Y >= 0 && vel y > 0
value = 5100

;===========================================================================
;KAMEHAMEHA
;State = 2000
;Helper : 2001
;===========================================================================
[Statedef 2000]
type = S
physics = S
movetype = A
anim = 2000
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd = cond(var(54) >0, 0,-1000)

[State 100, removedust]
type = removeexplod
triggerall = numexplod(100)
trigger1 =time = 0
ID = 100

[State 3000, width]
type=width
trigger1= animelemtime(22)<0
value=25,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [0,48]
flag = noBG
flag2 = noFG

[State 3000, nhb]
type = nothitby
trigger1 = animelemtime(22) < 0
time = 1
value = SCA,AA
[State 3000, nhb]
type = hitby
trigger1 = animelemtime(22) >= 0
time = 1
value = SCA,AA

[State 200, 1]
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = time <= 0
value = 2000,105
;volume = 355
channel = 0

[State 200, Kmh charge]
type = PlaySnd
trigger1 = time = 10
trigger2 = time = 30
value = 2000,12
;volume = 355
channel = 1

[State 0, KMH Throw]
type = PlaySnd
trigger1 = anim=2000 && animelem=21
value = 2000,3
channel = 2

[State 0, KMH Throw]
type = PlaySnd
trigger1 = anim=2000 && animelem=21
value = 2000,2
channel = 3

[State 3000, superpause]
type = superpause
trigger1 = time=5
time = 40
p2defmul = 1
unhittable = 1
anim = -1
sound = s2000,0
darken = 0
movetime = 40

[State 0, Super FX]
type = Explod
triggerall = !numexplod(2003)
trigger1 = time = 5
anim = 2003
id = 2003
pos = -139,50    ;-145,52
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Charge Ball FX]
type = Explod
triggerall = !numexplod(2001)
trigger1 = time = 5
anim = 2001
id = 2001
pos = -25,-59   ;-31,-57
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = 43
sprpriority = 5
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Ki Gather FX]
type = Explod
triggerall = !numexplod(2002)
trigger1 = time = 5
anim = 2002
id = 2002
pos = -25,-59   ;-31,-57
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = 43
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 2500, bgpalfx1]
type = bgpalfx
trigger1 = time <= 0
time = 48
color=0
mul=0,0,0

[state 1215, Smoke FX]
type = explod
triggerall = !numexplod(1206)
trigger1 = anim=2000 && animelemtime(21)=0
trigger2 = anim=2100 && animelemtime(1)=0
anim = 1206
id = 1206
pos = -25,3
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1

[state 1215, Flash FX straight]
type = explod
trigger1 = anim=2000 && animelemtime(21)=0
anim = 2005
id = 2005
pos = 0,0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 0
[State 1000, flash effect]
type = removeexplod
triggerall = numtarget(2005)
trigger1 = !animtime
id = 2005
ignorehitpause = 1

[State 3000, Kamehameha]
type = helper
triggerall = numhelper(2001)
triggerall = !numhelper(20010)
trigger1 = anim=2000 && animelem=21
;helpertype = normal
stateno = 2001
ID = 20010
name = "kameha"
postype = p1
pos = 80,-60
ownpal = 1

[State 3000, Kamehameha]
type = helper
triggerall = !numhelper(2001)
trigger1 = anim=2000 && animelem=21
;helpertype = normal
stateno = 2001
ID = 2001
name = "kameha"
postype = p1
pos = 80,-60
ownpal = 1

[State 0, Helper]
type = Helper
trigger1 = anim=2000 && animelem=21
;helpertype = normal ;player
name = "DUST Helper (Blasts)"
ID = 10030
stateno = 1003 
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0


[State 200, Kmh charge]
type = StopSnd
trigger1 = anim=2000 && animelem=21
channel = 1


[State 3000, Idle]
type = statetypeset
trigger1 = animelemtime(34) = 0
movetype = I
ignorehitpause = 1

[State 3000, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
; <<<<< AIR KAMEHAMEHA >>>>>
; State = 20000
; Helper : 20001
;===========================================================================
;AIR KAMEHAMEHA
[Statedef 20000]
type = A
physics = N
movetype = A
anim = 20000
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd = cond(var(54) >0, 0,-1000)

[State 200, 1]
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = time <= 0
value = 2000,105
;volume = 355
channel = 0

[State 200, Kmh charge]
type = PlaySnd
trigger1 = time = 10
trigger2 = time = 30
value = 2000,12
;volume = 355
channel = 1

[State 200, Kmh charge long]
type = PlaySnd
trigger1 = time <= 0
value = 2400,0
channel = 2

[State 0, KMH Throw]
type = PlaySnd
trigger1 = anim=20000 && animelem = 18
value = 2000,3
channel = 2

[State 0, KMH Throw]
type = PlaySnd
trigger1 = anim=20000 && animelem = 18
value = 2000,2
channel = 3

[State 3000, width]
type=width
trigger1= anim=20000 && animelemtime(21)<0
value=25,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [5,45]
flag = noBG
flag2 = noFG

[State 3000, nhb]
type = nothitby
trigger1 = animelemtime(21) < 0
time = 1
value = SCA

[State 3000, nhb]
type = hitby
trigger1 = animelemtime(21) >= 0
time = 1
value = SCA

[State 3000, superpause]
type = superpause
trigger1 = time = 5
time = 40
p2defmul = 1
unhittable = 1
anim = -1
sound = s2000,0
darken = 0
movetime = 40

[State 0, Super FX]
type = Explod
triggerall = !numexplod(2003)
trigger1 = time = 5
anim = 2003
id = 2003
pos = -131,27
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Charge Ball FX]
type = Explod
triggerall = !numexplod(2001)
trigger1 = time = 5
anim = 2001+10000*(var(2)=0)
id = 2001
pos = -17,-78
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = 41
sprpriority = 5
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Ki Gather FX]
type = Explod
triggerall = !numexplod(2002)
trigger1 = time = 5
anim = 2002+10000*(var(2)=0)
id = 2002
pos = -17,-78
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = 41
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 2500, bgpalfx1]
type = bgpalfx
trigger1 = time <= 0
time = 45
color=0
mul=0,0,0

[State 3000, Kamehameha]
type = helper
triggerall = numhelper(20001)
triggerall = !numhelper(200010)
trigger1 = anim=20000 && animelemtime(18)=0
;helpertype = normal
stateno = 20001
ID = 200010
name = "kameha_down"
postype = p1
pos = 40,-60
ownpal = 1

[State 3000, Kamehameha]
type = helper
triggerall = !numhelper(20001)
trigger1 = anim=20000 && animelemtime(18)=0
;helpertype = normal
stateno = 20001
ID = 20001
name = "kameha_down"
postype = p1
pos = 40,-60
ownpal = 1

[state 1215, Flash FX straight]
type = explod
triggerall = !numexplod(2006)
trigger1 = anim=20000 && animelemtime(20)=0
anim = 2006
id = 2006
pos = 0,0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -2
persistent = 1
ignorehitpause = 0

[State 2200, vel]
type = velset
trigger1 = animelemtime(20)=0
x = -1.5
y = -6

[State 2200, sts]
type = statetypeset
trigger1 = animelemtime(20)>0
physics = A

;===========================================================================
;True Nocturne
[Statedef 2050]
type = S
physics = N
movetype = A
anim = 2050
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd = cond(var(54) >0, 0,-1000)
juggle = 0

[state 901, bright flash]
type = PalFx
trigger1 = time = 1
add = 128,128,128
sinadd = -128,-128,-128,32
time = 8

[State 0, Parry sound]
type = PlaySnd
trigger1 = Time = 1
value = S2000,15
volume = 30
channel = -1
ignorehitpause = 1



[State 200,targetstate]
type = varadd
trigger1 = (var(26)&2**5)>0 ;var(48) != 0
var(26) = -2**5
Ignorehitpause = 1
persistent = 0

[State 100, removedust]
type = removeexplod
triggerall = numexplod(100)
trigger1 =time = 0
ID = 100

[State 200, Voice] ;Grunt
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = time = 1
value = 210,1
channel = 0
persistent = 0
ignorehitpause = 0

[State 0, adjust]
type = posadd
trigger1 = animelemtime(3) = 0
x = 16
ignorehitpause = 1

[State 0, adjust]
type = posadd
trigger1 = animelemtime(4) = 0
x = -16
ignorehitpause = 1

[State 0, ReversalDef]
type = ReversalDef
;triggerall = cond(numtarget,!(target,ishelper),0)
trigger1 = animelem = 1;1
reversal.attr = SCA,NA,SA           ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
pausetime = 0,0
sparkno = -1
;sparkxy = 0,0 ;offset
hitsound = -1
p1stateno = 2051
;p2stateno = 2052
;ignorehitpause = 
;persistent = 

[State 2000,Playerpush]
type = playerpush
trigger1 = 1
value = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;True Nocturne assault
[Statedef 2051]
type = S
physics = N
movetype = A
anim = 2051
ctrl = 0
velset = 0,0
sprpriority = 1
juggle = 0



[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 4
time = 5
length = 40
palcolor = 0
;palinvertall = 0
palbright = 255,0,0
;palcontrast = 120,120,220
;palpostbright = 0,0,0
paladd = 255,10,25
;palmul = .65,.65,.75
timegap = 1
framegap = 1
trans = add ;"none","add1","sub"
;ignorehitpause =
;persistent =


[State 0, AfterImageTime]
type = AfterImageTime
trigger1 = Time > 20 && anim != 2052
time = 30


[State 3000, superpause]
type = superpause
trigger1 = time=0
time = 51
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 49

[State 2500, bgpalfx1]
type = bgpalfx
trigger1 = time <= 0
time = 140
color=0
mul=0,0,0


[State 0, Super FX]
type = Explod
triggerall = !numexplod(2003)
trigger1 = time <= 0
anim = 2003
id = 2003
pos = -112,60
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Hyper Charge FX]
type = Explod
triggerall = !numexplod(2440)
trigger1 = time <= 0
anim = 2441
id = 2440
pos = 6,-60
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, invul]
type = nothitby
trigger1 = animelemtime(12) < 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
persistent = 1

[State 0, invul]
type = hitby
trigger1 = animelemtime(12) >= 0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
persistent = 1

[State 0, Helper]
type = Helper
triggerall = !numhelper(2054)
trigger1 = animelemtime(2) = 0
;helpertype = normal ;player
name = "T.N Camera Helper"
ID = 2054
stateno = 2054 
pos = 30,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1;animelemtime(1) >= 0
flag = nobardisplay
persistent = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = anim = 2051
trigger1 = animelemtime(2) <= 0
flag = nomusic
persistent = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = nothitby
trigger1 = 1
value = SCA,AA
persistent = 0
ignorehitpause = 1

[State 0, screenbounmd]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, voice] ;Time of judgement
type = playsnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = time <= 0
value = s215,16
channel = 1
ignorehitpause = 1

[State 0, voice] ;Scream
type = playsnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = time = 150
value = s220,4
channel = 1
ignorehitpause = 1

[State 2000,Playerpush]
type = playerpush
trigger1 = 1
value = 1

[State 3000, superpause]
type = superpause
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = time=0
time = 141
p2defmul = 1
unhittable = 1
anim = -1
sound = -1;s2350,0
darken = 0
movetime = 140

[state shadow anim]
type = changeanim
triggerall = (name != "SSR Goku Black Z2i")
trigger1 = time <= 0
value = anim
elem = 2
persistent = 0

[State 240, 1] ;Mid/Low kick swing snds
type = PlaySnd
triggerall = anim != 2052
trigger1 = animelemtime(2) = 0
value = s0, 4
channel = 2
ignorehitpause = 1

[State 240, 1] ;Mid/Low Punch swing snds
type = PlaySnd
triggerall = anim != 2052
trigger1 = animelemtime(10) = 0
trigger2 = animelemtime(16) = 0
trigger3 = animelemtime(18) = 0
value = s0, 1
channel = 2
ignorehitpause = 1

[State 240, 1] ;High Punch swing snds
type = PlaySnd
triggerall = anim != 2052
trigger1 = animelemtime(16) = 0
trigger2 = animelemtime(22) = 0
value = s0, 3
channel = 2
ignorehitpause = 1

[State 240, 1] ;High Kick swing snds
type = PlaySnd
triggerall = anim != 2052
trigger1 = animelemtime(28) = 0
trigger2 = animelemtime(34) = 0
trigger3 = animelemtime(44) = 0
trigger4 = animelemtime(51) = 0
value = s0, 5
channel = 2
ignorehitpause = 1


[State 2051, vel]
type = velset
triggerall = anim != 2052
trigger1 = animelemtime(15) = 0 
x = 3
[State 2051, vel]
type = velset
triggerall = anim != 2052
trigger1 = animelemtime(38) = 0 
x = 4
;Fly Up
[State 2051, vel]
type = velset
triggerall = anim != 2052
trigger1 = animelemtime(42) = 0 
x = 4
y = -9
[State 2051, vel]
type = veladd
triggerall = anim != 2052
trigger1 = animelemtime(42) >= 0  && animelemtime(52) < 0 
y = 0.4
[State 2051, vel]
type = veladd
triggerall = anim != 2052
trigger1 = animelemtime(52) >= 0  
y = 0.6
x = -0.1
[State 2051, vel]
type = velset
triggerall = anim != 2052
trigger1 = animelemtime(52) = 0 
x = 1
y = -7
[State 2051, vel]
type = velset
triggerall = anim != 2052
trigger1 = animelemtime(23) = 0 
trigger1 = animelemtime(40) = 0 
x = 0

;To aid in far connects
[State 0, adjust]
type = posadd
trigger1 = time <= 0
x = 14
[State 0, adjust]
type = posadd
triggerall = anim != 2052
trigger1 = animelemtime(2) = 0
x = 16
[State 0, adjust]
type = posadd
triggerall = anim != 2052
trigger1 = animelemtime(7) = 0
x = 12
[State 0, adjust]
type = posadd
triggerall = anim != 2052
trigger1 = animelemtime(26) = 0
x = 23
[State 0, adjust]
type = posadd
triggerall = anim != 2052
trigger1 = animelemtime(32) = 0
x = 21
[State 0, adjust]
type = posadd
triggerall = anim != 2052
trigger1 = animelemtime(33) = 0
x = 14
[State 0, adjust]
type = posadd
triggerall = anim != 2052
trigger1 = animelemtime(34) = 0
x = 6



;Mid/low punches
[State 200, 1]
type = HitDef
trigger1 = animelem = 11
trigger2 = animelem = 18
trigger3 = animelem = 21
trigger4 = animelem = 22
attr = S, HA
damage = Ceil(cond(fvar(11) * 15 < 7, 7, fvar(11) * 15)), 0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 2,2;2,2
guard.pausetime = 1,1
sparkno = s7020
guard.sparkno = s1;s7000
sparkxy = -50,-30
hitsound = s5, 1
guardsound = S6,0
ground.type = Low
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -2.3   ;-3
guard.hittime = 1
ground.cornerpush.veloff = 0
guard.velocity = 1
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -0.3,0
air.hittime = 30
air.animtype = back
getpower= 0,0
givepower = 35,35
envshake.time = 10
envshake.ampl = 1
envshake.freq = 40
forcestand = 1
yaccel = cond(enemy,alive,0,1)
P1sprpriority = 0
P2sprpriority = 1
kill = 0
ID = 2051
p2stateno = cond(enemy,statetype = S, 2309,2305)

[State 0, Babidi fix]
type = targetbind
triggerall = Var(12)
triggerall = animelemtime(4) < 0
triggerall = cond(numtarget(stateno), !(target,ishelper),0)
triggerall = PlayerID(Var(12)), pos y < -20
trigger1 = movehit = 1
pos = 20, -14
time = 1

;Mid/low Kick
[State 200, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, HA
damage = Ceil(cond(fvar(11) * 15 < 7, 7, fvar(11) * 15)), 0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 10,10;3,3
guard.pausetime = 1,1
sparkno = s7020
guard.sparkno = s1;s7000
sparkxy = -50,-30
hitsound = s5, 4
guardsound = S6,0
ground.type = Low
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -2.3   ;-3
guard.hittime = 1
ground.cornerpush.veloff = 0
guard.velocity = 1
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -0.3,0
air.hittime = 30
air.animtype = back
getpower= 0,0
givepower = 35,35
forcestand = 1
yaccel = cond(enemynear,alive,0,1)
P1sprpriority = 2
P2sprpriority = 1
envshake.time = 10
envshake.ampl = 2
envshake.freq = 40
ID = 2051
kill = 0
p2stateno = cond(enemynear,statetype = S, 2309,2305)

;High Punches
[State 200, 1]
type = HitDef
trigger1 = animelem = 16
trigger2 = animelem = 17
trigger3 = animelem = 19
trigger4 = animelem = 20
attr = S, HA
damage = Ceil(cond(fvar(11) * 15 < 7, 7, fvar(11) * 15)), 0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,0;3,3;5,5
guard.pausetime = 1,1
sparkno = s7020
guard.sparkno = s1;s7000
sparkxy = -50,-70
hitsound = s5, 2
guardsound = S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -2.3   ;-3
guard.hittime = 1
ground.cornerpush.veloff = 0
guard.velocity = 1
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -0.3,0
air.hittime = 30
air.animtype = up
getpower= 0,0
givepower = 35,35
envshake.time = 10
envshake.ampl = 1
envshake.freq = 40
forcestand = 1
yaccel = cond(enemynear,alive,0,1)
P1sprpriority = 2
P2sprpriority = 1
kill = 0
ID = 2051
p2stateno = cond(enemynear,statetype = S, 2309,2305)

;High Kicks
[State 200, 1]
type = HitDef
trigger1 = animelem = 29
trigger2 = animelem = 35
attr = S, HA
damage = Ceil(cond(fvar(11) * 9 < 7, 7, fvar(11) * 9)), 0
animtype = hard
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 6,6
guard.pausetime = 1,1
sparkno = s7020
guard.sparkno = s1;s7000
sparkxy = -50,-70
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 60
ground.velocity = -2.3   ;-3
guard.hittime = 1
ground.cornerpush.veloff = 0
guard.velocity = 1
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -0.3,0
air.hittime = 30
air.animtype = up
getpower= 0,0
givepower = 35,35
forcestand = 1
envshake.time = 10
envshake.ampl = 2
envshake.freq = 40
P1sprpriority = 2
P2sprpriority = 1
yaccel = cond(enemynear,alive,0,1)
kill = 0
ID = 2051
p2stateno = cond(enemynear,statetype = S, 2309,2305)

;Flip Kick
[State 200, 1]
type = HitDef
trigger1 = animelem = 45
attr = A, HA
damage = Ceil(cond(fvar(11) * 15 < 7, 7, fvar(11) * 15)), 0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 4,4;6,6
guard.pausetime = 1,1
sparkno = s7020
guard.sparkno = s1;s7000
sparkxy = -30,-70
hitsound = s5, 5
guardsound = S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 60
ground.velocity = -2.3,-10   ;-3
guard.hittime = 1
ground.cornerpush.veloff = 0
guard.velocity = 1
airguard.velocity = -2,-1.1
air.type = High	
air.velocity = -1.3,-9.7
air.hittime = 30
air.animtype = back
getpower= 0,0
givepower = 35,35
envshake.time = 10
envshake.ampl = 1
envshake.freq = 40
P2sprpriority = 1
fall = 1
yaccel = cond(enemynear,alive,0.4,1)
ID = 2051
kill = 0

;Flip Kick
[State 200, 1]
type = HitDef
trigger1 = animelem = 52
attr = A, HA
damage = Ceil(cond(fvar(11) * 25 < 27, 27, fvar(11) * 25)), 0
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 30,30;,25
guard.pausetime = 1,1
sparkno = s7020
guard.sparkno = s1;s7000
sparkxy = -30,-70
hitsound = s2720, 0
guardsound = S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -2.3,-10   ;-3
guard.hittime = 1
ground.cornerpush.veloff = 0
guard.velocity = 1
airguard.velocity = -2,-1.1
air.type = trip
air.velocity = -1.3,-14.7
air.hittime = 30
air.animtype = back
getpower= 0,0
givepower = 35,35
envshake.time = 30
envshake.freq = 90
envshake.ampl = 5
yaccel = 0.4
P2sprpriority = 1
fall = 1
ID = 20540


[State 2500, bgpalfx1]
type = bgpalfx
trigger1 = Numtarget(20540) && movehit = 1
time = 1
color=0
mul=0,0,0
ignorehitpause = 1


[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 42
statetype = A  


[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 2052
statetype = S

[State 0, end]
type = changeanim
triggerall = anim != 2052
trigger1 = pos y >= 0 && vel y >0
value = 2052
[State 0, end]
type = velset
trigger1 = anim = 2052
x = 0
y = 0
[State 0, end]
type = posset
trigger1 = anim = 2052
y = 0

[State 200, 1] ;hit ground SND
type = PlaySnd
triggerall = anim = 2052
trigger1 = animelemtime(1) = 0
value = s40,0
channel = 2
persistent = 1

[State 0, end]
type = changestate
triggerall = anim = 2052
trigger1 = !animtime
trigger1 = var(1) := 30 ;Sets it so no extensions can't happen after the super
value = 0
ctrl = 1

;===========================================================================
;Enemy Frozen
[Statedef 2052]
type = U
physics = N
movetype = U
sprpriority = 1


[State 5030, 1]
type = VelAdd
trigger1 = HitShakeOver
y = GetHitVar(yaccel)

[state 0, vel]
type = velset
trigger1 = 1
x = 0
y = 0

[state 0, anim]
type = changeanim
trigger1 = HitShakeOver = 0
value = anim
elem = animelemno(0)

[state 0, HKD]
type = changestate
trigger1 = HitShakeOver
value = 5951

[State 0, ChangeState] ;Stops opponent from freezing if only hit by one part
type = ChangeState
triggerall = stateno != 5951
trigger1 = movehit = 0 && statetype = A 
value = 5040
ctrl = 1

[State 0,ifhelper]
type = destroyself
trigger1 = Ishelper

;---------------------------------------------------------------------------
;P2 Kicked up 
[Statedef 2053]
type = A
movetype = H
physics = N
anim = cond(selfanimexist(5937), 5937,5030)
ctrl = 0
facep2 = 1
velset = -3, -6
juggle = 20

[State 0, screenbounmd]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[state 276, default anim]
type = changeanim
triggerall = anim = 5030
trigger1 = !animtime
value = 5035
[state 276, default anim]
type = changeanim
triggerall = anim = 5035
trigger1 = !animtime
value = 5050

;[State 611, anim]
;type = changeAnim2
;trigger1 = time <= 0
;value =  611
;ignorehitpause = 1

[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.35

[State 0, screenbounmd]
type = screenbound
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 1
movecamera = 1,1

[State 2308, end]
type = changestate;selfstate
trigger1 = pos y >= 0 && vel y > 0
value = 5100


;===========================================================================
;T.N Camera Helper"
[Statedef 2054]
type = A
physics = N
movetype = I
anim = 1
ctrl = 0
velset = root,vel x +0.5,0

[State 0, vel]
type = posset
trigger1 = enemynear,stateno = 2053 ;Flipped up
x = enemynear, pos x

[State 0, screenbounmd]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, end]
type = destroyself
trigger1 = enemynear,stateno = 5100 ;Enemy hit the ground
trigger2 = root,movetype != A
trigger3 = root,stateno != 2051


;-----------------------------
;Rapiddohiru danmaku 
[Statedef 2100]
type = S
movetype = A
physics = N
anim = 2100
ctrl = 0
velset = 0,0
juggle = 0
poweradd = cond(var(54) > 0, -1000,-2000)

[State 1203, exafterimage]
type = helper
triggerall = !numhelper(2103)
trigger1 = animelemtime(10) = 0
;helpertype = normal
name = "Rapiddohiru danmaku afterimage"
id = 2103
stateno = 2103
pos = 0,0
postype = P1

[State 1203, exafterimage]
type = helper
triggerall = !numhelper(2104)
trigger1 = var(54) > 0 ;If Emo is active
trigger1 = animelemtime(14) = 0
;helpertype = normal
name = "Rapiddohiru danmaku afterimage"
id = 2104
stateno = 2103
pos = 0,0
postype = P1

[State 0, Super FX]
type = Explod
triggerall = !numexplod(2003)
triggerall = anim = 2100
trigger1 = time <= 0
trigger1 = 1 || var(26) := var(26) - var(26)&2**3
anim = 2003
id = 2003
pos = -112,60
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Hyper Charge FX]
type = Explod
triggerall = !numexplod(2441)
triggerall = anim = 2100
trigger1 = time <= 0
anim = 2441
id = 2440
pos = 6,-60
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = anim = 2100
trigger1 = animelemtime(3) <= 0
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = nothitby
triggerall = anim = 2100
trigger1 = animelemtime(3) < 0
value = SCA,AA
persistent = 0
ignorehitpause = 1
[State 0, AssertSpecial]
type = hitby
triggerall = anim = 2100
trigger1 = animelemtime(3) >= 0
value = SCA,AA
persistent = 0
ignorehitpause = 1

[State 2000,Playerpush]
type = playerpush
trigger1 = 1
value = 1

[State 620, 3]  ;First Kick
type = HitDef
triggerall = anim = 2100
trigger1 = AnimElemTime(5) = 0
attr = S, HA
damage = cond(var(54) > 0, 2,0)+Ceil(cond(fvar(11) * 59 < 22, 22, fvar(11) * 59)), 1
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = HAF
guardflag = MA
animtype = Hard
priority = 4, Hit
pausetime = 12,12  ;16,16
guard.pausetime = 7,7
sparkno = s1
guard.sparkno = s1
sparkxy = -30,-50
hitsound   = s5,6
guardsound = S6,1
ground.type = High
ground.slidetime = 50
ground.hittime  = 50
ground.velocity = 5,0
air.hittime  = 50
air.velocity = 5,-4
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 1
fall.recover = 0
kill = 0
p2facing = 1
id = 2103
ignorehitpause = 0

[State 650, hitspark]
type = Explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2103)
trigger1 = movecontact
anim = cond(movehit,7030,7000)
pos = -26,-90
postype = p2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

[State 620, 3]  ;Flurry Kicks
type = HitDef
triggerall = anim = 2100
trigger1 = animelemtime(12) = 0
trigger2 = animelemtime(17) = 0
trigger3 = animelemtime(29) = 0
attr = S, HA
damage = cond(var(54) > 0, 1,0)+(Ceil(cond(fvar(11) * 22 < 12, 12, fvar(11) * 22))), 1
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 4, Hit
pausetime = 2,2  ;16,16
guard.pausetime = 2,2
sparkno = s1
guard.sparkno = s1
sparkxy = -30,-50
hitsound   = -1;s5,7
guardsound = -1;S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = cond(animelemtime(34) >= 0,40,10)
ground.velocity = 0.5,0
air.hittime = cond(animelemtime(34) >= 0,40,10)
air.velocity = 0.4,cond(animelemtime(34) >= 0,-7,-2)
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 1
fall.recover = 0
kill = 0
id = 2104
p2facing = 1
ignorehitpause = 0

[State 650, hitspark]
type = Explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2104)
trigger1 = movecontact
anim = cond(movehit,7030,7000)
pos = -40,-50
postype = p2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1


[State 620, 3]  ;Flurry Kicks
type = HitDef
triggerall = anim = 2100
trigger1 = animelemtime(22) = 0
trigger2 = animelemtime(25) = 0
attr = S, HA
damage = cond(var(54) > 0, 1,0)+(Ceil(cond(fvar(11) * 22 < 12, 12, fvar(11) * 22))), 1
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 4, Hit
pausetime = 2,2  ;16,16
guard.pausetime = 2,2
sparkno = s1
guard.sparkno = s1
sparkxy = -30,-50
hitsound   = -1;s5,7
guardsound = -1;S6,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = cond(animelemtime(34) >= 0,40,10)
ground.velocity = 0.5,0
air.hittime = cond(animelemtime(34) >= 0,40,10)
air.velocity = 0.4,cond(animelemtime(34) >= 0,-7,-2)
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 1
fall.recover = 0
kill = 0
id = 2103
p2facing = 1
ignorehitpause = 0

[State 650, hitspark]
type = Explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2105)
trigger1 = movecontact
anim = cond(movehit,7030,7000)
pos = 30,-50
postype = p2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1


[State 620, 3]  ;Flurry Kicks
type = HitDef
triggerall = anim = 2100
trigger1 = AnimElemTime(35) = 0
attr = S, HA
damage = cond(var(54) > 0, 1,0)+(Ceil(cond(fvar(11) * 22 < 12, 12, fvar(11) * 22))), 1
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 4, Hit
pausetime = 2,2  ;16,16
guard.pausetime = 2,2
sparkno = s1
guard.sparkno = s1
sparkxy = -30,-50
hitsound   = -1;s5,7
guardsound = -1;S6,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = cond(animelemtime(34) >= 0,40,10)
ground.velocity = 0.5,0
air.hittime = cond(animelemtime(34) >= 0,40,10)
air.velocity = 0.4,cond(animelemtime(34) >= 0,-7,-2)
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 1
fall.recover = 0
kill = 0
id = 2100
p2facing = 1
ignorehitpause = 0

[State 650, hitspark]
type = Explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2100)
trigger1 = movecontact
anim = cond(movehit,7030,7000)
pos = -40,-50
postype = p2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ignorehitpause = 1
persistent = 0
sprpriority = 5
ownpal = 1

;PLAYER SNDS
;----------------------------------------------------------------
[State 0, kick snds]
type = playsnd
triggerall = anim = 2100
triggerall = cond(numtarget(2103),(!target,ishelper),0)
trigger1 = movecontact && hitpausetime = 1
value = cond(movehit,5,6),cond(movehit,4,1)
channel = 9
ignorehitpause = 1
persistent = 1
loop = 0

[State 0, kick snds]
type = playsnd
triggerall = anim = 2100
triggerall = cond(numtarget(2100),(!target,ishelper),0)
trigger1 = movecontact && hitpausetime = 1
value = cond(movehit,5,6),cond(movehit,4,1)
channel = 9
ignorehitpause = 1
persistent = 1
loop = 0

[State 0, kick snds]
type = playsnd
triggerall = anim = 2100
triggerall = cond(numtarget(2104),(!target,ishelper),0)
trigger1 = movecontact && hitpausetime = 1
value = cond(movehit,5,6),cond(movehit,4,1)
channel = 9
ignorehitpause = 1
persistent = 1
loop = 0

;----------------------------------------------------------------
[State 0, SWING snds]
type = playsnd
triggerall = anim = 2101
trigger1 = animelemtime(7) = 0
trigger2 = animelemtime(14) = 0
channel = 9
value = 0, 52
ignorehitpause = 1
persistent = 1
loop = 0

;----------------------------------------------------------------
;HELPER SNDS
;----------------------------------------------------------------


;----------------------------------------------------------------
[State 0, kick snds]
type = stopsnd
trigger1 = time <= 0
trigger2 = anim = 2101
trigger2 = animelemtime(1) = 0
trigger3 = !animtime
channel = 0
ignorehitpause = 1
persistent = 0

[State 2100, envshake]
type = envshake
triggerall = anim = 2100
triggerall = animelemtime(11) > 0
trigger1 = movehit = 1
time = 7
ampl = 15
freq = 8
phase = 10
ignorehitpause = 0
persistent = 0

[State 620, 3]  ;Slash Up
type = HitDef
triggerall = anim = 2101
trigger1 = AnimElemTime(8) = 0
attr = S, HA
damage = cond(var(54) > 0, 3,0)+(Ceil(cond(fvar(11) * 65 < 30, 30, fvar(11) * 65))), 1
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = HAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 24,24  ;16,16
guard.pausetime = 7,7
sparkno = s1;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-50
hitsound   = s5,9
guardsound = S6,1
ground.type = High
ground.slidetime = 50
ground.hittime  = 50
ground.velocity = -2.7,-17
air.hittime  = 50
air.velocity = -2.7,-15
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.8
fall = 1
air.fall = 1
fall.recover = 0
kill = 1
id = 2101
p2facing = 1

[State 200,Hitsparks]
type = explod
triggerall = cond(numtarget(2101),!(target,IsHelper),0)
trigger1 = movecontact
anim = cond(movehit,7030,7000)
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos =  36,-132
id = 52101
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0
[State 620, 3]  ;Slash Down
type = HitDef
triggerall = anim = 2101
trigger1 = AnimElemTime(15) = 0
attr = S, HA
damage = cond(var(54) > 0, 3,0)+(Ceil(cond(fvar(11) * 30 < 20, 20, fvar(11) * 30))), 1
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = HAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 18,18 ;16,16
guard.pausetime = 7,7
sparkno = s1;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-50
hitsound   = s0,61
guardsound = S6,1
ground.type = High
ground.slidetime = 50
ground.hittime  = 50
ground.velocity = -4,-12
air.hittime  = 50
air.velocity = -4,-12
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
air.fall = 1
fall.recover = 0
kill = 1
id = 2102
p2facing = 1

[State 200,Hitsparks]
type = explod
triggerall = cond(numtarget(2102),!(target,IsHelper),0)
trigger1 = movecontact
anim = cond(movehit,7030,7000)
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos =  36,-132
id = 52102
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 2100, changeanim]
type = changeanim
triggerall = anim = 2100
;triggerall = cond(numtarget(2100), !(target,ishelper),0)
;trigger1 = movehit
triggerall = animelem = 36
trigger1 = command = "x" || command = "holdx"
trigger2 = command = "y" || command = "holdy"
trigger3 = command = "z" || command = "holdz"
value = 2101
ignorehitpause = 0
persistent = 0

[State 2100, envshake]
type = envshake
triggerall = cond(numtarget(2101), !(target,ishelper),0)
trigger1 = movehit
time = 5
ampl = 15
freq = 12
phase = 12
ignorehitpause = 1
persistent = 0

[State 1211, AllPalFX]
type = AllPalFX
triggerall = cond(numtarget(2101), !(target,ishelper),0)
trigger1 = movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 2101, statetypeset]
type = statetypeset
triggerall = anim = 2101
trigger1 = animelemtime(4) = 0
statetype = A
physics = N
ignorehitpause = 1

[State 2100, flip kickvel]
type = velset
triggerall = anim = 2101
trigger1 = animelemtime(5) = 0
x = 4
y = -4

[State 2100, changeanim]
type = changeanim
triggerall = anim = 2101
triggerall = animelemtime(13) = 0
trigger1 = p2bodydist y > 20
value = 2101
elem = 13
ignorehitpause = 0
persistent = 0

[State 2100, take this]
type = playsnd
triggerall = (name = "SSR Goku Black Z2i")
triggerall = anim = 2100
trigger1 = animelemtime(2) = 5
value = 230,4
channel = 0
ignorehitpause = 1


[State 2100, firstkickswingsnd]
type = playsnd
trigger1 = anim = 2100
trigger1 = animelemtime(4) = 0
trigger2 = anim = 2101
trigger2 = animelemtime(6) = 0
value = 0,5
channel = 2
ignorehitpause = 1 

[State 2100, flurrykicks]
type = playsnd
triggerall = anim = 2100
trigger1 = animelemtime(11) = 0
trigger2 = animelemtime(16) = 0
trigger3 = animelemtime(21) = 0
trigger4 = animelemtime(24) = 0
trigger5 = animelemtime(28) = 0
trigger6 = animelemtime(34) = 0
value = 0,4
channel = 1
ignorehitpause = 1 

;HELPER
[State 2100, flurrykicks]
type = playsnd
triggerall = numhelper(2103)
triggerall = helper(2103),anim = 2100
trigger1 = helper(2103),animelemtime(11) = 0
trigger2 = helper(2103),animelemtime(16) = 0
trigger3 = helper(2103),animelemtime(21) = 0
trigger4 = helper(2103),animelemtime(24) = 0
trigger5 = helper(2103),animelemtime(28) = 0
trigger6 = helper(2103),animelemtime(34) = 0
value = 0,4
channel = 1
ignorehitpause = 1 


[State 2100, flurrykicks]
type = playsnd
triggerall = numhelper(2104)
triggerall = helper(2104),anim = 2100
trigger1 = helper(2104),animelemtime(11) = 0
trigger2 = helper(2104),animelemtime(16) = 0
trigger3 = helper(2104),animelemtime(21) = 0
trigger4 = helper(2104),animelemtime(24) = 0
trigger5 = helper(2104),animelemtime(28) = 0
trigger6 = helper(2104),animelemtime(34) = 0
value = 0,4
channel = 1
ignorehitpause = 1 

[State 2100, swinggrab]
type = playsnd
triggerall = anim = 2101
trigger1 = animelemtime(7) = 0
trigger1 = animelemtime(14) = 0
value = 0,52
channel = 1
ignorehitpause = 1

[State 3000, superpause]
type = superpause
triggerall = anim = 2100
trigger1 = time=0
time = 51
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 51

[State 802, TargetState]
type = TargetState
triggerall = anim = 2101
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2102)
trigger1 = movehit
trigger1 = 1 || var(26) := cond((var(26)&2**3) = 0, var(26) + 2**3, var(26))
value = 2101
ignorehitpause = 0
persistent = 0

[State 802, TargetState]
type = velset
triggerall = anim = 2101
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2102)
trigger1 = movecontact
y = -5.9
x = 1.6
ignorehitpause = 1
persistent = 0

[State 802, TargetState]
type = veladd
triggerall = anim = 2101
trigger1 = animelemtime(15) >=0
y = cond((var(26)&2**3) != 0, 0.05, 0.6)
ignorehitpause = 0
persistent = 0


[State 802, TargetState]
type = statetypeset
triggerall = anim = 2101
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2102)
trigger1 = movecontact
statetype = A
physics = A
ignorehitpause = 1
persistent = 0

[State 2100, ctrlset]
type = ctrlset
triggerall = anim = 2101
;trigger1 = animelemtime(14) = 0
trigger1 = enemynear,stateno = 2102 ; Hitting ground
value = 1
ignorehitpause = 1 

[State 2100, stopguard] ;Flurry kicks, whiffed
type = AttackDist
triggerall = anim = 2100 
trigger1 = animelemtime(37) = 0
value = 0

[State 2100, stopguard] ;Flurry kicks, whiffed
type = StateTypeSet
triggerall = anim = 2100 
trigger1 = animelemtime(37) = 0
movetype = I
ignorehitpause = 1

[State 2100, end]
type = changestate
trigger1 = !animtime
value = cond(anim = 2100,0,50)
ctrl = 1

;================================================
;P2 going to the ground from Rapiddohiru danmaku 
[Statedef 2101]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = -1
velset = 0,0
movehitpersist = 1
hitcountpersist = 1
faceP2 = 1

[State 3020, 2]
type = changeanim2
trigger1 = time <= 0 && anim !=651
value = 651

[State 4005, vel Y]
type = velset
trigger1 = 1 ;animelemtime(2)=0
y = 9 ; To fix issues where you'd fall the wrong way
x = -4.4 ;* (enemynear,facing) ; To fix issues where you'd fall the wrong way
ignorehitpause = 1

[State 3052, Land]
type = changestate
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 2102

;---------------------------------------------------------------------------
;P2 bouncing on the ground from Rapiddohiru danmaku 
[Statedef 2102]
type    = L
movetype= H
physics = N
velset = 0,0

[State 2102, slamsnd]
type = playsnd
trigger1 = time <= 0
value = 15000,2
channel = 0

[State 5100, 1]
type = VelSet
trigger1 = time <= 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = time <= 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = time <= 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time <= 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time <= 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = time <= 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = time <= 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = time <= 0
x = 0.5

;[State 5100, 10]
;type = PlaySnd
;trigger1 = Time = 1
;;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;value = f7,2

[State 5100, 5]
type = VelSet
trigger1 = AnimTime = 0
y = -9
x = -2

[State 111, 1]
type = StateTypeSet
trigger1 = AnimTime = 0
physics = A

[State 5100, 12]
type = SelfState
trigger1 = AnimTime = 0
value = 5050

;===========================================================================
;DIVINE RUSH CONFIRM 
[Statedef 2190]
type = S
movetype = A
physics = N
anim = 2190
ctrl = 0
velset = 0,0
poweradd = cond(var(54) > 0, -2000,-3000)
sprpriority = 6

[State 0, helper]
type = helper
triggerall = !numhelper(2190000)
triggerall = enemynear,facing != facing
trigger1 = time <= 0
id = 2190000
stateno = 2190000
postype = P2
pos = -70;cond(p2bodydist x < 78,-ceil(p2bodydist x),-78),0

[State 0, helper]
type = helper
triggerall = !numhelper(2190000)
triggerall = enemynear,facing = facing
trigger1 = time <= 0
id = 2190000
stateno = 2190000
postype = P2
pos = 70;cond(p2bodydist x < 78,ceil(p2bodydist x),78),0

[State 100, removedust]
type = removeexplod
triggerall = numexplod(100)
trigger1 =time = 0
ID = 100

[State 2196, hitadd]
type = envshake
trigger1 = animelemtime(5) > 0 && animelemtime(34) < 0
time = cond(var(54) > 0,15,12)
freq = cond(var(54) > 0,random%150,random%120)
ampl = cond(var(54) > 0,random%-17,random%-9)
phase = cond(var(54) > 0,random%120,random%90)
persistent = 1

[State 2190, dust]
type = explod
triggerall = anim = 2190
triggerall = !numexplod(2188) 
trigger1 = animelemtime(5) > 0
anim = 2188 ;If this var is 0, have solid effects
pos = -17,5
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
scale = cond(var(54) > 0, 1.2,1),cond(var(54) > 0, 1.2,1)
supermovetime = 9999
pausemovetime = 9999
bindtime = -1
removetime = 9999
id = 2188
ontop = 1
[State 2190, dust]
type = removeexplod
triggerall = anim = 2190
trigger1 = animelemtime(32) > 0
id = 2188

[State 2190, aura]
type = explod
triggerall = anim = 2190
triggerall = !numexplod(2189) 
trigger1 = animelemtime(5) > 0
anim = 2189 ;If this var is 0, have solid effects
pos = 4,0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
scale = cond(var(54) > 0, 1.2,1),cond(var(54) > 0, 1.2,1)
supermovetime = 9999
pausemovetime = 9999
bindtime = -1
removetime = 9999
id = 2189
[State 2190, aura]
type = removeexplod
triggerall = anim = 2190
trigger1 = animelemtime(32) > 0
id = 2189


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelemtime(32) < 0
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelemtime(32) < 0
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1


[State 0, AssertSpecial]
type = nothitby
trigger1 = animelemtime(38) < 0
value = SCA,AA,AT
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = hitby
trigger1 = animelemtime(38) >= 0
value = SCA,AA,AP,AT
persistent = 1
ignorehitpause = 1

[State 2000, leave ground]
type = velset
trigger1 = animelemtime(40) = 0
x = 4.3
y = -9.5
[State 2000, fall]
type = velmul
trigger1 = animelemtime(41) >= 0
y = .95
[State 2000, leave ground]
type = statetypeset
trigger1 = animelemtime(40) = 0
statetype = A
physics = A

[State 2000, stop falling]
type = velset
triggerall = animelemtime(43) >= 0
trigger1 = pos y >= 0
y = 0
x = 0
[State 2000, land]
type = changeanim
triggerall = animelemtime(43) >= 0
trigger1 = pos y >= 0
value = 48
[State 2000, land]
type = statetypeset 
triggerall = animelemtime(43) >= 0
trigger1 = pos y >= 0
statetype = S
physics = S

[State 2000, teleport]
type = playerpush
trigger1 = animelemtime(33) < 0
value = 0

[State 2000, teleport]
type = screenbound
trigger1 = 1;animelemtime(31) = 0
value = 0
movecamera = 1,1

[State 2000, teleport]
type = width
trigger1 = animelemtime(31) = 0
value = 0,0

;[State 2000, teleport]
;type = posadd
;trigger1 = animelemtime(32) = 0
;x = 1200;cond(enemynear,vel x < 0 && facing = 1  || enemynear, vel x > 0 && facing = -1,  110 + (p2bodydist x),  90 + (p2bodydist x))
;
;[State 2000, teleport]
;type = width
;trigger1 = animelemtime(38) = 0
;value = 3,1
;
;[State 2000, teleport]
;type = posadd
;trigger1 = animelemtime(33) = 0
;x = ceil(enemynear, pos x + (220 * facing) + cond(enemynear,vel x= 0,0,(20*facing)))

[State 2190, helper pos set]
type = posset
triggerall = numhelper(2190000)
trigger1 = animelemtime(33) = 0
x = helper(2190000),pos x

[State 2000, turn]
type = turn
trigger1 = animelemtime(33) = 0

[State 2000, teleport]
type = width
trigger1 = animelemtime(33) = 0
value = 1,20

[State 2000, teleport]
type = screenbound
trigger1 = animelemtime(31) = 0
value = 0
movecamera = 0,1

[State 2000, teleport]
type = playerpush
trigger1 = animelemtime(33) = 0
value = 1

[State 2000, teleport]
type = screenbound
trigger1 = animelemtime(38) = 0
value = 1
movecamera = 1,1

[State 41, Train]
type = AfterImage
trigger1 = animelemtime(35) <= 8
time= 10
timegap= 1
framegap= 3
length= 10
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelemtime(34) <=0
flag = noBG
flag2 = noFG

[State 620, 3] 
type = HitDef
triggerall = var(54) >= 2
trigger1 = AnimElem = 37
attr = S, HA
damage = Ceil(cond(fvar(11) * 50 < 7, 7, fvar(11) * 50)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 30,30  ;16,16
guard.pausetime = 30,30
sparkno = s1;;s2719 ;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-56
hitsound   = s5,7
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 1
fall.recover = 0
id = cond(WinKO,2191,2190) 
kill = 0

[State 620, 3] 
type = HitDef
triggerall = var(54) < 2
trigger1 = AnimElem = 37
attr = S, HA
damage = Ceil(cond(fvar(11) * 50 < 7, 7, fvar(11) * 50)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 1,1  ;16,16
guard.pausetime = 30,30
sparkno = s1;;s2719 ;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-56
hitsound   = s5,5;s5,7
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 0
ground.velocity = -2,-8
air.velocity = -2,-8
envshake.time = 12
envshake.freq = 2
envshake.ampl = 2
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.1
fall = 0
air.fall = 1
fall.recover = 0
id = cond(WinKO,2191,2190) 
kill = 0
p1sprpriority = 6
p2sprpriority = 3

[State 200,Hitsparks]
type = explod
triggerall = var(54) >= 2
triggerall = numtarget(2190) || numtarget(2191)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movecontact
anim = cond(movehit,2823,7000)
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos =  45,-56
id = 52190
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 802, target]
type = targetstate
triggerall = var(54) >= 2
triggerall = numtarget(2190)
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = enemynear,stateno != 2191
trigger1 = movehit = 1
value = 2191
ignorehitpause = 1

[State 802, changestate]
type = changestate
triggerall = var(54) >= 2
triggerall = numtarget(2190)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
value = 2195
ignorehitpause = 1

[State 802, target]
type = targetstate
triggerall = var(54) < 2
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2190)
triggerall = target,stateno != 2191
trigger1 = movehit = 1
value = 28520 
ignorehitpause = 1

[State 802, changestate]
type = changestate
triggerall = var(54) < 2
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2190)
trigger1 = movehit = 1
value = 28510 
ignorehitpause = 1

[State 3000, superpause]
type = superpause
trigger1 = time=5
time = 113
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 113
[State 251, voice] ;AHHHHHH
type = playsnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = var(54) < 3
trigger1 = time <= 0
trigger2 = var(54) = 3
trigger2 = animelemtime(5) > 0
;trigger1 = animelemtime(6) = 0
value = 215,222+cond(var(54) = 3,1,0)
channel = 1
volumescale = 455
persistent = 0

[State 251, earthwuake snd]
type = playsnd
trigger1 = time <= 0
value = 215,224
channel = 0

[State 251, teleport snd]
type = playsnd
trigger1 = animelemtime(32) = 0
trigger2 = animelemtime(33) = 0
value = 2302,0
channel = 0
[State 4500, 2];Charge sound
type = PlaySnd
trigger1 = animelemtime(6)=0
value = 8,0
loop = 1
pan = 1
;volume = 25
channel = 2
[State 4500, 2];Charge sound
type = PlaySnd
trigger1 = animelemtime(6)=0
value = 8,0
loop = 1
pan = 1
;volume = 25
channel = 2
[State 4500, 2];Stomp sound
type = StopSnd
trigger1 = animelemtime(32)=0
channel = 2

[State 1000, shake]
type = EnvShake
triggerall = animelemtime(5)>=0
trigger1 = !(time%4)
time=4
freq=80
ampl=1+0.02*time

[State 2100, stopguard] ;whiffed/guarded
type = AttackDist
trigger1 = animelemtime(41) = 0
value = 0

[State 2100, stopguard] 
type = StateTypeSet
trigger1 = animelemtime(41) = 0 ;whiffed/guarded
movetype = I
ignorehitpause = 1

[State 2000, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Teleport helper
[Statedef 2190000]
type = A
movetype = I
physics = N
anim = 1
ctrl = 0

[State 2000, teleport]
type = screenbound
trigger1 = root,animelemtime(32) < 0
value = 0
movecamera = 0,0

[State 2000, teleport]
type = posset ; Tweaks the camera
trigger1 = 1
y = root, pos y

[State 2000, teleport]
type = screenbound
trigger1 = root,animelemtime(32) >= 0
value = 1
movecamera = 1,0

[State 0, end]
type = destroyself
trigger1 = root,stateno != 2190

;===========================================================================
;D.R LVL1 P1 One
[Statedef 28510]
type = S
movetype = A
physics = N
anim = 28510
ctrl = 0
velset = 2,-8
sprpriority = 6

[State 2204, qanim]
type = angledraw
trigger1 = 1
scale = fvar(12),fvar(12)

[state 0,bind]
type = null;targetbind
trigger1 = time <= 0
;trigger1 = enemynear,stateno = 2191
pos = 40,0
time = 1
ignorehitpause = 1
persistent = 0

[State 2196, hitadd]
type = envshake
trigger1 =  time <= 0
time = 5
freq = 22
ampl = -54
phase = 10
ignorehitpause = 1
persistent = 1

[State 0, vel]
type = screenbound
trigger1 = vel x != 0
value = 0
movecamera = 0,0

[State 0, vel]
type = screenbound
trigger1 = vel x = 0
value = 0
movecamera = 1,0

[State 115, stop Sound]
type = PlaySnd
trigger1 = enemynear,anim = 10 
trigger1 = enemynear,vel x < 0 
value = 5,8
persistent = 0

[State 620, 3] 
type = HitDef
trigger1 = AnimElem = 10
attr = S, HA
damage = Ceil(cond(fvar(11) * 50 < 7, 7, fvar(11) * 50)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 9,9  ;16,16
guard.pausetime = 30,30
sparkno = s1;;s2719 ;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-56
hitsound   = s5,6
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 0
ground.velocity = -2,-8
air.velocity = -3,-10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0
fall = 0
air.fall = 1
fall.recover = 0
id = 28510
kill = 0
p1sprpriority = 6
p2sprpriority = 3

[State 802, target]
type = targetstate
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28510)
;triggerall = target,stateno != 2191
trigger1 = movehit = 1
value = 28521
ignorehitpause = 1

[state 0, falling]
type = veladd
trigger1 = animelemtime(2) >= 0
y = 0.29;0.36
x = 0.025

[state 0, falling]
type = veladd
;trigger1 = animelemtime(11) >= 0
trigger1 = time >= 44
y = 0.45

[State 2198, posset]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 28511

;===========================================================================
;D.R LVL1 P1 Two
[Statedef 28511]
type = S
movetype = A
physics = N
anim = 28511
ctrl = 0
velset = 0,0
sprpriority = 6

[State 0, posset]
type = posset
trigger1 = time <= 0
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 190
;flag = noshadow
flag = nomusic
persistent = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 190
;flag = noBG
;flag2 = noFG
flag = nobardisplay
persistent = 1
ignorehitpause = 1

[state 0, darken]
type = allpalfx
trigger1 = time < 190
add	= ceil(0-2.9*time),ceil(0-2.9*time),ceil(0-2.9*time)
mul	= 256,256,256
invertall = 0
color = 256
time = 1

[State 200, 1] ;Sword SND
type = PlaySnd
triggerall = anim != 28512
trigger1 = animelemtime(6) = 0
value = 0, 61
channel = 0
volumescale = 200

[State 200, 1] ;charge
type = PlaySnd
triggerall = anim != 28512
trigger1 = animelemtime(6) = 0
value = 30500,1
channel = 1
loop = 1
pan = 1
volumescale = 200

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time >= 190
flag = noshadow
flag2 = nomusic
persistent = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time  >= 90
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[state 0, darken]
type = allpalfx
trigger1 = time  >= 90
add	= ceil(-456+1.7*time),ceil(-456+1.7*time),ceil(-456+1.7*time)
mul	= 256,256,256
invertall = 0
color = 256
time = 1

[State 0, changeanim]
type = changeanim
triggerall = anim != 28512
trigger1 = time  >= 90
value = 28512

[State 0, vel]
type = velset
trigger1 = time  >= 90
x = -0.05

[State 0, vel]
type = posadd
trigger1 = time  >= 90
y = -10
persistent = 0

[state 0 loopvar];setting it here to use for later
type = varset
trigger1 = time <= 0
var(11) = 0
persistent = 0

[State 0, vel]
type = changestate
trigger1 = time  >= 170
value = 28512

;===========================================================================
;D.R LVL1 P1 Three
[Statedef 28512]
type = S
movetype = A
physics = N
anim = 28513
ctrl = 0
velset = 1,0
sprpriority = 6
juggle = 0

[state 0, stopsndloop]
type = stopsnd
trigger1 = time <= 0
channel = 1

[State 0, push]
type = width
trigger1 = 1
value = 170,50

[state 0 0,1]
type = varadd
trigger1 = time <= 0
var(11) = 1
persistent = 0

[State 2204, qanim]
type = angledraw
trigger1 = 1
scale = fvar(12),fvar(12)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[state 0, animloop]
type = changeanim
trigger1 = time <= 0
trigger1 = prevstateno = stateno
value = anim
elem = 3 

[State 620, 3] 
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage = Ceil(cond(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 1,1;1,1  ;16,16
guard.pausetime = 30,30
sparkno = s1;;s2719 ;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-56
hitsound   = s0,61
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 10
ground.velocity = 0.2,0
air.velocity = 0.2,0
envshake.time = 12
envshake.freq = 22
envshake.ampl = 32
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0
fall = 0
air.fall = 0
fall.recover = 0
id = 28513
kill = 0

[State 620, 3] 
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
damage = Ceil(cond(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 1,1  ;16,16
guard.pausetime = 30,30
sparkno = s1;;s2719 ;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-56
hitsound   = s0,61
guardsound = S6,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 10
ground.velocity = 0.2,0
air.velocity = 0.2,0
envshake.time = 12
envshake.freq = 22
envshake.ampl = 32
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0
fall = 0
air.fall = 0
fall.recover = 0
id = 28514
kill = 0

[state 0,bind]
type = targetbind
trigger1 = time <= 0
trigger1 = prevstateno != stateno
;trigger1 = enemynear,stateno = 2191
pos = 70,-20
time = 1
ignorehitpause = 1
persistent = 0

[state 0,bind]
type = targetbind
trigger1 = time <= 0
trigger1 = prevstateno = stateno
;trigger1 = enemynear,stateno = 2191
pos = 70,0
time = 1
ignorehitpause = 1
persistent = 0


[State 802, target]
type = targetstate
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28513) || numtarget(28514)
;triggerall = target,stateno != 2191
trigger1 = movehit
value = 28522
ignorehitpause = 1

[State 200,Hitsparks]
type = explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28513)
trigger1 = movecontact
anim = cond(movehit,285111,7000)
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos =  58,-66
id = 50220
removetime = -2
ontop = 1
scale = 1,0.5
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 200,Hitsparks]
type = explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28514)
trigger1 = movecontact
anim = cond(movehit,285111,7000)
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos =  28,-26
id = 50220
removetime = -2
ontop = 1
scale = 1,0.5
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[state 0, change]
type = changestate
;triggerall = var(11) <= 12
trigger1 = !animtime
value = stateno + cond(var(11) < 12,0,1)

[state 0, change]
type = null;changestate
triggerall = var(11) > 12
trigger1 = !animtime
value = stateno + 1

;===========================================================================
;D.R LVL1 P1 Four
[Statedef 28513]
type = S
movetype = A
physics = N
anim = 28514
ctrl = 0
velset = 0,0
sprpriority = 6
juggle = 0

[state 9, 2]
type = null
trigger1 = 1
x = 3

[state 9, ADJUST]
type = posadd
trigger1 = time <= 0
x = -12

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[state 9, whiff sound]
type = playsnd
trigger1 = anim = 28514
trigger1 = animelemtime(2) = 0
value = 0,1

[state 9, blast sound]
type = playsnd
trigger1 = anim = 28514
trigger1 = animelemtime(6) = 0
value = 0,73

[state 0, blastback]
type = velset
triggerall = !hitpausetime
trigger1 = animelemtime(6) >=0
x = -15

[state 0, blast fx]
type = explod
triggerall = !numexplod(28517)
trigger1 = AnimElem = 6
id = 28517
anim = 28517
pos = 43,-60
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
removetime = -2
bindtime = -1
sprpriority = 5

[State 620, 3] 
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
damage = Ceil(cond(fvar(11) * 50 < 7, 7, fvar(11) * 50)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 1,1  ;16,16
guard.pausetime = 30,30
sparkno = s1;;s2719 ;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-56
hitsound   = s0,3333
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 10
ground.velocity = 0,0
air.velocity = 1,-0.3
envshake.time = 12
envshake.freq = 60
envshake.ampl = 32
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.4
fall = 0
air.fall = 0
fall.recover = 0
id = 28513
kill = 0

[state 0, camera]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 0

[State 802, target]
type = targetstate
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28513) 
;triggerall = target,stateno != 2191
trigger1 = movehit
value = 28523
ignorehitpause = 1

[state 3250, speedlines]
type = explod
triggerall = !numexplod(2923)
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28513) 
;triggerall = target,stateno != 2191
trigger1 = movehit
anim = 2923;+(root,facing=1)
postype = back
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 0,20
bindtime = -1
id = 2923
;supermove = 0
pausemovetime = 70
sprpriority = 1
ontop = 0
ownpal = 1
;facing = 1
ignorehitpause = 1
;loop = 1
removetime = -1

[state 3250, speedlines2]
type = explod
triggerall = !numexplod(2924)
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28513) 
;triggerall = target,stateno != 2191
trigger1 = movehit
anim = 2923;+(root,facing=1)
postype = back
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 0,240
bindtime = -1
id = 2924
;supermove = 0
pausemovetime = 70
sprpriority = 1
ontop = 0
ownpal = 1
;facing = 1
ignorehitpause = 1
;loop = 1
removetime = -1

[state 0, end]
type = changestate
trigger1 = animelemtime(6) >=0
trigger1 = time = 120
value = 28514

;===========================================================================
;D.R LVL1 P1 Five
[Statedef 28514]
type = A
movetype = A
physics = N
anim = 28515
ctrl = 0
velset = 0,0
sprpriority = 6
juggle = 0

[state 9, 2]
type = null
trigger1 = 1
x = 3

[State 0, push]
type = width
trigger1 = 1
value = 0,50

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[state 9, snd]
type = playsnd
trigger1 = animelemtime(3) = 0
value = 0,71
channel = 0
volumescale = 150
[state 0,pos]
type =screenbound;velset
trigger1 = 1
value = 1
movecamera = 0,0

[state 9, 2]
type = turn
triggerall = time <=0
trigger1 = facing != enemynear,facing

[state 0,pos]
type = posset
trigger1 = time <=0
x = enemynear,pos x - (160*enemynear,facing)
persistent = 0

[state 0,pos]
type = null;posset
trigger1 = screenpos x >= (gamewidth/2)
x = floor((gamewidth/2))
persistent = 1

[state 0,pos]
type = null;velset
trigger1 = screenpos x >= (gamewidth/2)
x = 0

[state 0,pos]
type = velset
trigger1 = time <=0
x = 7

[State 620, 3] 
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
damage = Ceil(cond(fvar(11) * 50 < 7, 7, fvar(11) * 50)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 1,1  ;16,16
guard.pausetime = 30,30
sparkno = s1;;s2719 ;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-56
hitsound   = s0,61
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 10
ground.velocity = 0,0
air.velocity = cond(enemynear,life <=7,0,0),cond(enemynear,life <=7,0,0)
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0
fall = 0
air.fall = 0
fall.recover = 0
id = 28516
kill = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[state 0,pos]
type = posset
trigger1 = movehit
x = enemynear,pos x + (90*facing)
persistent = 0

[state 0,pos]
type = velset
trigger1 = movehit
x = 1.3;2

[State 802, target]
type = targetstate
triggerall = enemynear,stateno != 28524
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28516)
;triggerall = target,stateno != 2191
trigger1 = movehit
value = 28524
ignorehitpause = 1

[State 200,Hitsparks]
type = explod
triggerall = !numexplod(285111)
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28516)
trigger1 = movecontact
anim = 285111
postype = P2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos =  0,-47
id = 285111
removetime = -2
scale = 6,1
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 200,Hitsparks]
type = explod
triggerall = !numexplod(2515)
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28516)
trigger1 = movecontact
anim = 2515
postype = P2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
;pos =  58,-66
id = 2515
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 191, overlay FX]
type = explod
triggerall = !numexplod(1961)
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(28516)
trigger1 = movecontact
anim = 1961
id = 1961
pos = 7,130;-54
scale = 20,20
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ownpal = 1
trans = addalpha
alpha = 256-time,256
bindtime= 1
removetime = -1;60
sprpriority = 1
ontop = 0

[state -,1]
type = modifyexplod
trigger1 = numexplod(1961)
id = 1961
trans = addalpha
alpha = ceil(356-(time*4)),256

[state -,1]
type = modifyexplod
trigger1 = numexplod(2923)
id = 2923
trans = addalpha
alpha = ceil(356-(time*4)),256
[state -,1]
type = modifyexplod
trigger1 = numexplod(2924)
id = 2924
trans = addalpha
alpha = ceil(356-(time*4)),256


[state 0, palfx]
type = palfx
trigger1 = 1
add = -256,-256,-256
time = 1

[state 3250, speedlines2]
type = Removeexplod
triggerall = numexplod(2923)
trigger1 = time >= 80
id = 2923
ignorehitpause = 1

[state 3250, speedlines2]
type = Removeexplod
triggerall = numexplod(2924)
trigger1 = time >= 80
id = 2924
ignorehitpause = 1

[state 0,pos]
type = changestate
trigger1 = time >= 80
value = stateno + cond(!enemynear,alive,2,1)

;===========================================================================
;D.R LVL1 P1 Six
[Statedef 28515]
type = S
movetype = A
physics = N
anim = 28516
ctrl = 0
velset = 0,0
sprpriority = 6
juggle = 0

[State 0, posadd]
type = posadd
trigger1 = animelemtime(1) = 0
x = -13

[State 0, posadd]
type = posadd
trigger1 = animelemtime(2) = 0
x = -30

[State 0, posadd]
type = posadd
trigger1 = animelemtime(3) = 0
x = -16

[State 0, posadd]
type = posadd
trigger1 = animelemtime(4) = 0
x = -11

[state 9, 2]
type = null
trigger1 = 1
x = 3

[state 0, palfx]
type = palfx
trigger1 = time <= 0
add = 256,256,256
time = 1

[State 0, scale up]
type = modifyexplod
trigger1 = numexplod(1961)
id = 1961
scale = 20,20
pos = 7,300
bindtime = 0
postype = P1
trans = addalpha
alpha = ceil(256-(time*8)),ceil(0+(time*8))
sprpriority = 22
persistent = 1

[state 9, 2]
type = turn
trigger1 = time <= 0

[state 9, 2]
type = posset
trigger1 = time <= 0
y = 0

[state 0, explod]
type = removeexplod
trigger1 = numexplod(1961)
trigger1 = !animtime
id = 1961

[state 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Prevent freezing
[Statedef 28516]
type = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
sprpriority = 6
juggle = 0

[state 9, 2]
type = varadd
trigger1 = (var(26)&2**19) = 0
var(26) = 2**19

[state 9, 2]
type = changeanim
trigger1 = 1
value = 28515
elem = 8

[state 0, palfx]
type = palfx
trigger1 = time <= 0
add = 256,256,256
time = 1

[State 0, scale up]
type = modifyexplod
trigger1 = numexplod(1961)
id = 1961
scale = 20,20
pos = 7,300
bindtime = 0
postype = P1
trans = addalpha
alpha = ceil(256-(time*8)),256
sprpriority = 22
persistent = 1

[state 9, 2]
type = posset
trigger1 = time <= 0
y = 0

[state 0, explod]
type = removeexplod
trigger1 = numexplod(1961)
trigger1 = !animtime
id = 1961

[state 181, 1]
type = assertspecial
trigger1 = time < 10
flag = roundnotover

[State 444, 0]
type = selfstate
trigger1 = time >=40
value = 180

;===========================================================================
;D.R LVL1 P1 Winpose
[Statedef 28517]
type = S
movetype = I
physics = N
ctrl = 1
velset = 0,0
sprpriority = 6
juggle = 0

[state 9, 2]
type = changeanim
triggerall = anim != 285161
trigger1 = prevstateno != stateno
value = 285161

[state 9, 2]
type = changeanim
trigger1 = prevstateno = stateno
value = 285161
elem = 11

[state 9, slash snd]
type = playsnd
triggerall = prevstateno != stateno
trigger1 = animelem = 8
value = 0,52

[state 9, slash snd]
type = playsnd
triggerall = prevstateno != stateno
trigger1 = animelem = 8
value = 0,53

[state 9, slash snd]
type = playsnd
triggerall = prevstateno != stateno
trigger1 = animelem = 1
value = 300,0

[state 9, 2]
type = velset
trigger1 = time <= 0
x = -4

[state 9, 2]
type = velmul
trigger1 =1
x = 0.5

[state 9, 2]
type = posset
trigger1 = time <= 0
y = 0

[state 181, 1]
type = assertspecial
trigger1 = time < 100
flag = roundnotover
;===========================================================================
;D.R LVL1 P2 One
[Statedef 28520]
type = A
movetype = H
physics = N
ctrl = 0
;velset = gethitvar(xvel) * facing, gethitvar(yvel)
facep2 = 1
sprpriority = 4

[state 0, anim]
type = posset
triggerall = enemynear,statetype != A
trigger1 = !hitshakeover
x = enemynear,pos x + (49*enemynear,facing)
y = enemynear,pos y - 20

[State 1556, Velocity]
type = Velset
trigger1 = hitshakeover
;trigger1 = Time <= 0
x = gethitvar(xvel) * facing
y = gethitvar(yvel)
persistent = 0

[state 0, falling]
type = veladd
trigger1 = hitshakeover
y = 0.25

[state 0, screen]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 0

[state 0, anim]
type = changeanim2
triggerall = enemynear,statetype != A
trigger1 = !hitshakeover
;trigger1 = time <= 0
value = 28520

[state 0, anim]
type = changeanim2
trigger1 = anim = 28520
trigger1 = !animtime
trigger2 = time <= 0
trigger2 = enemynear,statetype = A
value = 28521

[State 2204, qanim]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12)

;===========================================================================
;D.R LVL1 P2 Two
[Statedef 28521]
type = A
movetype = H
physics = N
ctrl = 0
;velset = gethitvar(xvel) * facing, gethitvar(yvel)
facep2 = 1
sprpriority = 4

[State 1556, Velocity]
type = Velset
trigger1 = hitshakeover
;trigger1 = Time <= 0
x = gethitvar(xvel) * facing
y = gethitvar(yvel)
persistent = 0

[state 0, falling]
type = veladd
trigger1 = hitshakeover
y = 0.25

[state 0, screen]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 0

[state 0, anim]
type = changeanim2
trigger1 = time <= 0
value = 28521

[State 2204, qanim]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12)

;===========================================================================
;D.R LVL1 P2 Three
[Statedef 28522]
type = A;S
movetype = H
physics = N
ctrl = 0
;velset = gethitvar(xvel) * facing, gethitvar(yvel)
facep2 = 1
sprpriority = 4

[state 0, hit]
type = hitby
trigger1 = 1
value = SCA,AA

[State 0, push]
type = width
trigger1 = 1
value = 60,50

[State 1556, Velocity]
type = Velset
triggerall = enemynear,anim = 28513
trigger1 = hitshakeover
;trigger1 = Time <= 0
x = gethitvar(xvel) * facing
y = gethitvar(yvel)
persistent = 0

[State 1556, Velocity]
type = Velset
triggerall = enemynear,anim != 28513
trigger1 = hitshakeover
;trigger1 = Time <= 0
x = 0
y = 0
persistent = 0

[State 5020, 1] 
type = ChangeAnim2
trigger1 = GetHitVar(groundtype) = 2 ;LOW ONLY
value = 5012

[State 5020, 1] 
type = ChangeAnim2
trigger1 = GetHitVar(groundtype) = 1 ;HIGH ONLY
value = 5002

[state 0, screen]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 0

[State 2204, qanim]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12)

;===========================================================================
;D.R LVL1 P2 Four
[Statedef 28523]
type = A;S
movetype = H
physics = N
ctrl = 0
;velset = gethitvar(xvel) * facing, gethitvar(yvel)
facep2 = 0
sprpriority = 4

[state 0, anim]
type = changeanim2
triggerall = time <= 0
trigger1 = anim != 28524
value = 28524
[state 0,pos]
type =screenbound;velset
trigger1 = 1
value = 1
movecamera = 0,0

[State 1556, Velocity]
type = Velset
trigger1 = hitshakeover
;trigger1 = Time <= 0
x = gethitvar(xvel) * facing
y = gethitvar(yvel)
persistent = 0

[State 2204, qanim]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12)

;==========


;===========================================================================
;D.R LVL1 P2 Five
[Statedef 28524]
type = A;S
movetype = H
physics = N
ctrl = 0
;velset = gethitvar(xvel) * facing, gethitvar(yvel)
facep2 = 0
sprpriority = 4

[State 0, posadd]
type = posadd
trigger1 = time <= 0
x = -173

[state 0,pos]
type = null;posset
trigger1 = screenpos x <= (gamewidth/2)-(40*facing)
x = floor((gamewidth/2))-(40*facing)
persistent = 1

[state 0,pos]
type = null;velset
trigger1 = screenpos x <= (gamewidth/2)-(40*facing)
x = 0

[state 0,pos]
type =screenbound;velset
trigger1 = 1
value = 1
movecamera = 0,0


[state 0, anim]
type = changeanim2
triggerall = selfanimexist(5937)
trigger1 = enemynear,stateno = 28514
;trigger1 = anim != 28522
;value = 28522
;Satan looks weird af with his anim, so had to make an exception for him
value = cond(name != "Shin Satan Z2",28522,285221)

[state 0, anim]
type = changeanim2
triggerall = !selfanimexist(5937)
trigger1 = enemynear,stateno = 28514
value = 285221

[state 0, anim]
type = changeanim2
triggerall = time <= 0
trigger1 = anim != 28524
value = 28524

[state 0, anim]
type = changeanim2
triggerall = anim = 28524
trigger1 = animelem = 3
value = 28524
elem = 3

[state 0, anim]
type = turn
trigger1 = time <= 0
persistent = 0 

[State 1556, Velocity]
type = Veladd
trigger1 = enemynear,stateno != 28514
;trigger1 = Time <= 0
y = const(movement.yaccel)
persistent = 1

[state 0, palfx]
type = palfx
trigger1 = enemynear,stateno != [28515,28517]
add = -256,-256,-256
time = 1

[State 2204, qanim]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12)

[State 9011, ChangeState]
type = ChangeState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = cond(alive, 5952, 28525)

;===========================================================================
;D.R LVL1 P2 dead
[Statedef 28525]
type = A;S
movetype = H
physics = N
ctrl = 0
;velset = gethitvar(xvel) * facing, gethitvar(yvel)
facep2 = 0
sprpriority = 4

[state 0, pos]
type = velset
trigger1 = time <= 0
y = 0
x =0
[state 0, pos]
type = posset
trigger1 = time <= 0
y = 0

[state 0, anim]
type = changeanim2
trigger1 = time <= 0
;trigger1 = anim != 28522
value = 28523

[State 182, 1]
type = screenbound
trigger1 = 1
movecamera = 0,1
value = 0

[State 49999, 1]
type = LifeSet
trigger1 = 1
value = 0

[State 444, 0]
type = selfstate
trigger1 = time >=20
value = 5150

;===========================================================================
;P2 STATE 1
[Statedef 2191]
type = S
movetype = H
physics = N
ctrl = 0
velset = -0.5,-0.1
facep2 = 1
sprpriority = 0

[State 0, HitOverride] ; To fix issues when colliding with projectiles simultaniously 
type = HitOverride
trigger1 = 1
attr = SCA,AA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 2191
time = 1
forceair = 0
ignorehitpause = 1
persistent = 1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12) 
ignorehitpause = 1


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2191, anim]
type = screenbound
trigger1 = 1; time <= 0
value = 0
movecamera = 1,1
persistent = 1

[State 2191, anim]
type = changeanim2
trigger1 = 1; time <= 0
value = 2191
elem = 1
persistent = 1

;===========================================================================
;P2 STATE 2
[Statedef 2192]
type = A
movetype = H
physics = N
ctrl = 0
velset = -0.27,-0.91
facep2 = 1
sprpriority = 0

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12) 

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2191, anim]
type = screenbound
trigger1 = 1; time <= 0
value = 0
movecamera = 1,1
persistent = 1

[State 2191, anim]
type = posadd
trigger1 = time = 1
x = -6
y = -6

[State 2191, anim]
type = changeanim2
trigger1 = time <= 0
value = 2191

;===========================================================================
;P2 STATE 3
[Statedef 2193]
type = A
movetype = H
physics = N
anim = cond(selfanimexist(5937), 5937,5030)
ctrl = 0
velset = 0,0
facep2 = 1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12) 

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = enemynear,stateno != 30402
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = enemynear,stateno != 30402
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2196, nofollow]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 0

[State 2191, velset]
type = velset
trigger1 = animelemtime(2) =0
x = -35
y = -5.5

;===========================================================================
;P2 STATE 4
[Statedef 2194]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0

[State 2196, nofollow]
type = screenbound
trigger1 = 1
movecamera = 1,1
value = 1

[State 2191, velset]
type = posset
trigger1 = time <= 0
x = enemynear, pos x - enemynear,pos x
y = enemynear, pos y

[State 2194, freeze]
type = posfreeze
trigger1 = 1
value = 1

[State 2194, anim]
type = changeanim2
triggerall = enemynear,var(51) = 15
trigger1 = time <= 0
value = 2193

[State 2194, anim]
type = changeanim2
triggerall = enemynear,var(51) < 15
trigger1 = time <= 0
value = 21931

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12) 
ignorehitpause = 1


;===========================================================================
;DIVINE RUSH
[Statedef 2195]
type = S
movetype = A
physics = N
anim = 2195
ctrl = 0
velset = -2,0
facep2 = 1
sprpriority = 6

[State 41, Train]
type = AfterImage
trigger1 = time%10 = 0
time= 4
timegap= 1
framegap= 3
length= 10
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 2196, targetstate]
type = targetbind
trigger1 = time <= 0
;trigger1 = enemynear,stateno = 2191
pos = 50,-54
time = 1
ignorehitpause = 1
persistent = 1

[State 2196, hitadd]
type = envshake
trigger1 =  time <= 0
time = cond(var(54) > 0,15,12)
freq = cond(var(54) > 0,250,200)
ampl = cond(var(54) > 0,-15,-7)
phase = cond(var(54) > 0,150,120)
ignorehitpause = 1
persistent = 1

[State 802, target] ;Send enemy to this state regardless
type = targetstate
trigger1 = !WinKo
value = 2191
ignorehitpause = 1
persistent = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2195, teleport]
type = posadd
trigger1 = animelem = 7
X = (p2dist X) - 20
ignorehitpause = 1
persistent = 1

[State 2001, end]
type = changestate
trigger1 = !animtime
value = 2196
ctrl = 0

;===========================================================================
;DIVINE RUSH 2
[Statedef 2196]
type = S
movetype = A
physics = N
anim = 2196
ctrl = 0
velset = -1,0
facep2 = 1
sprpriority = 6

[State 41, Train]
type = AfterImage
trigger1 = time%10 = 0
time= 4
timegap= 1
framegap= 3
length= 10
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2196scaleadd]
type = varset
trigger1 = time <= 0
fvar(12) = 1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = fvar(12),fvar(12) 
persistent = 1

[State 2196scaleadd]
type = varadd
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(7) = 0
fvar(12) = cond(var(54) > 2,0.45,0.3)

[State 2196, targetstate]
type = targetbind
trigger1 = time <= 0
;trigger1 = enemynear,stateno = 2191
pos = 50,-54
time = 1
ignorehitpause = 1
persistent = 1
[State 2196, targetstate]
type = targetbind
trigger1 = animelemtime(2) = 0
pos = 65,-70
time = 1
ignorehitpause = 1
persistent = 1

[State 2196, targetstate]
type = targetstate
trigger1 = enemynear,stateno = 2191
trigger1 = animelemtime(2) = 0
value = 2192
[State 2196, targetstate]
type = targetstate
trigger1 = enemynear,stateno = 2192
trigger1 = animelemtime(7) = 0
value = 2193

[State 2196, playsnd]
type = playsnd
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(7) = 0
value = 5,6
channel = 0

[State 200,Hitsparks]
type = explod
triggerall = !numexplod(7000)
trigger1 = animelemtime(2) = 0
anim = 7030
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos = 65,-70
id = 7000
scale = fvar(12),fvar(12) 
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0
[State 200,Hitsparks]
type = explod
triggerall = !numexplod(7000)
trigger1 = animelemtime(7) = 0
anim = 7030
postype = P2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos =  30,-20
id = 7000
scale = fvar(12),fvar(12) 
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 0, hitsparksiz]
type= modifyexplod
trigger1 = numexplod(7000)
scale = fvar(12),fvar(12) 
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)

[State 2196, life]
type = targetlifeadd
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(7) = 0
value = -Ceil(cond(fvar(11) * 30 < 7, 7, fvar(11) * 30))
kill = 0

[State 2196, hitadd]
type = hitadd
trigger1 =  animelemtime(2) = 0
trigger2 = animelemtime(7) = 0
value = 1

[State 2196, hitadd]
type = envshake
trigger1 =  animelemtime(2) = 0
trigger2 = animelemtime(7) = 0
time = cond(var(54) > 0,10,6)
freq = cond(var(54) > 0,160,130)
ampl = cond(var(54) > 0,-18,-10)
phase = cond(var(54) > 0,125,95)
ignorehitpause = 1
;persistent = 


[State 2196, add to damage scaling]
type = varadd
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(7) = 0
fvar(13) = 1

[State 2001, end]
type = changestate
trigger1 = !animtime
value = 2197
ctrl = 0

;===========================================================================
;DIVINE RUSH: ROSE KMH
[Statedef 2197]
type = S
movetype = A
physics = N
anim = 2197
ctrl = 0
velset = 0,0
facep2 = 1
sprpriority = 3

[State 41, Train]
type = AfterImage
trigger1 = time%10 = 0
time= 4
timegap= 1
framegap= 3
length= 10
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = fvar(12),fvar(12) 
persistent = 1

[State 2196,scaledown]
type = varadd
trigger1 = fvar(12) > 1
fvar(12) = -0.05

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG 
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2197, jump up]
type = velset
triggerall = anim = 2197
trigger1 = animelemtime(2) = 0
x = -12
y = -9
[State 2197, jump up]
type = velmul
triggerall = anim = 2197
trigger1 = animelemtime(3) = 0
x = 0.75
y = 0.75
[State 2197, jump up]
type = velset
triggerall = anim = 2197
trigger1 = animelemtime(4) = 0
x = 0
y = 0

[State 2197, jump up]
type = posadd
triggerall = anim = 2197
trigger1 = animelemtime(2) = 0
x = 6 * cond(screenpos x < 240, -1,1)

[state 2197, jumpsnd]
type = playsnd
triggerall = anim = 2197
trigger1 = animelemtime(2) = 0
value = 40,1
channel = 0


[State 2197, spark]
type = explod
triggerall = anim = 2197
trigger1 = animelemtime(4) = 0
anim = 2002 ;If this var is 0, have solid effects
id = 2002
pos = -68, -86
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
scale = fvar(12),fvar(12) 
sprpriority = 4
[State 2197, charge fx 1]
type = explod
triggerall = anim = 2197
triggerall = numexplod(2430) != 1
trigger1 = 1
id = 2430
anim = 2430
pos = -16, -80
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
scale = fvar(12),fvar(12) 
ontop = 1
[State 2197, Hyper Charge FX]
type = explod
triggerall = anim = 2197
triggerall = numexplod(2440) = 0
trigger1 = animelem = 5
id = 2440
anim = 2440
pos = -16, -80
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
scale = fvar(12),fvar(12) 
ontop = 1
[State 2197, charge fx 2];THUNDAH
type = explod
triggerall = anim = 2197
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(11) = 0
trigger3 = animelemtime(20) = 0
trigger4 = animelemtime(21) = 30
trigger5 = animelemtime(21) = 50
trigger6 = animelemtime(21) = 90
id = 2450
anim = 2450 + random% 5
pos = ((random%80 - random%60) * cond(screenpos x < 0, 1,-1)), -floor(pos y)
scale = 1, (fvar(12)*2)+(pos Y < -200)
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ontop = cond(random<500,0,1)
sprpriority = 0
facing = cond(random<500,-1,1)

[State 2197, spark]
type = explod
triggerall = anim = 2197
trigger1 = animelemtime(4) = 0
anim = 2515
id = 2515
pos = -68, -86
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
scale = fvar(12),fvar(12) 
sprpriority = 4
[State 0, Charge Ball FX]
type = Explod
triggerall = anim = 2197
triggerall = numexplod(2420) = 0
trigger1 = animelemtime(5) >= 0
anim = 2420 ;If this var is 0, have solid effects
id = 2420
pos = -18,-78
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -1
sprpriority = 5
ontop = 1
ownpal = 1
bindtime = -1
scale =  cond(var(54) > 0, 1.25,1)* fvar(12),cond(var(54) > 0,1.25,1)* fvar(12) ;0.6,0.6
persistent = 0

[State 2197, Hand Blast FX]
type = helper
triggerall = numhelper(2210) = 0
trigger1 = animelemtime(22) >= 0
;helpertype = normal ;player
name = "Hand Blast FX"
id = 2210
stateno = 2210
pos = 0,0
postype = P1

[State 2197, actual blast]
type = explod
triggerall = anim = 2197
triggerall = numexplod(2198) = 0
trigger1 = animelemtime(22) >= 0
id = 2198
anim = 2198 ;If this var is 0, have solid effects
pos = 42, -75
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
scale = cond(var(54) > 0, 2,1)* fvar(12),cond(var(54) > 0,2,1)* fvar(12)
ontop = 1
sprpriority = 7

[State 2197, LVL 3 Blast FX]
type = explod
triggerall = var(54) = 3
triggerall = anim = 2197
triggerall = numexplod(219822) = 0
trigger1 = animelemtime(22) >= 0
id = 219822
anim = 19800 ;If this var is 0, have solid effects
pos = -82, 25
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
scale = cond(var(54) > 0, 2,1)* fvar(12),cond(var(54) > 0,2,1)* fvar(12)
ontop = 1
sprpriority = 7

[State 802, tarrgetstate]
type = envshake
trigger1 = animelemtime(22) < 0
time = 999
freq = cond(var(54) > 0,9,12)
ampl = cond(var(54) > 0,random%15,random%10)
phase = cond(var(54) > 0,random%90,random%70)
ignorehitpause = 1
persistent = 1

[State 802, tarrgetstate]
type = envshake
trigger1 = animelemtime(22) >= 0
time = 999
freq = cond(var(54) > 0,18,13)
ampl = cond(var(54) > 0,random%15,random%10)
phase = cond(var(54) > 0,random%130,random%100)
ignorehitpause = 1
persistent = 1

[State 2197, charge fx 1]
type = removeexplod
trigger1 = numtarget(2003) 
trigger1 =!animtime
trigger2 = anim = 1
trigger3 = animelemtime(22) >= 0
id = 2003
[State 2197, Actual Blast]
type = removeexplod
triggerall = numtarget(2198) 
trigger1 =!animtime
trigger2 = anim = 1
trigger3 = animelemtime(22) >= 0
id = 2198
[State 2197, charge ball fx ]
type = removeexplod
trigger1 = numtarget(2420) 
trigger1 =!animtime
trigger2 = anim = 1
trigger3 = animelemtime(22) >= 0
id = 2420
[State 2197, charge fx 1]
type = removeexplod
triggerall = anim = 2197
trigger1 = numtarget(2430) 
trigger1 =!animtime
trigger2 = animelemtime(22) >= 0
trigger3 = anim = 1
id = 2430
[State 2197, charge fx 1]
type = removeexplod
triggerall = numtarget(2440) 
trigger1 =!animtime
trigger2 = anim = 1
trigger3 = animelemtime(22) >= 0
id = 2440
[State 2197, charge fx 1]
type = removeexplod
triggerall = numtarget(2450) 
trigger1 =!animtime
trigger2 = anim = 1
trigger3 = animelemtime(22) >= 0
id = 2450
[State 2197, charge fx 1]
type = removeexplod
triggerall = numtarget(2515) 
trigger1 =!animtime
trigger2 = anim = 1
trigger3 = animelemtime(22) >= 0
id = 2515


[State 2197, kmh snd]
type = playsnd
triggerall = anim = 2197
trigger1 = animelemtime(4) = 0
value = 2400,0
channel = 0
[State 2197, kmh snd] ;Voice
type = playsnd
triggerall = (name = "SSR Goku Black Z2i")
triggerall = anim = 2197
trigger1 = animelemtime(4) = 0
value = 2400,2
channel = 2
[State 2197, kmh snd] ;Voice
type = playsnd
triggerall = (name = "SSR Goku Black Z2i")
triggerall = anim = 2197
trigger1 = animelemtime(22) = 0
value = 2400,3
channel = 2

[State 2197, kmh snd]
type = playsnd
triggerall = anim = 2197
trigger1 = animelemtime(4) = 0
trigger2 = animelemtime(11) = 0
trigger3 = animelemtime(20) = 0
trigger4 = animelemtime(21) = 30
trigger5 = animelemtime(21) = 50
trigger6 = animelemtime(21) = 90
value = 2400,1
channel = 1

[State 2197, kmh snd]
type = playsnd
trigger1 = anim = 2197
trigger1 = animelemtime(22) = 0
trigger2 = anim = 1
trigger2 = time <= 0
value = 2400,4
channel = 1
loop = 1
pan = 25

[State 2197, invisible]
type = changestate
triggerall = anim = 2197
trigger1 = animelemtime(42) = 0
value = 2198

;===========================================================================
;DIVINE RUSH: ROSE KMH pt 2
[Statedef 2198]
type = A
movetype = A
physics = N
anim = 1 ;EXPLOD Buffering emty anim
ctrl = 0
velset = 0,0

;[State 2197, Hand Blast FX]
;type = removeexplod
;trigger1 = time <= 0
;;triggerall = numtarget(2210) 
;;trigger1 =!animtime
;;trigger2 = anim = 1
;;trigger3 = animelemtime(22) >= 0
;id = 2210


[State 2197, charge fx 1]
type = removeexplod
trigger1 = numexplod(219822) 
id = 219822

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2198, posset] ;Used to fix issues when in certain parts of the screen, as the super would act up
type = posset
trigger1 = time <= 0
x = ceil(screenpos x = 240 * (enemynear,facing))

[State 2194, send enemy to flying state]
type = targetstate
triggerall = enemynear,stateno !=2194
trigger1 = anim = 1
trigger1 = time <= 0
value = 2194

[State 2197, actual blast]
type = helper
triggerall = !Numhelper(2188)
trigger1 = time <= 0
;helpertype = normal ;player
name = "Rose KMH LVL3 Blast"
id = 2199
stateno = 2199
pos = ceil(enemynear, pos x), ceil(enemynear,pos y)

[State 2197, charge fx 1]
type = removeexplod
triggerall = numexplod(2003)
trigger1 = time <= 0
id = 2003
[State 2197, charge fx 1]
type = removeexplod
triggerall = numexplod(2430)
trigger1 = time <= 0
id = 2430
[State 2197, charge fx 1]
type = removeexplod
triggerall = numexplod(2440)
trigger1 = time <= 0
id = 2440
[State 2197, charge fx 1]
type = removeexplod
triggerall = numexplod(2450)
trigger1 = time <= 0
id = 2450
[State 2197, charge fx 1]
type = removeexplod
triggerall = numexplod(2515)
trigger1 = time <= 0
id = 2515
[State 2197, charge fx 1]
type = removeexplod
triggerall = numexplod(2198)
trigger1 = time <= 0
id = 2198

[state 3250, speedlines]
type = explod
triggerall = !numexplod(2923)
trigger1 = time <= 0
anim = 2923;+(root,facing=1)
postype = back
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 0,20
bindtime = -1
id = 2923
;supermove = 0
pausemovetime = 70
sprpriority = 1
ontop = 0
ownpal = 1
;facing = 1
ignorehitpause = 1
;loop = 1
removetime = -1

[state 3250, speedlines2]
type = explod
triggerall = !numexplod(2923)
trigger1 = time <= 0
anim = 2923;+(root,facing=1)
postype = back
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 0,240
bindtime = -1
id = 2923
;supermove = 0
pausemovetime = 70
sprpriority = 1
ontop = 0
ownpal = 1
;facing = 1
ignorehitpause = 1
;loop = 1
removetime = -1

[State 2197, end]
type = changestate
triggerall = time >= 155
triggerall = var(54) = 2
trigger1 = enemynear, stateno = 2201
trigger1 = enemynear, vel y = 0
value = 2202
ctrl = 0

[State 2197, end]
type = changestate
triggerall = time >= 155
triggerall = var(54) =3;= 2
trigger1 = enemynear, stateno = 2201
trigger1 = enemynear, vel y >= 0
value = 2202
ctrl = 0

;===========================================================================
;P2 STATE 5
[Statedef 2201]
type = A
movetype = H
physics = N
anim = cond(selfanimexist(5052),5052,5030)
ctrl = 0
velset = 0,-2;-9.4

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12) 
ignorehitpause = 1

[state 276, default anim]
type = changeanim
triggerall = anim = 5030
trigger1 = !animtime
value = 5035
[state 276, default anim]
type = changeanim
triggerall = anim = 5035
trigger1 = !animtime
value = 5050

[State 2201, fall]
type = veladd
trigger1 = time >= 0
y = 0.3

[State 2201, fall]
type = velset
trigger1 = vel y >= 0
y = 0

[State 2201, fall]
type = velset
trigger1 = enemynear,stateno = 2202
x = -enemynear,vel x
y = enemynear,vel y - 0.02


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[state 2201,Screenbound]
type = screenbound
trigger1 = 1
movecamera = 0,1
value = 1

[state 2201,push]
type = playerpush
trigger1 = 1
value = 0

;===========================================================================
;D.R: SLAM
[Statedef 2202]
type = A
movetype = A
physics = N
anim = 2200
ctrl = 0
facep2 = 1

[state 2201,push]
type = playerpush
trigger1 = 1
value = 0

;LEVEL 2
[State 0, velocity]
type = velset
triggerall = var(54) = 2
trigger1 = time <= 0
x = 0.3
y = 0.09+ (0.3 * (cond(screenpos y < gameheight, 1,0)))

;LEVEL 3
[State 0, velocity]
type = velset
triggerall = var(54) =3;= 2
trigger1 = time <= 0
x = 0.32
y = 0.5 + (0.2 * (cond(screenpos y < gameheight, 1,0)))

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = fvar(12),fvar(12)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
triggerall = anim = 2200
trigger1 = animelemtime(3) = 0
value = 215,13
channel = 0

[State 251, teleport snd]
type = playsnd
trigger1 = time <= 0
value = 2302,0
channel = 1

[State 251, teleport]
type = posset
triggerall = anim = 2200
trigger1 = time <= 0
X = enemynear, pos x + 10 * (enemynear,facing)
Y = enemynear, pos y - 5
ignorehitpause = 1
persistent = 1



[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nomusic
persistent = 1
ignorehitpause = 1

;LEVEL 2
[State 620, 3] 
type = HitDef
triggerall =var(54) = 2
triggerall = anim = 2200
trigger1 = AnimElem = 40
attr = A, NA
damage = Ceil(cond(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 20,20  ;16,16
sparkno = s1;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-50
hitsound   = s5,7
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = 2,-6
air.velocity = 2,-2 + cond(enemy,pos y < 20, -3,0)
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
air.fall = 1
fall.recover = 0
kill = 0
id = 2203

;LEVEL 3
[State 620, 3] 
type = HitDef
triggerall =var(54) =3;= 2
triggerall = anim = 2200
trigger1 = AnimElem = 40
attr = A, NA
damage = Ceil(cond(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 20,20  ;16,16
sparkno = s1;s7030
guard.sparkno = s1;s7000
;sparkxy = -30,-50
hitsound   = s5,7
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = 2,-6
air.velocity = 2,-2 + cond(enemy,pos y < 20, -3,0)
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
air.fall = 1
fall.recover = 0
kill = 0
id = 2203

[State 0, velocity]
type = PosSet
triggerall = var(54) =3;= 2
triggerall = anim = 2200
trigger1 = movehit = 1
X = Enemynear, Pos X - (40*facing)
Y = Enemynear, Pos Y - 10
ignorehitpause = 1

[State 200,Hitsparks]
type = explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2203)
trigger1 = movecontact
anim = 2823
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos =  66,-70
id = 52823
removetime = -2
ontop = 1
bindtime = -1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 802, tarrgetstate]
type = targetstate
triggerall = anim = 2200
trigger1 = movehit = 1
value = 2203
ignorehitpause = 1
persistent = 0

[State 1211, AllPalFX]
type = AllPalFX
triggerall = anim = 2200
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 802, removespeedlines]
type = removeexplod
triggerall = anim = 2200
trigger1 = movehit = 1
id = 2923
ignorehitpause = 1
persistent = 0

[state 2201,Screenbound]
type = screenbound
trigger1 = animelemtime(41) >= 0
movecamera = 0,0
value = 0

[state 2201,Screenbound]
type = screenbound
trigger1 = animelemtime(41) < 0
movecamera = 1,1
value = 0

;LEVEL 2
[State 0, velocity]
type = velset
triggerall = var(54) = 2
trigger1 = animelemtime(41) = 0
x = -2
y =-10.2

;LEVEL 3
[State 0, velocity]
type = velset
triggerall = var(54) =3;= 2
trigger1 = animelemtime(41) = 0
x = -3
y = -10.2

;LEVEL 2 zoom in
[State 0, velocity]
type = varadd
triggerall = var(54) >=2;= 2
trigger1 = animelemtime(41) < 0
fvar(12) = 0.0021
ignorehitpause = 1


;LEVEL 2 zoom out
[State 0, velocity]
type = varadd
triggerall = var(54) >=2;= 2
trigger1 = animelemtime(41) >= 0
fvar(12) =-0.0177
ignorehitpause = 1

[State 2201, end]
type = changestate
trigger1 = !animtime
value = cond(var(54) =3,2209,2205)
ignorehitpause = 0

;===========================================================================
;P2 SLAM GETHIT
[Statedef 2203]
type = A
movetype = H
physics = N
anim = cond(selfanimexist(5052),5052,5030)
ctrl = 0

;LEVEL 2
[State 0, velocity]
type = velset
triggerall = enemynear,var(54) = 2
trigger1 = time <= 0
x = -1.2
y = 3

;LEVEL 3
[State 0, velocity]
type = velset
triggerall = enemynear,var(54) =3;= 2
trigger1 = time <= 0
x = 0;9
Y = 1.5;


[State 0, velocity]
type = PosAdd
triggerall = enemynear,var(54) =3;= 2
trigger1 = time <= 0
x = floor(-ScreenPos X + (GameWidth/2)) * Facing
Y = floor(-ScreenPos Y + (GameHeight/2))



[State 2196,scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12) 
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[state 2201,Screenbound]
type = screenbound
trigger1 = enemynear,var(54) = 2
movecamera = 1,1
value = 1

[state 2201,Screenbound]
type = screenbound
trigger1 = enemynear,var(54) =3;= 2
movecamera = 0,0
value = 1

[state 276, default anim]
type = changeanim
triggerall = anim = 5030
trigger1 = !animtime
value = 5035
[state 276, default anim]
type = changeanim
triggerall = anim = 5035
trigger1 = !animtime
value = 5050

[State 2308, end]
type = changestate;selfstate
triggerall = prevstateno = 2206
trigger1 = pos y >= 0 && vel y > 0
value = 5952;5100

;===========================================================================
;P2 STATE 7
[Statedef 2204]
type = A
movetype = H
physics = N
ctrl = 0
facep2 = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12) 
ignorehitpause = 1

[State 2204, velset]
type = velset
trigger1 = time <= 0
x = -enemynear, vel x - 2
y = enemynear, vel y - 2

[State 2304, grav]
type = veladd
triggerall = enemynear,numhelper(2199) = 0
trigger1 = time > 0
y = 0.12

[State 2204, velset]
type = velset
trigger1 = enemynear,numhelper(2199) = 1
x = 0
y = 0

[State 2204, qanim]
type = changeanim2
trigger1 = time <= 0
value =  2193

[state 2201,Screenbound]
type = screenbound
trigger1 = 1
movecamera = 1,1
value = 1

[State 2308, end]
type = changestate;selfstate
trigger1 = pos y >= 0 && vel y > 0
value = 5952;5100

;===========================================================================
;DIVINE RUSH: KNEE IN TO SLASHES
[Statedef 2205]
type = A
movetype = A
physics = N
anim = 2201
ctrl = 0
velset = 0,0
sprpriority = 5
facep2 = 1

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = !MatchOver
trigger1 = !WinKO
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2205, bound]
type = screenbound
trigger1 = time <= 0
movecamera = 1,1
value = 1

[State 251, teleport snd]
type = playsnd
trigger1 = time <= 0
value = 2302,0
channel = 1

[State 251, teleport]
type = posset
trigger1 = time <= 0
X = enemynear, pos x + (40 * (enemynear,facing))
Y = enemynear, pos y +20
ignorehitpause = 1
persistent = 1

[State 620, 3] 
type = HitDef
trigger1 = AnimElem = 3
attr = A, NA
damage = Ceil(cond(fvar(11) * 38 < 7, 7, fvar(11) * 38)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 3,3  ;16,16
sparkno = s1
guard.sparkno = s1
sparkxy = -30,-50
hitsound   = s5,7
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = 2,-6
air.velocity = 2,0;-2 + cond(enemy,pos y < 20, -3,0)
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
air.fall = 1
fall.recover = 0
kill = 0
id = 22205

[State 200,Hitsparks]
type = explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(22205)
trigger1 = movecontact
anim = 72205
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos =  50,-84
id = 72205
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 802, tarrgetstate]
type = targetstate
triggerall = enemynear,stateno != 2204
triggerall = numtarget(22205)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
value = 2206
ignorehitpause = 0
persistent = 0

[State 802, tarrgetstate]
type = envshake
triggerall = numtarget(22205)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
time = 12
freq = 12
ampl = 7
phase = 100
ignorehitpause = 1
persistent = 1

[State 620, 3]
type = HitDef
trigger1 = AnimElem = 9
attr = A, NA
damage = Ceil(cond(fvar(11) * 120 < 80, 80, fvar(11) * 120)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 50,50
sparkno = s7030
guard.sparkno = s1;s7000
sparkxy = -30,-50
hitsound   = s0,61
guardsound = S6,1
ground.type = High
ground.slidetime = 12  + cond(var(54) > 0, 3,0)
ground.hittime  = 15  + cond(var(54) > 0, 3,0)
ground.velocity = -5
air.velocity = -3,12
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0 ;ceil(cond(p2movetype=H, 40, 210)  * cond(var(54) > 0, fvar(6),1)), ceil(35 * cond(var(54) > 0, fvar(6),1))
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 0
fall.recover = 0
kill = 1
ID = 22206

[State 802, tarrgetstate]
type = targetstate
triggerall = enemynear,stateno != 22060
triggerall = numtarget(22206)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
value = 22060
ignorehitpause = 0
persistent = 0

[State 2202m velset]
type = velset
trigger1 = animelemtime(3) = 0
x = 4
y =-6.9
[State 9011, VelAdd]
type = VelAdd
triggerall = animelemtime(3) > 0 && animelemtime(10) < 0
trigger1 = (Pos Y < 0)
y = 0.35
[State 2207,velset]
type = velset
trigger1 = animelemtime(10) = 0
x = 0
y = 0
ignorehitpause = 1
persistent =0

[State 251, voice] ;DIE!
type = playsnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = animelemtime(9) = 0
value = 230,5
channel = 1

[State 251, adjust] 
type = posadd
trigger1 = animelem = 8
trigger2 = animelem = 9
x = -7
y = -11

[State 2197, end]
type = null
triggerall= !MatchOver
trigger1 = time > 0
trigger1 = var(51) = 0
value = 50
ctrl = 0

;;juggle limit LVL2
[State 0, VarAdd]
type = Varset
trigger1 = 1
var(1) = var(36)+1 ;Ensures value is always above the juggle limit
Ignorehitpause = 1
persistent = 0

[state 2205, end]
type = changestate
trigger1 = !animtime;!animtime
value = 2207
ctrl = 0

;===========================================================================
;P2 STATE 8
[Statedef 2206]
type = A
movetype = H
physics = N
ctrl = 0
velset = -2.5, -8
facep2 = 1

[State 2204, qanim]
type = changeanim2
trigger1 = time <= 0
value =  2193

[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.4
 
[State 2308, end]
type = changestate;selfstate
trigger1 = pos y >= 0 && vel y > 0
value = 5952;5100


;===========================================================================
;P2 STATE 9
[Statedef 22060]
type = A
movetype = H
physics = N
ctrl = 0
velset = -2.5, 7
facep2 = 1

[State 0, invul]
type = nothitby
trigger1 = 1
value = SCA,AA,AT,AP

[State 2204, qanim]
type = changeanim2
trigger1 = time <= 0
value =  2193

[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.4
 
[State 2308, end]
type = changestate;selfstate
trigger1 = pos y >= 0 && vel y > 0
value = 5952;5100

;===========================================================================
;Fall after Slashes
[statedef 2207]
type = A
movetype = I
physics = N
ctrl = 0
anim = 2202

;;juggle limit LVL2
[State 0, VarAdd]
type = Varset
trigger1 = 1
var(1) = var(36)+1 ;Ensures value is always above the juggle limit
Ignorehitpause = 1
persistent = 0

[State 2205, bound]
type = screenbound
trigger1 = time <= 0
movecamera = 0,0
value = 0

[State 2207, grav]
type = veladd
trigger1 = pos y < 0
y = 0.25
x = 0.15

[State 22027, anim]
type = changeanim
triggerall = animelemtime(4) < 0
trigger1 = vel y >= 0 
trigger1 = pos y >= 0
value = anim 
elem = 4
ignorehitpause = 1
persistent = 0

[State 2207,velset]
type = posset
triggerall = animelemtime(4) = 0
trigger1 = vel y >= 0
trigger1 = pos y >= 0
y = 0
ignorehitpause = 1
persistent =0

[State 2207,velset]
type = velset
triggerall = animelemtime(4) = 0
trigger1 = vel y >= 0
trigger1 = pos y >= 0
x = 0
y = 0
ignorehitpause = 1
persistent =0

[State 22027, anim]
type = changeanim
triggerall = !numhelper(22011)
trigger1 = animelemtime(7) > 0
value = anim 
elem = 8
ignorehitpause = 1
persistent = 0

[State 2207, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1


;===========================================================================
;D.R: Handler
[Statedef 2209]
type = A
movetype = A
physics = N
anim = 2204
ctrl = 0
velset = 0,0
sprpriority = 5
facep2 = 1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = fvar(12),fvar(12) 
ignorehitpause = 1

[State 0, slashers]
type = helper
triggerall = !numhelper(22090 + floor(time /12)) && time < 144
trigger1 = cond(time <= 0, 1, (time%12 = 0))
id = 22090 + floor(time /12)
stateno = 22090
postype = p2
pos = 0,24
ownpal = 1
ignorehitpause = 1
persistent = 1

;UPWARDS
[State 0, slashers]
type = helper
trigger1 = time = 144
trigger1 = !numhelper(220902)
id = 220902
stateno = 22092
postype = p2
pos = 50,0
ownpal = 1
ignorehitpause = 1
persistent = 0

;UPWARDS
[State 0, slashers]
type = helper
trigger1 = time = 144
trigger1 = !numhelper(220903)
id = 220903
stateno = 22092
postype = p2
pos = -50,0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = !MatchOver
trigger1 = !WinKO
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2205, bound]
type = screenbound
trigger1 = time <= 0
movecamera = 0,1
value = 0

[State 2205, bound]
type = posset
trigger1 = time <= 0
x = enemynear,pos x - 60
y = enemynear,pos y - 80

[state 3250, speedlines]
type = explod
triggerall = !numexplod(2773)
trigger1 = enemynear,stateno = 22093 ; Going up
anim = 2773;+(root,facing=1)
postype = left
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 150,0
bindtime = -1
id = 2773
;supermove = 0
pausemovetime = 70
sprpriority = 0
ontop = 0
ownpal = 1
;facing = 1
ignorehitpause = 1
;loop = 1
removetime = -1

[state 3250, speedlines]
type = explod
triggerall = !numexplod(12773)
trigger1 = enemynear,stateno = 22093 ; Going up
anim = 12773;+(root,facing=1)
postype = left
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = -50,0
bindtime = -1
id = 12773
;supermove = 0
pausemovetime = 70
sprpriority = 0
ontop = 0
ownpal = 1
;facing = 1
ignorehitpause = 1
;loop = 1
removetime = -1

;zoom in
[State 0, velocity]
type = varadd
triggerall = fvar(12) < 1.15
trigger1 = enemynear,stateno = 22093 ; Going up
fvar(12) = 0.0077
ignorehitpause = 1

;snd
[State 0, snd]
type = playsnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = enemynear,stateno = 22093 ; Going up
value = s2907,0
ignorehitpause = 1
persistent = 0

[State 251, shift position]
type = posset
triggerall = anim != 22055
trigger1 = enemynear,stateno = 22093 ; Going up
trigger1 = enemynear, vel y = 0.3
x = enemynear, pos x
y = enemynear, pos y - 80

[State 251, shift to How Pathetic anim]
type = changeanim
triggerall = anim != 22055
trigger1 = enemynear,stateno = 22093 ; Going up
trigger1 = enemynear, vel y = 0.3
value = 22055

[State 0, follow camera]
type = screenbound
;trigger1 = anim = 22055
;trigger1 = animelemtime(1) = 0
triggerall = anim != 22055
trigger1 = enemynear,stateno = 22093 ; Going up
trigger1 = enemynear, vel y = 0.3
movecamera = 0,1
value = 0

[State 0, follow camera]
type = posadd
trigger1 = anim = 22055
trigger1 = animelemtime(1) = 0
y = 30

[State 251, teleport snd]
type = playsnd
trigger1 = time <= 0
trigger2 = anim = 22055
trigger2 = animelemtime(1) = 0
value = s2302,0
channel = 1

;How pathetic
[State 0, snd]
type = playsnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = anim = 22055
trigger1 = animelemtime(5) = 0
value = s215,21
ignorehitpause = 1
persistent = 0

;How pathetic
[State 0, snd]
type = velset
trigger1 = anim = 22055
trigger1 = animelemtime(3) = 0
y = enemynear,vel y -0.3
ignorehitpause = 1
persistent = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 22055
trigger1 = animelemtime(6) = 0
value = s0,52
ignorehitpause = 1
persistent = 0

[state 2205, end]
type = targetstate
triggerall = anim = 22055
trigger1 = !animtime;!animtime
value = 22095

[state 2205, end]
type = changestate
triggerall = anim = 22055
trigger1 = !animtime;!animtime
value = 22094
ctrl = 0
;===========================================================================
;D.R: Slashers
[Statedef 22090]
type = A
movetype = A
physics = N
anim = 2205
ctrl = 0
velset = 0,0
sprpriority = 5
facep2 = 1


[state 0, darken]
type = PalFX
trigger1 = 1
add = Root,Var(53),Root,Var(53),Root,Var(53)
time = 1
ignorehitpause = 1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = root,fvar(12),root,fvar(12) 
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = !MatchOver
trigger1 = !WinKO
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2205, bound]
type = screenbound
trigger1 = 1;time <= 0
movecamera = 0,0
value = 0

[State 251, teleport snd]
type = playsnd
trigger1 = time <= 0
value = 2302,0
channel = 1

[State 620, 3]
type = HitDef
trigger1 = !movecontact
attr = A, HA
damage = Ceil(cond(fvar(11) * 5 < 3, 3, fvar(11) * 5)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 2,2
sparkno = s1
guard.sparkno = s1;s7000
sparkxy = -30,-50
hitsound   = s0,61
guardsound = S6,1
ground.type = High
ground.slidetime = 12  + cond(var(54) > 0, 3,0)
ground.hittime  = 15  + cond(var(54) > 0, 3,0)
ground.velocity = -5
air.velocity = 0,0;-2,-0.2
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0;ceil(cond(p2movetype=H, 40, 210)  * cond(var(54) > 0, fvar(6),1)), ceil(35 * cond(var(54) > 0, fvar(6),1))
givepower = 35,35
yaccel = 0
air.fall = 1
fall.recover = 0
kill = 0
ID = stateno
p2facing = 1

[State 200,Hitsparks]
type = explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(STATENO)
trigger1 = movecontact
anim = 7030
postype = P2
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
facing = 1
pos =  0,-50
id = 72205
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 802, tarrgetstate]
type = targetstate
triggerall = numtarget(stateno)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
value = 22091
ignorehitpause = 0
persistent = 0

[State 2202m velset]
type = velset
trigger1 = animelemtime(3) = 0
x = 38
y =2
persistent = 0

[State 2202m velset]
type = velset
triggerall = numtarget(stateno)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
x = 184
y = 9.4

[State 251, voice] ;slash
type = playsnd
trigger1 = animelemtime(3) = 0
value = 0, 52
channel = 2

[State 200,trail fx]
type = explod
triggerall = !numexplod(22051)
trigger1 = animelemtime(3) = 0
anim = 22051
id= 22051
postype = P1
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
facing = 1
pos = 99,-46
scale = root,fvar(12)+1,root,fvar(12)+1
removetime = -1
bindtime = -1
ontop = 0
sprpriority = cond(root,var(49) > 0, 6,0)
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[state 2205, end]
type = removeexplod
triggerall = numexplod(22051)
trigger1 = !animtime
trigger2 = abs(Pos X + enemynear,pos x > 170)
id = 22051

[state 2205, end]
type = destroyself
trigger1 = !animtime
trigger2 = abs(Pos X + enemynear,pos x > 170)

;===========================================================================
;P2 slash gethit
[Statedef 22091]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0

[State 2196, nofollow]
type = screenbound
trigger1 = 1
movecamera = 1,1
value = 1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12) 
ignorehitpause = 1

[State 0, posadd]
type = posadd
trigger1 = time <= 0
y = -5

[State 2194, anim]
type = changeanim2
trigger1 = time <= 0
value = 21931

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

;===========================================================================
;D.R: Slashers up
[Statedef 22092]
type = A
movetype = A
physics = N
anim = 22052
ctrl = 0
velset = 0,0
sprpriority = 5
facep2 = 1

[state 0, darken]
type = PalFX
trigger1 = 1
add = Root,Var(53),Root,Var(53),Root,Var(53)
time = 1
ignorehitpause = 1

[State 2196,scale]
type = angledraw
trigger1 = 1
scale = root,fvar(12),root,fvar(12) 
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = !MatchOver
trigger1 = !WinKO
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2205, bound]
type = screenbound
trigger1 = time <= 0
movecamera = 0,0
value = 0

[State 251, teleport snd]
type = playsnd
trigger1 = time <= 0
value = 2302,0
channel = 1

[State 620, 3]
type = HitDef
triggerall = !movecontact
trigger1 = animelemtime(6) >= 0
attr = A, HA
damage = Ceil(cond(fvar(11) * 5 < 3, 3, fvar(11) * 5)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 11,11
sparkno = s1
guard.sparkno = s1;s7000
sparkxy = -30,-50
hitsound   = s0,61
guardsound = S6,1
ground.type = High
ground.slidetime = 12  + cond(var(54) > 0, 3,0)
ground.hittime  = 15  + cond(var(54) > 0, 3,0)
ground.velocity = -5
air.velocity = 0,0;-2,-0.2
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0;ceil(cond(p2movetype=H, 40, 210)  * cond(var(54) > 0, fvar(6),1)), ceil(35 * cond(var(54) > 0, fvar(6),1))
givepower = 35,35
yaccel = 0
air.fall = 1
fall.recover = 0
kill = 0
ID = stateno
p2facing = 1

[State 200,Hitsparks]
type = explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(STATENO)
trigger1 = movecontact
anim = 7030
postype = P2
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
facing = 1
pos =  0,-65
id = 72205
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[State 802, targetstate]
type = targetstate
triggerall = numtarget(stateno)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
value = 22093
ignorehitpause = 0
persistent = 0

[State 251, voice] ;slash
type = playsnd
trigger1 = animelemtime(5) = 0
value = 0, 52
channel = 2

[State 2202m velset]
type = velset
triggerall = numtarget(stateno)
triggerall = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
y = 15.4

[state 2205, end]
type = destroyself
trigger1 = !animtime

;===========================================================================
;P2 slash gethit
[Statedef 22093]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0.3;-5
sprpriority = 6

[State 2196, nofollow]
type = screenbound
trigger1 = 1
movecamera = 1,1
value = 1

[State 2194, anim]
type = changeanim2
triggerall = !selfanimexist(5252) ; Twist KO
trigger1 = time <= 0
value = 22054

[State 2194, anim]
type = changeanim
triggerall = selfanimexist(5252) ; Twist KO
trigger1 = time <= 0
value = 5051

[State 2194, anim]
type = changeanim
triggerall = selfanimexist(5252) ; Twist KO
triggerall = anim = 5051
trigger1 = !animtime
value = 5252

[State 0, rotate]
type = angledraw
trigger1 = anim = 22054
scale = enemynear,fvar(12),enemynear,fvar(12) 

[State 0, rotate]
type = angledraw
trigger1 = anim = 5252
scale = enemynear,fvar(12),enemynear,fvar(12) 
value = -90

[State 0, rotate]
type = veladd
triggerall = enemynear,anim != 22055
trigger1 = vel y < 0.3
y = 0.2
;x = -0.022

[State 0, rotate]
type = posadd
triggerall = enemynear,anim != 22055
;trigger1 = time <= 0
trigger1 = anim = 5252
y = -17
x = 8
persistent = 0

[State 0, rotate]
type = velset
triggerall = enemynear,anim != 22055
trigger1 = vel y > 0.3
y = 0.3
x = 0

[State 0, rotate]
type = velset
trigger1 = enemynear,anim = 22055
trigger1 = animelemtime(5) >= 0
y = 1.82
x = 0

[State 0, rotate]
type = posadd
trigger1 = enemynear,anim = 22055
trigger1 = animelemtime(5) < 0
y = 3.42
x = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

;===========================================================================
;D.R: Slash down
[Statedef 22094]
type = A
movetype = A
physics = N
anim = 1 ;22056
ctrl = 0
velset = 0,0
sprpriority = 5
facep2 = 1

[State 0, draw reset]
type = varset
trigger1 = time <= 0
fvar(12) = 1

[State 0, removespeedlines]
type = removeexplod
trigger1 = numexplod(2773)
id = 2773

[State 0, removespeedlines]
type = removeexplod
trigger1 = numexplod(12773)
id = 12773

;coming down
[State 0, snd]
type = playsnd
trigger1 = time <= 0
value = s5941,0
ignorehitpause = 1
persistent = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
persistent = 1
ignorehitpause = 1

[State 9011, VelAdd]
type = posset
trigger1 = time <= 0
y = 0
x = 0
[State 2204, qanim]
type = changeanim
trigger1 = time = 83
value = 22056

;coming down
[State 0, snd]
type = playsnd
trigger1 = time = 85
value = s4311,0
channel = 0
ignorehitpause = 1
persistent = 0

;coming down
[State 0, snd]
type = playsnd
trigger1 = time = 91
value = s4311,1
channel = 1
ignorehitpause = 1
persistent = 0

;coming down
[State 0, snd]
type = playsnd
trigger1 = time = 83
value = s2511,0
channel = 2
ignorehitpause = 1
persistent = 0

;coming down
[State 0, snd]
type = playsnd
triggerall = anim = 22056
trigger1 = animelemtime(2) = 0
value = s0,52
channel = 2
ignorehitpause = 1
persistent = 0

[state 3250, thyndah]
type = explod
triggerall = !numexplod(22057)
trigger1 = time = 83
anim = 22057;+(root,facing=1)
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 0,0
bindtime = -1
id = 22057
;supermove = 0
pausemovetime = 70
sprpriority = 3
ontop = 0
ownpal = 1
scale = 2,2
;facing = 1
ignorehitpause = 1
;loop = 1
removetime = -2

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
ignorehitpause = 1

[State 4001, Stop]
type = PosSet
trigger1 = time <= 0
Y = 0

[State 0, damagfe]
type = targetlifeAdd
triggerall = anim = 22056
trigger1 = animelemtime(2) = 0
trigger1 = cond(NumTarget,!(target,ishelper),0)
trigger1 = enemy, Stateno = 22095
;trigger1 = time = 83
value = -65
kill = 1

[State 0, damagfe]
type = targetpoweradd
triggerall = anim = 22056
trigger1 = animelemtime(2) = 0
trigger1 = cond(NumTarget,!(target,ishelper),0)
trigger1 = enemy, Stateno = 22095
;trigger1 = time = 83
value = 1000

[State 13100, Target exploding]
type = TargetState
triggerall = anim = 22056
trigger1 = animelemtime(2) = 0
trigger1 = cond(NumTarget,!(target,ishelper),0)
trigger1 = enemy, Stateno = 22095
;trigger1 = time = 83
value = 28460

[State 13100, HitAdd]
type = HitAdd
triggerall = anim = 22056
trigger1 = animelemtime(2) = 0
;trigger1 = time = 83
value = 1

[State 13100, shake]
type = envshake
triggerall = anim = 22056
trigger1 = animelemtime(2) = 0
;trigger1 = time = 83
time = 20
freq = 200
ampl = 21

[State 3000, debris]
type = helper
trigger1 = enemy,stateno=28470 && !numhelper(28480)
;helpertype = normal
stateno = 28480
ID = 28480
name = "debris"
postype = p2
pos = 0,0
ownpal = 1

[state 2205, end]
type = changestate
triggerall = anim != 1
trigger1 = !animtime;!animtime
value = 0
ctrl = 1

;===========================================================================
;P2 wait
[Statedef 22095]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 6


[State 0, rotate]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12) 

[State 2204, qanim]
type = changeanim2
trigger1 = time <= 0
value =  1

[State 9011, VelAdd]
type = posset
trigger1 = time <= 0
y = -80

;-------------------------------------
;P2 exploding
[Statedef 28460]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
facep2 = 1
sprpriority = 2

;Fixes weird sprite rotation issues when move is done
[State 0, rotate]
type = angleset
trigger1 = 1
value = 1

[State 0, pal]
type = palfx
trigger1 = time = 1
add = 255,255,255
sinadd = -12,-12,-12,-2
time = 3

[State 3025, p2state - killed fatality]
type = changestate
trigger1 = MatchOver
value = 28470
ignorehitpause = 1

[State 50, gethit pose]
type = ChangeAnim2
triggerall = !MatchOver
trigger1 = time = 1
value = 22058 

[State 9011, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 50, 3]
type = ChangeAnim
trigger1 = time = 30
value = cond(selfanimexist(5937),5937,cond(selfanimexist(5052),5052,5030))

[State 9011, Vels]
type = Velset
trigger1 = time=30
X = -7
Y = -3

[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0) && (time >= 52)
y = 0.35
 
[State 2308, end]
type = changestate;selfstate
trigger1 = pos y >= 0 && vel y > 0
value = 5952;5100

;---------------------------------------------------------------------------------------
;Prevent Freezing from Dirty Fireworks
[Statedef 28470]
type = S
movetype= H
physics = N
velset = 0,0

[State 182, 1]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 1

[State 49999, 1]
type = LifeSet
trigger1 = 1
value = 0

[State 49999, 1]
type = PosSet
trigger1 = time > 50
y = 9000

[State 49999, 5]
type = ChangeAnim2
trigger1 = time <= 0
value = 1

[State 444, 0]
type = selfstate
trigger1 = time >=60
value = 5150

;======================================================================
;DIRTY FIREWORKS DEBRIS HELPER
[Statedef 28480]
type    = S
movetype= I
physics = N
anim = 1

[State 200, debris falling]
type = PlaySnd
trigger1 = time=50
value = s2848,0
;volume = 300
persistent = 0

[State 1000, Helper]
type = Helper
trigger1 = time>60 && numhelper(28490)<10 && numhelper(28500)<10
;helpertype = normal
name = "debris_generator"
id = 28490
pos = 0,-20
postype = p1
facing = 1
stateno = 28490
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = time > 70
;-------------------------------
;Debris Generator
[Statedef 28490]
type = A
movetype = I
physics = N
anim = 1

[State 800, size]
type = VarSet
trigger1 = time <= 0
fvar(0) = 0.1*(random%6)

[State 1003, Helper]
type = Helper
trigger1 = time <= 0
;helpertype = normal
name = "debris2"
id = 28500
pos = -60+12*(random%15),-300+10*(random%10)  ;-120+%%
postype = p1
facing = 1
stateno = 28500
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999
ignorehitpause = 1
size.xscale = 0.3+fvar(0)
size.yscale = 0.3+fvar(0)

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = time=2
;-----------
[Statedef 28500]
type = A
movetype = I
physics = N
anim = 28500
velset = 0, 0.5 + 0.2*(random%6)
sprpriority = 3

[state 17100, smoke]
type = explod
triggerall = !numexplod(5930)
trigger1 = time <= 0
anim = Cond(random%2,5930,5932)
id = 5930
pos = 0,10
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
sprpriority = 3
ownpal = 0
removetime = -1
bindtime = -1

[State 1406, No Shadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1415, Hit Floor]
type = trans
trigger1 = time>190 && time<216
trans = addalpha
alpha = 256-9*(time-190), 9*(time-190)

[State 1415, trans]
type = modifyexplod
trigger1 = time>190 && time<216
trans = addalpha
alpha = 256-9*(time-190), 9*(time-190)
ID = 5930

[State 1406, No Shadow]
type = RemoveExplod
trigger1 = time >=216
ID = 5930

[State 1003, DestroySelf]
type = DestroySelf
trigger1 = time >=216

;===========================================================================
;P2 STATE lvl2
[Statedef 2210]
type = A
movetype = H
physics = N
ctrl = 0
velset = -2.5, -2
facep2 = 1

[State 2204, qanim]
type = changeanim2
trigger1 = time <= 0
value =  2193

[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.1

;===========================================================================
;TRUTH BARRAGE
[Statedef 2300]
type = U
movetype = A
physics = N
anim = cond(statetype = S, 2300,23000)
ctrl = 0
velset = 0,0
poweradd = cond(var(54) > 0, -2000,-3000)
sprpriority = 3

;VOICE Snd
[State 250, 1]
type = PlaySnd
trigger1 = time <= 0
value = 0,67   ;21,2
channel = 1

[State 3000, superpause]
type = superpause
trigger1 = time=0
time = 67
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 67

[State 0, Super FX]
type = null;Explod
triggerall = !numexplod(2003)
trigger1 = time <= 0
anim = 2003
id = 2003
pos = -112,60
postype = p1
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Hyper Charge FX]
type = Explod
triggerall = !numexplod(2440)
trigger1 = time <= 0
anim = 2440
id = 2440
pos = 6,-60
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Hyper Charge FX]
type = Explod
triggerall = !numexplod(2441)
trigger1 = time = 10
anim = 2441
id = 2441
pos = 6,-60
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, AssertSpecial]
type = nothitby
trigger1 = 1
value = SCA,AP
persistent = 0
ignorehitpause = 1

[State 2000,Playerpush]
type = playerpush
trigger1 = 1
value = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelemtime(2) < 0
flag = noshadow
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelemtime(2) < 0
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2000, leave ground]
type = statetypeset
trigger1 = animelemtime(4) = 0
statetype = A
physics = N

[State 2000, leave ground]
type = velset
trigger1 = animelemtime(4) = 0
x = 10.3
y = -3.5
[State 2000, fall]
type = veladd
trigger1 = animelemtime(4) >= 0
trigger1 = statetype = A
y = .25

[State 41, Train]
type = AfterImage
trigger1 = animelemtime(2) = 8
time= 99
timegap= 1
framegap= 999
length= 60
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add

[state 2300, end]
type = selfstate
triggerall = animelemtime(4) >= 0
trigger1 = statetype = A
trigger1 = P2BodyDist x < 66
value = 2301
ctrl = 0

[state 2300, end]
type = selfstate
triggerall = statetype = A
trigger1 = pos y >= 0 && vel y >= 0
value = 2302
ctrl = 0

;===========================================================================
;TB FIRST KICK
[Statedef 2301]
type = A
movetype = A
physics = N
anim = 2301
ctrl = 0
sprpriority = 3


[State 0, AssertSpecial]
type = nothitby
trigger1 = 1
value = SCA,AP
persistent = 1
ignorehitpause = 1

;SWING Snd
[State 250, 1]
type = PlaySnd
trigger1 = time <= 0
value = 0,5   ;21,2
channel = 0

[State 2000, fall]
type = veladd
trigger1 = statetype = A
y = .5

[State 620, 3] 
type = HitDef
triggerall = !movecontact
trigger1 = AnimElem = 2 || animelem = 3
attr = S, HA
damage = Ceil(cond(fvar(11) * 50 < 7, 7, fvar(11) * 50)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 1,1  ;16,16
guard.pausetime = 30,30
sparkno = S1;s2719 ;s7030
guard.sparkno = s1
sparkxy = 0,-20
hitsound   = s5,7
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 40
ground.velocity = -9,0
air.velocity = 0,0
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
air.hittime = 40
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 0
fall.recover = 0
forcenofall = 1
id = stateno
kill = 0

[State 802, target]
type = targetstate
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(stateno)
trigger1 = movehit = 1
value = 2305
ignorehitpause = 1
[State 802, target]
type = changestate
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(stateno)
trigger1 = movehit = 1
value = 2303
ignorehitpause = 1

[state 2300, end]
type = selfstate
triggerall = statetype = A
trigger1 = pos y >= 0 && vel y >= 0
value = 2302
ctrl = 0

;===========================================================================
;Truth Barrage fails
[Statedef 2302]
type = S
movetype = I
physics = N
anim = 2302
ctrl = 0
velset = 0,0
sprpriority = 3

[state 2302, snd]
type = playsnd
trigger1 = time <= 0
value = 40,0

[State 2302, set]
type = posset
trigger1 = time <= 0
y = 0

[State 2301, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;TB Assault
[Statedef 2303]
type = A
movetype = A
physics = N
anim = 2303
ctrl = 0
velset = 0,0
sprpriority = 3

[state 2303, teleport]
type = posset
trigger1 = time <= 0
y = 0
x = screenpos x = 120

;VOICE Snd
[State 250, 1]
type = PlaySnd
trigger1 = time <= 0
value = 230,1   ;21,2
channel = 1

[state 2303, targetbind]
type = targetbind
trigger1 = time <= 0
pos = 40,0
time = 1

[state 2303, black]
type = assertspecial
trigger1 = 1
flag = noFG
flag2 = NoBG
flag3 = NoFG
ignorehitpause = 1
persistent = 1
[state 2303, black]
type = assertspecial
trigger1 = 1
flag = nobardisplay
flag2 = globalnoshadow
flag3 = timerfreeze
ignorehitpause = 1
persistent = 1


[State 2000, teleport]
type = posadd
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(8) = 0
trigger3 = animelemtime(13) = 0
trigger4 = animelemtime(18) = 0
trigger5 = animelemtime(23) = 0
trigger6 = animelemtime(28) = 0
trigger7 = animelemtime(33) = 0
trigger8 = animelemtime(39) = 0
trigger9 = animelemtime(44) = 0
trigger10 = animelemtime(49) = 0
trigger11 = animelemtime(54) = 0
trigger12 = animelemtime(59) = 0
trigger13 = animelemtime(64) = 0
trigger14 = animelemtime(69) = 0
trigger15 = animelemtime(74) = 0
trigger16 = animelemtime(78) = 0
x = cond(enemynear,vel x < 0 && facing = 1  || enemynear, vel x > 0 && facing = -1,  110 + (p2bodydist x),  90 + (p2bodydist x))

[State 2000, teleport]
type = turn
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(8) = 0
trigger3 = animelemtime(13) = 0
trigger4 = animelemtime(18) = 0
trigger5 = animelemtime(23) = 0
trigger6 = animelemtime(28) = 0
trigger7 = animelemtime(33) = 0
trigger8 = animelemtime(39) = 0
trigger9 = animelemtime(44) = 0
trigger10 = animelemtime(49) = 0
trigger11 = animelemtime(54) = 0
trigger12 = animelemtime(59) = 0
trigger13 = animelemtime(64) = 0
trigger14 = animelemtime(69) = 0
trigger15 = animelemtime(74) = 0
trigger16 = animelemtime(78) = 0

;HIGH HITDEFS
[State 620, 3] 
type = HitDef
trigger1 = animelemtime(6) = 0
trigger2 = animelemtime(15) = 0
trigger3 = animelemtime(25) = 0
trigger4 = animelemtime(30) = 0
trigger5 = animelemtime(35) = 0
trigger6 = animelemtime(40) = 0
trigger7 = animelemtime(50) = 0
trigger8 = animelemtime(55) = 0
trigger9 = animelemtime(65) = 0
trigger10 = animelemtime(75) = 0
attr = S, HA
damage = Ceil(cond(fvar(11) * 15 < 9, 9, fvar(11) * 15)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 1,1 ;16,16
guard.pausetime = 30,30
sparkno = s7030;s2719 ;s7030
guard.sparkno = s7020
sparkxy = -30,-76
hitsound   = -1;s5,5
guardsound = -1;S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 40
air.hittime  = 40
ground.velocity = 0,0
air.velocity = 0,0
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 0
fall.recover = 0
forcenofall = 1
id = stateno
p2facing = 1
P2stateno = 2309
kill = 0

;LOW HITDEFS
[State 620, 3] 
type = HitDef
trigger1 = animelemtime(10) = 0
trigger2 = animelemtime(20) = 0
trigger3 = animelemtime(45) = 0
trigger4 = animelemtime(60) = 0
trigger5 = animelemtime(70) = 0
trigger6 = animelemtime(80) = 0
attr = S, HA
damage = Ceil(cond(fvar(11) * 15 < 9, 9, fvar(11) * 15)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 1,1  ;16,16
guard.pausetime = 30,30
sparkno = s7030;s2719 ;s7030
guard.sparkno = s7020
sparkxy = -30,-36
hitsound   = -1;s5,5
guardsound = -1;S6,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 40
air.hittime  = 40
ground.velocity = 0,0
air.velocity = 0,0
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 0
fall.recover = 0
forcenofall = 1
id = stateno
P2stateno = 2309
p2facing = 1
kill = 0


[State 2301, end]
type = changeanim
triggerall = anim = 2303
trigger1 = !animtime
value = 23031
elem = 52;2
[State 802, target]
type = null;targetstate
triggerall = animelemtime(79) < 0
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(stateno)
trigger1 = movehit = 1
value = 2303
ignorehitpause = 1

[State 0, kick snds]
type = playsnd
triggerall = cond(numtarget(stateno),(!target,ishelper),0)
trigger1 = movecontact && hitpausetime = 1
value = s5,6
channel = 9
ignorehitpause = 1
persistent = 1
loop = 0
[State 0, kick snds]
type = playsnd
triggerall = cond(numtarget(stateno+1),(!target,ishelper),0)
trigger1 = movecontact && hitpausetime = 1
value = s5,5
channel = 10
ignorehitpause = 1
persistent = 1
loop = 0

[State 802, target]
type = targetstate
triggerall = anim = 23031
triggerall = animelemtime(79) >= 0
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(stateno)
trigger1 = movehit = 1
value = 2306
ignorehitpause = 1


[State 802, target]
type = targetstate
triggerall = anim = 23031
triggerall = animelemtime(79) >= 0
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(stateno+1)
trigger1 = movehit = 1
value = 2306
ignorehitpause = 1

[State 0, AssertSpecial]
type = nothitby
trigger1 = 1
value = SCA,AA
persistent = 1
ignorehitpause = 1

[State 2000,Playerpush]
type = playerpush
trigger1 = 1
value = 1

[State 2301, end]
type = changestate
triggerall = anim = 23031
trigger1 = !animtime
value = 2304
ctrl = 0

;===========================================================================
;TB ENDER
[Statedef 2304]
type = A
movetype = A
physics = N
anim = 2304
ctrl = 0
velset = 1.5,-2;0.3
sprpriority = 3


[State 0, pos]
type = posadd
trigger1 = time <= 0
x = -150;40

[State 251, teleport snd]
type = playsnd
trigger1 = time <= 0
value = 2302,0
channel = 0

[State 198, fly up]
type = playsnd
trigger1 = time <= 0
value = 2907,0
channel = 1

;VOICE Snd
[State 250, 1]
type = PlaySnd
trigger1 = time <= 0
value = 215,4  ;21,2
channel = 2

;VOICE Snd
[State 250, 1]
type = PlaySnd
trigger1 = animelemtime(9) = 0
value = 230,3   ;21,2
channel = 2

[State 0, pos]
type = veladd
trigger1 = animelemtime(10) < 0
y = 0.02

[State 2305, scale]
type = angledraw
trigger1 = 1
scale = fvar(12),fvar(12)
ignorehitpause = 1 
persistent = 1

[state 2303, black]
type = assertspecial
trigger1 = 1
flag = noFG
flag2 = NoBG
flag3 = NoFG
ignorehitpause = 1
persistent = 1
[state 2303, black]
type = assertspecial
trigger1 = 1
flag = nobardisplay
flag2 = globalnoshadow
flag3 = timerfreeze
ignorehitpause = 1
persistent = 1

;SWING Snd
[State 250, 1]
type = PlaySND
trigger1 = animelemtime(9) = 0
value = 0,5   ;21,2

;spin snd
;[State 250, 1]
;type = PlaySND
;trigger1 = animelemtime(6) = 0
;trigger2 = animelemtime(12) = 0
;trigger3 = animelemtime(19) = 0
;trigger4 = animelemtime(26) = 0
;trigger5 = animelemtime(33) = 0
;trigger6 = animelemtime(40) = 0
;trigger7 = animelemtime(47) = 0
;trigger8 = animelemtime(54) = 0
;value = 5052,0

[State 0, camera]
type = screenbound
trigger1 = time <= 0 ;animelemtime(59) = 0
value = 0
movecamera = 1,0

[State 2304, bind]
type = posset
trigger1 = animelemtime(10) = 0
y = 0
[State 2304, bind]
type = velset
trigger1 = animelemtime(10) = 0
y = 0
x = 0

[State 2304, bind]
type = targetbind
trigger1 = animelemtime(10) = 0
pos  = 40,0


[State 620, 3] 
type = HitDef
triggerall = enemynear,life <=60
trigger1 = animelemtime(10) = 0
attr = S, HA
damage = Ceil(cond(fvar(11) * 180 < 60, 60, fvar(11) * 120)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 38,38  ;16,16
guard.pausetime = 30,30
sparkno = s2719;s2719 ;s7030
guard.sparkno = s7020
sparkxy = -30,-76
hitsound   = s5,7
guardsound = S6,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 40
ground.velocity = -8,2
air.velocity = 0,0
envshake.time = 0
envshake.freq = 0
envshake.ampl = 0
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
air.fall = 0
fall.recover = 1
id = stateno
p2facing = 1
kill = 1
p1sprpriority = 3
p2sprpriority = 2

[State 620, 3] 
type = HitDef
triggerall = enemynear,life >60
trigger1 = animelemtime(10) = 0
attr = S, HA
damage = Ceil(cond(fvar(11) * 180 < 60, 60, fvar(11) * 120)), 0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 38,38  ;16,16
guard.pausetime = 30,30
sparkno = s2719;s2719 ;s7030
guard.sparkno = s7020
sparkxy = -30,-76
hitsound   = s5,7
guardsound = S6,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 40
ground.velocity = -8,2
air.velocity = 0,0
envshake.time = 27
envshake.freq = 20
envshake.ampl = 89
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 1
air.fall = 0
fall.recover = 1
id = stateno
p2facing = 1
kill = 1
p1sprpriority = 3
p2sprpriority = 2

[State 802, target]
type = targetstate
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(stateno)
trigger1 = movehit = 1
value = 2307
ignorehitpause = 1

[State 0, camera]
type = screenbound
trigger1 = animelemtime(11) > 0
value = 1
movecamera = 1,1

[State 2304, scale]
type = varset;varadd
;triggerall = fvar(12) != 1.5
trigger1 = animelemtime(10) < 0
fvar(12) = cond(fvar(12) + 0.05 > 1.35, 1.35,fvar(12) + 0.05);0.05;0.005
ignorehitpause = 1
persistent = 1
[State 2304, scale]
type = varadd
triggerall = fvar(12) > 1
trigger1 = animelemtime(10) >= 0
fvar(12) = -0.04
ignorehitpause = 0
persistent = 1

[State 2304, scale]
type = sprpriority
trigger1 = animelemtime(11) >= 0
value = 1

[State 2304, scale]
type = varset
trigger1 = !animtime
trigger2 = fvar(12) < 1
fvar(12) = 1
;;juggle limit LVL2
[State 0, VarAdd]
type = VarAdd
trigger1 = !animtime
var(1) = 30
Ignorehitpause = 1
persistent = 0

[State 2301, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;P2
[Statedef 2305]
type = U
movetype = H
physics = N
ctrl = 0
velset = 0,0
sprpriority = 1

[state 2305, anim]
type = changeanim
trigger1 = time <= 0
value = cond(statetype = A,5030,5002)

[State 2305, scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12)
ignorehitpause = 1 
persistent = 1

[state 0,set]
type = posset
trigger1 = enemynear,stateno = 2301 || enemynear,stateno = 2303
trigger2 = enemynear,movetype = H
y = 0

[State 0, safety]
type = velset
trigger1 = enemynear,movetype = H
x = -3

[State 0, safety]
type = selfstate
trigger1 = Time > 30
value = 5020;cond(statetype = S,5020,5030)

;===========================================================================
;P2 SCALE
[Statedef 2306]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0.1,0.7
sprpriority = 2

[State 2305, scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12)
ignorehitpause = 1 
persistent = 1

[state 2306, anim]
type = changeanim2
trigger1 = 1
value = 2305

[state 0,set]
type = posset
trigger1 = time <= 0
y = 0

;===========================================================================
;P2 SCALE
[Statedef 2307]
type = S
movetype = H
physics = N
ctrl = 0
anim = 5030
velset = 0,0
sprpriority = 2

[state 0,set]
type = posset
trigger1 = 1
y = 0

;Changeanim to flip ko if anim exists
[state 2306, anim]
type = changeanim
triggerall = anim = 5030
trigger1 = time = 10;!animtime Changed to fix issues with different air gethit methods
value = 5100

[State 2305, scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12)
ignorehitpause = 1 
persistent = 1

;Changeanim to flip ko if anim exists
[state 2306, anim]
type = changeanim
triggerall = anim = 5100
triggerall = selfanimexist(5937)
trigger1 = !animtime
value = 5937
[state 2306, anim]
type = changeanim
triggerall = anim = 5100
triggerall = !selfanimexist(5937)
trigger1 = !animtime
value = 5160

[state 2306, anim]
type = changestate
trigger1 = anim = 5160 || anim = 5937
value = 2308

;===========================================================================
;FALLING P2 SCALE
[Statedef 2308]
type = S
movetype = H
physics = N
ctrl = 0
velset = -3,-9
sprpriority = 2

[State 0, inbul]
type = nothitby
trigger1 = 1
value = SCA,AA

[State 2305, scale]
type = angledraw
trigger1 = 1
scale = enemynear,fvar(12),enemynear,fvar(12)
ignorehitpause = 1 
persistent = 1

[state 0,set]
type = veladd
trigger1 = 1
y = 0.5

[State 2308, end]
type = changestate;selfstate
trigger1 = pos y >= 0 && vel y > 0
value = 5952;5100



;===========================================================================
; HITA_SHAKE - Changing anim
;===========================================================================
;---------------------------------------------------------------------------
; Stand get-hit
[Statedef 2309]
type    = U
movetype= H
physics = N
velset = 0,0
sprpriority = 1


[State 0, stand]
type = statetypeset
trigger1 = enemynear,stateno = 2303
statetype = S

[state 0,set]
type = posset
trigger1 = enemynear,stateno = 2303
y = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim2
trigger1 = 1
value = cond(gethitvar(groundtype) = 1,23051,23052)

[State 0, stand]
type = statetypeset
trigger1 = enemynear,movetype = H
statetype = S

[State 0, safety]
type = selFstate
trigger1 = enemynear,movetype = H
value = 5020;cond(statetype = S,5020,5030)

;===========================================================================
;Resentful Angel
[Statedef 2850]
type = A
movetype = A
physics = N
anim = 2850
ctrl = 0
velset = 0,0
sprpriority = 5
poweradd = cond(var(54) > 0, -2000,-3000)
facep2 = 1

[State 3000, superpause]
type = superpause
trigger1 = time=0
time = 30
p2defmul = 1
unhittable = 1
anim = -1
sound = s2350,0
darken = 0
movetime = 30

[State 2850, move]
type = velset
trigger1 = animelem = 2
x = 8.5
[State 2850, move]
type = velset
trigger1 = animelem = 3
x = 0

[State 2100, Supersnd]
type = playsnd
trigger1 = animelemtime(1) = 0
value = 2350,0
channel = 0
ignorehitpause = 1

[State 2100, Supersnd]
type = playsnd
trigger1 = animelemtime(2) = 0
value = 5,10
channel = 1
ignorehitpause = 1

[State 0, Hyper Charge FX]
type = Explod
triggerall = !numexplod(2440)
trigger1 = time <= 0
anim = 2440
id = 2440
pos = 6,-70
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelemtime(2) <= 0
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 620, 3] 
type = HitDef
triggerall = (var(26)&2**4)=0 ;Enemy in Juggle State
triggerall = AnimElem = 2
triggerall = enemynear,stateno != [120,155] ;Blocking states
triggerall = enemynear,stateno != [40,52] ;Jumping states
trigger1 = 1
attr = S, HT
damage = 0,0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = M
animtype = Hard
priority = 4, Hit
pausetime = 0,0
guard.pausetime = 0,0
sparkno = 1
guard.sparkno = 1
sparkxy = -30,-50
ground.type = High
ground.slidetime = 12
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 1
fall.recover = 0
id = 2850
kill = 0

[State 620, 3] 
type = HitDef
triggerall = (var(26)&2**4)>0 ;Enemy in Juggle State
triggerall = AnimElem = 2
triggerall = enemynear,stateno != [120,155] ;Blocking states
triggerall = enemynear,stateno != [40,52] ;Jumping states
trigger1 = 1
attr = S, HT
damage = 0,0
;Ceil(cond(fvar(11) * 45 < 7, 7, fvar(11) * 45)), 0
;45,0
hitflag = MAF
animtype = Hard
priority = 4, Hit
pausetime = 0,0
guard.pausetime = 0,0
sparkno = s1
guard.sparkno = s1
sparkxy = -30,-50
ground.type = High
ground.slidetime = 12
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= 0,0
givepower = 35,35
yaccel = 0.5
fall = 0
air.fall = 1
fall.recover = 0
id = 2850
kill = 0

[State 802, target]
type = targetstate
triggerall = enemynear,stateno != 2853
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2850)
trigger1 = movehit = 1
value = 2853
ignorehitpause = 1

[State 802, target]
type = changestate
triggerall = anim != 2851
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(2850)
trigger1 = movehit = 1
value = 2851
ignorehitpause = 1

[State 0, Block]
type = attackdist
trigger1 = enemynear,stateno = [120,155]
value  = 1

[State 2000,Playerpush]
type = playerpush
trigger1 = 1
value = 1

[State 2100, for "Emo"] 
type = VarSet
trigger1 = time <= 0
var(54) = 0

[State 2850, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Resentful Angel PT1
[Statedef 2851]
type = A
movetype = A
physics = N
anim = 2851
ctrl = 0
velset = 0,0
sprpriority = 5
facep2 = 1

[State 2851,stopsnd]
type = stopsnd
trigger1 = stateno = 2851
channel = 1
ignorehitpause = 1
persistent = 1
[State 2851,stopsnd]
type = stopsnd
trigger1 = stateno = 2851
channel = 2
ignorehitpause = 1
persistent = 0

[State 2851]
type = assertspecial
trigger1 = !animtime
flag = Invisible
ignorehitpause = 1
persistent = 1

[State 2851, targetstate]
type = targetstate
trigger1 = 1
value = 2853
ignorehitpause = 1
persistent = 1

[State 2000,Playerpush]
type = playsnd
trigger1 = anim = 2851
trigger1 = time <= 0
value = 800,1
channel = 0
ignorehitpause = 1
persistent = 1

[State 2851,next]
type = changestate
trigger1 = !animtime
value = 2852
ctrl = 0

;===========================================================================
;Resentful Angel PT2
[Statedef 2852]
type = A
movetype = A
physics = N
anim = 1
ctrl = 0
velset = 0,0
sprpriority = 5
facep2 = 1

[State 2196, hitadd]
type = playsnd
trigger1 = time <= 0
trigger2 = time = 9
trigger3 = time = 15
trigger4 = time = 20
trigger5 = time = 31
trigger6 = time = 36
trigger7 = time = 41
trigger8 = time = 49
trigger9 = time = 59
trigger10 = time = 66
trigger11 = time = 73
value = s0,61
channel = 1
;volume = 355
volumescale = 200
ignorehitpause = 1
persistent = 1

[State 2196, hitspark]
type = explod
;trigger1 = time  <= 73
trigger1 = time <= 0
trigger2 = time = 9
trigger3 = time = 15
trigger4 = time = 20
trigger5 = time = 31
trigger6 = time = 36
trigger7 = time = 41
trigger8 = time = 49
trigger9 = time = 59
trigger10 = time = 66
trigger11 = time = 73
id = 7031;7030
anim = 7031+(1)*(random%3)
pos = 70,(target,const(size.mid.pos.y)) + (random%15+random%30);-70 ;random%200 - random%200, -random%200
scale = 1+(random%1),1+(random%1)
postype = P2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ontop = 1
facing = -1
persistent = 1

[State 2196, hitadd]
type = varadd
trigger1 = time = 73
fvar(13) = 1

[State 2196, life]
type = targetlifeadd
trigger1 = time = 73
value = -Ceil(cond(fvar(11) * 450 < 250, 250, fvar(11) * 450))
kill = 1



[State 2196, hitadd]
type = hitadd
trigger1 = time <= 73
value = 1

[State 2854, enemy]
type = targetstate
trigger1 = time >= 73
value = 2855
ignorehitpause = 1
persistent = 1

[State 2851,end]
type = changestate
trigger1 = time >= 73
value = 2854
ctrl = 0

;===========================================================================
;P2 Resentful Angel 1
[Statedef 2853]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0,0
facep2 = 1

;[State 0, invisible]
;type = assertspecial
;triggerall = enemynear, stateno = 2852
;trigger1 = 1
;flag = Invisible
;ignorehitpause = 1
;persistent = 1

[State 0, HitOverride] ; To fix issues when colliding with projectiles simultaniously 
type = HitOverride
trigger1 = 1
attr = SCA,AA        ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
slot = 0
stateno = 2191
time = 1
forceair = 0
ignorehitpause = 1
persistent = 1


[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 2191, posset]
type = posset
trigger1 = 1
y = 0

[State 2191, velset]
type = velset
trigger1 = animelemtime(2) =0
x = 0

[State 2191, velset]
type = velset
trigger1 = animelemtime(6) =0
x = 0

[State 2191, anim]
type = changeanim2
trigger1 = 1
value = cond(enemynear,stateno = 2852,1, 2191)

;===========================================================================
;Resentful Angel PT3
[Statedef 2854]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 5
facep2 = 1

[State 2191, anim]
type = changeanim
trigger1 = time <= 0
value = cond(WinKO,2853,2852)

[State 2854, cleanup]
type = removeexplod
trigger1 = numexplod(7031)
id = 7031

;[State 2000, teleport]
;type = posadd
;triggerall = !(enemynear,screenpos x > 200 && (P2BodyDist X) <40) ;Fixes issues in the corner
;trigger1 = time <= 0
;x = cond(enemynear,vel x < 0 && facing = 1  || enemynear, vel x > 0 && facing = -1,  110 + (p2bodydist x),  90 + (p2bodydist x))
;

[State 2854, adjust]
type = posadd
trigger1 = animelemtime(5) = 0
X = -28
ignorehitpause = 1
persistent = 1

[State 2854, removeexplod]
type = removeexplod
trigger1 = time = 1
id = 7030
ignorehitpause = 1 
persistent = 1

[State 2196, hitadd]
type = playsnd
trigger1 = time <= 0
value = 950,0
channel = 2

[State 2854, enemy]
type = targetstate
triggerall = !WinKo
trigger1 = time <= 0
value = 2855
ignorehitpause = 1
persistent = 0

[State 2854, wnd]
type = targetstate
triggerall = !WinKo
trigger1 = anim = 2852
trigger1 = !animtime
;trigger1 = !animtime
value = 2856 ;cond(enemynear,life > 0, 2856,2858) ;Get up if not dead
ignorehitpause = 1
persistent = 0

[State 2854, wnd]
type = changestate
triggerall = !WinKo
triggerall = anim = 2852
triggerall = !WinKO; If enemy isn't dead
trigger1 = !animtime
value = 0
ctrl = 1

[State 2854, keep the pose!]
type = selfstate
trigger1 = WinKO
value = 28540
ctrl = 1
ignorehitpause = 1
persistent = 0

;===========================================================================
;Prevent Freezing from RA
[Statedef 28540]
type = A
movetype= A
physics = N
velset = 0,0
anim = 2853
ctrl = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 2854, keep the pose!]
type = varadd ;set
triggerall = (var(26)&2**16)=0 ;Resentful Angel
trigger1 = time <= 0
var(26) = 2**16
ignorehitpause = 1
persistent = 0

[State 2854, wnd]
type = targetstate
trigger1 = enemynear,stateno != 2858
trigger1 = time = 20
;trigger1 = !animtime
value = 2858 ;cond(enemynear,life > 0, 2856,2858) ;Get up if not dead
ignorehitpause = 1
persistent = 0

[state 181, 1]
type = assertspecial
trigger1 = time < 20
flag = roundnotover

[State 444, 0]
type = selfstate
trigger1 = time >=180
value = 180
ctrl = 1

;===========================================================================
;R.A Kanji
[Statedef 2853001]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = cond(root,var(59) = 0, 2853001,2853002)
facep2 = 1
sprpriority = cond(root,var(13) = 2, -2,-5)

[State 0, shadow]
type = assertspecial
trigger1 =1 
flag = noshadow
ignorehitpause = 1
persistent = 1

[State 0, fade]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256+time,0+(time*5)
ignorehitpause = 1
persistent = 1

[State 2854, wnd]
type = destroyself
trigger1 = root,roundstate > 3
trigger2 = root,var(13) = 0 && time > 40;SF3
trigger3 = root,var(13) = 1 && time > 40
trigger4 = root,var(13) = 2 && time > 90 ;Super DBZ
;===========================================================================
;P2 Resentful Angel 2
[Statedef 2855]
type = S
movetype = H
physics = N
anim = 5110
ctrl = 0
velset = 0,0
facep2 = 1

;[State 2855,anim]
;type = changeanim2
;trigger1 = anim != 2853 
;value = 2853

[state 2855, posadd]
type = posadd
trigger1 =time = 0
x = -20

;===========================================================================
;---------------------------------------------------------------------------
;P2: R.A HIT_LIEDOWN
[Statedef 2856]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = time <= 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time <= 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time <= 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = time <= 0

[State 5110, 5]
type = PosSet
trigger1 = time <= 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = time <= 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 8]
type = VelSet
trigger1 = time <= 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = time <= 0
sysvar(0) = 0
[State 5110, 11] ;If alive
type = SelfState
triggerall = alive
trigger1 = time <= 0
value = 5120

;---------------------------------------------------------------------------
;P2:Send to death
[Statedef 2858]
type = A
movetype= H
physics = N
velset = 0,0
anim = 5110

[State 182, 1]
type = screenbound
trigger1 = 1
movecamera = 0,1
value = 0

[State 49999, 1]
type = LifeSet
trigger1 = 1
value = 0

[State 444, 0]
type = selfstate
trigger1 = time >=120
value = 5150

;===========================================================================
;Eternal Uniter
[Statedef 30500]
type = S
movetype = A
physics = N
anim = 30500
ctrl = 0
poweradd = cond(var(54) > 0, -1000,-2000)
sprpriority = 6
velset = 0,0

[State 100, removedust]
type = removeexplod
triggerall = numexplod(100)
trigger1 =time = 0
ID = 100


[State 3000, superpause]
type = superpause
trigger1 = time=0
time = 189
p2defmul = 1
unhittable = 1
anim = -1
sound = -1;s2350,0
darken = 0
movetime = 189
ignorehitpause =0
persistent = 0

[State 0, FX]
type = Helper
triggerall = var(54) > 0
triggerall = !numhelper(30502)
trigger1 = anim = stateno
trigger1 = animelemtime(60) = 0
id = 30502
stateno = 30502
name = "Eternal Uniter Projectile"
pos = 70,-110
postype = p1
ignorehitpause = 1
persistent = 0


[State L200, 1] ;Swing SND
type = PlaySnd
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(4) = 0
value = 0, 1
channel = 0
volumescale = 200

[State 200, 1] ;voice
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = animelemtime(2) = 0
value = 210,6
channel = 1
volumescale = 200

[State 200, 1] ;voice
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = animelemtime(5) = 0
value = 210,2
channel = 1
volumescale = 200

;====================================================
;ORIGINAL PLAYSNDS
;====================================================

[State 200, 1] ;Super SND
type = PlaySnd
triggerall = var(52) = 0 ;Caz toggle is off
trigger1 = time = 10
value = s2350,0
channel = 2
volumescale = 200

[State 200, 1] ;Sword SND
type = PlaySnd
triggerall = var(52) = 0 ;Caz toggle is off
trigger1 = animelemtime(5) = 0
value = 0, 61
channel = 0
volumescale = 200

[State 200, 1] ;charge
type = PlaySnd
triggerall = var(52) = 0 ;Caz toggle is off
trigger1 = animelemtime(27) = 0
value = 800,1
channel = 0
loop = 0
volumescale = 200

[State 200, 1] ;charge
type = PlaySnd
triggerall = var(52) = 0 ;Caz toggle is off
trigger1 = animelemtime(33) = 0
value = 30500,0
channel = 0
loop = 0
volumescale = 200

[State 200, 1] ;charge
type = PlaySnd
triggerall = var(52) = 0 ;Caz toggle is off
trigger1 = animelemtime(13) = 0; animelemtime(1) >= 0 && animelemtime(33) < 0
value = 30500,1
channel = 1
loop = 1
pan = 1
volumescale = 200

[State 200, 1] ;chargestop
type = stopSnd
triggerall = var(52) = 0 ;Caz toggle is off
trigger1 = animelemtime(60) = 0
channel = 2

[State 200, 1] ;charge
type = PlaySnd
triggerall = var(52) = 0 ;Caz toggle is off
trigger1 = animelemtime(60) = 0
value = 0,53
channel = 1

[State 200, 1] ;charge
type = PlaySnd
triggerall = var(52) = 0 ;Caz toggle is off
trigger1 = animelemtime(60) = 0
value = 30500,2
channel = 2

[State 200, 1] ;Swing SND
type = PlaySnd
triggerall = var(52) = 0 ;Caz toggle is off
trigger1 = animelemtime(60) = 0
value = 0,52
channel = 0

;====================================================

;====================================================
;NEW PLAYSNDS
;====================================================

[State activation SND]
type = playsnd
triggerall = var(52) = 1 ;Caz toggle is on
trigger1 = animelemtime(2) = 0
value = s30700,1
persistent = 0

[State burning hand SND]
type = playsnd
triggerall = var(52) = 1 ;Caz toggle is on
trigger1 = animelemtime(5) = 0
value = s30700,3
persistent = 0

[State bass SND]
type = playsnd
triggerall = var(52) = 1 ;Caz toggle is on
trigger1 = animelemtime(5) = 0
value = s30700,4
persistent = 0

[State anticipation SND]
type = playsnd
triggerall = var(52) = 1 ;Caz toggle is on
trigger1 = animelemtime(42) = 0
value = s30700,2
persistent = 0

;====================================================


[State 0, Hyper Charge FX]
type = Explod
triggerall = !numexplod(2440)
trigger1 = time <= 0
anim = 2441
id = 2440
pos = 6,-60
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 6
ontop = 1
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelemtime(58) < 0
flag = noshadow
flag2 = nomusic
persistent = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = animelemtime(58) < 0
flag = noBG
flag2 = noFG
flag3 = nobardisplay
persistent = 1
ignorehitpause = 1

[State 0, AssertSpecial]
type = nothitby
trigger1 = animelemtime(63) < 0
value = SCA,AA,AP,AT
time = 1
persistent = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = hitby
trigger1 = animelemtime(63) >= 0
value = SCA,AA,AP,AT
time = 1
persistent = 1
ignorehitpause = 1

[State 0, posadd]
type = posadd
trigger1 = animelemtime(54) = 0
x = 9

[State 0, posadd]
type = posadd
trigger1 = animelemtime(55) = 0
x = 4

[State 0, posadd]
type = posadd
trigger1 = animelemtime(56) = 0
x = 7

[State 0, posadd]
type = posadd
trigger1 = animelemtime(57) = 0
x = 16

[State 0, posadd]
type = posadd
trigger1 = animelemtime(58) = 0
x = 32

[State 0, posadd]
type = posadd
trigger1 = animelemtime(59) = 0
x = 16

[State 0, posadd]
type = posadd
trigger1 = animelemtime(70) = 0
x = -13

[State 0, posadd]
type = posadd
trigger1 = animelemtime(71) = 0
x = -30

[State 0, posadd]
type = posadd
trigger1 = animelemtime(72) = 0
x = -16

[State 0, posadd]
type = posadd
trigger1 = animelemtime(73) = 0
x = -11

;animate through blur anim on hitpause code (only use this if an attack can hit on a blur frame) this will be the only example given
    [State 200, Time Offset]
    type = VarSet
    trigger1 = moveContact = 1
    var(15) = Time
    ignorehitpause = 1
    persistent = 0

    [State 200, Play Anim]
    type = ChangeAnim
    triggerall = AnimElemTime(64) >= 0 && AnimElemTime(65) <= 0 ;(2)would be the blur frame while (3) is the nonblur
    trigger1 = hitPauseTime = [1,33  - (7 - var(15))] ;[1,10 - (5 - var(15))] means [1,10 {change the 10 to the hitpausetime} - (5 {change the 5 to how long it takes before you get to the frame you want the pause to stay on}- var(15))]
    value = anim
    elem = 65
    ignorehitpause = 1
;end blur code

[State 400, 2]
type = HitDef
triggerall = prevstateno != 2000
triggerall = animelemtime(60) >= 0 && animelemtime(64) < 0
triggerall = var(54) > 0
trigger1 = !movecontact
attr = S, HA
hitflag = MAFD
guardflag = MA
animtype = hard
priority = 4, Hit
damage = Ceil(cond(fvar(11) * 281 < 7, 7, fvar(11) * 281)), 30
;Ceil(cond(fvar(11) * (260+cond(var(54) >0,10,0)) < 70, 70, fvar(11) *  (260+cond(var(54) >0,40,0)))), 20
;Ceil(cond(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 0
;18, 0
pausetime = 33,33
guard.pausetime = 10,40
sparkno = s1;s7010
guard.sparkno = s1;s7000
;sparkxy = -10,-33
hitsound   = s30500 + 200*(var(52) = 1),3 + 2*(var(52) = 1)
;hitsound   = s30500,3
guardsound = S6,0
ground.type = low
ground.slidetime = 8  + cond(var(54) > 0, 3,0)
ground.hittime = 8  + cond(var(54) > 0, 3,0)
ground.velocity = -2.3  ;-3
ground.cornerpush.veloff = -2.9 *cond(var(54) > 0,3,1)
guard.hittime = 7
guard.velocity = -4.5
air.velocity = -2,-2
air.animtype = back
getpower= 0,0 ;ceil(40 * cond(var(54) > 0, fvar(6),1)), ceil(35 * cond(var(54) > 0, fvar(6),1))
givepower = 35,35
yaccel = 0.5
;Control P2 during Winposes system by altoiddealer
fall.envshake.freq = TeamSide ;Optional... but recommended as another failproof
fall.envshake.ampl = ID ;REQUIRED
ID = 30500

[State 400, 2]
type = HitDef
triggerall = prevstateno != 2000
triggerall = animelemtime(60) >= 0 && animelemtime(64) < 0
triggerall = var(54) <= 0
trigger1 = !movecontact
attr = S, HA
hitflag = MAFD
guardflag = MA
animtype = hard
priority = 4, Hit
damage = Ceil(cond(fvar(11) * 201 < 7, 7, fvar(11) * 201)), 25
pausetime = 33,33
guard.pausetime = 10,40
sparkno = s1;s7010
guard.sparkno = s1;s7000
;sparkxy = -10,-33
hitsound   = s30500 + 200*(var(52) = 1),3 + 2*(var(52) = 1)
;hitsound   = s30500,3
guardsound = S6,0
ground.type = low
ground.slidetime = 8  + cond(var(54) > 0, 3,0)
ground.hittime = 8  + cond(var(54) > 0, 3,0)
ground.velocity = -2.3  ;-3
ground.cornerpush.veloff = -2.9 *cond(var(54) > 0,3,1)
guard.hittime = 7
guard.velocity = -4.5
air.velocity = -2,-2
air.animtype = back
getpower= 0,0 ;ceil(40 * cond(var(54) > 0, fvar(6),1)), ceil(35 * cond(var(54) > 0, fvar(6),1))
givepower = 35,35
yaccel = 0.5
;Control P2 during Winposes system by altoiddealer
fall.envshake.freq = TeamSide ;Optional... but recommended as another failproof
fall.envshake.ampl = ID ;REQUIRED
ID = 30500


[State 400, 2]
type = HitDef
triggerall = prevstateno = 2000
triggerall = animelemtime(60) >= 0 && animelemtime(64) < 0
trigger1 = !movecontact
attr = S, HA,HP
hitflag = MAFD
guardflag = MA
animtype = hard
priority = 4, Hit
damage = Ceil(cond(fvar(11) * 250 < 100, 100, fvar(11) * 250)), 20
;Ceil(cond(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 0
;18, 0
pausetime = 33,33
guard.pausetime = 10,40
sparkno = s1;s7010
guard.sparkno = s1;s7000
;sparkxy = -10,-33
hitsound   = s30500 + 200*(var(52) = 1),3 + 2*(var(52) = 1)
;hitsound   = s30500,3
guardsound = S6,0
ground.type = low
ground.slidetime = 8  + cond(var(54) > 0, 3,0)
ground.hittime = 8  + cond(var(54) > 0, 3,0)
ground.velocity = -2.3  ;-3
ground.cornerpush.veloff = -2.9 *cond(var(54) > 0,3,1)
guard.hittime = 7
guard.velocity = -4.5
air.velocity = -2,-2
air.animtype = back
getpower= 0,0 ;ceil(40 * cond(var(54) > 0, fvar(6),1)), ceil(35 * cond(var(54) > 0, fvar(6),1))
givepower = 35,35
yaccel = 0.5
;Control P2 during Winposes system by altoiddealer
fall.envshake.freq = TeamSide ;Optional... but recommended as another failproof
fall.envshake.ampl = ID ;REQUIRED
ID = 30500

[State 0, EnvShake]
type = EnvShake
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(stateno)
trigger1 = movecontact
time = 20
freq = 60
ampl = -20
phase = 120
ignorehitpause = 1
persistent = 0

[State 200,Hitsparks]
type = explod
triggerall = cond(numtarget,!(target,IsHelper),0)
triggerall = numtarget(stateno)
trigger1 = movecontact
anim = cond(movehit,285111,7000)
postype = P2
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
pos = 20,-40 ;cond(anim = 250,66,57), cond(anim = 250,-84,-88)
id = 530500
removetime = -2
ontop = 1
bindtime = 1
sprpriority = 7
removeongethit = 0
Ignorehitpause = 1
persistent = 0

[state 52, Land FX]
type = helper
trigger1 = animelemtime(60) = 0
name = "LandFX"
StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 3;99999
pausemovetime = 3;99999
ignorehitpause = 0

[State 0, dust]
type = explod
triggerall = animelemtime(60) >= 0 && animelemtime(68) < 0
trigger1 = !numexplod(305001112)
id = 305001112
anim = 1112
pos = 30,0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
ontop = 1
scale = 3-(0.0025*time),3-(0.0025*time)
removetime = -2
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1

[State 0, size]
type = modifyexplod
trigger1 = numexplod(305001112)
id = 305001112
;scale = 3-(0.0075*time),3-(0.0075*time)
scale = 3-(0.0125*time),3-(0.0125*time)
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Eternal Uniter FX
[Statedef 30502]
type = A
movetype = A
physics = N
anim = 30501
ctrl = 0
sprpriority = 5
velset = 11,0

[State 0, Projectile Guarding assistance]
type = Projectile
;trigger1 = 1 ; this is for beams or moves that are basically full screen
trigger1 = (P2BodyDist X = [-90,90]) && (P2BodyDist Y = [-90,90])
ProjID = 93999999999
projanim = 1
projremovetime = 2
offset = -400,0
postype = p1
attr = A,SP        ;change this to whatever your projectile is set
ignorehitpause = 1
guardflag = A
guard.dist = 1999
projedgebound = 1600
projstagebound = 1600

;Added to constantly update this var
[State 802, cinematic contingency]
type = varset
trigger1 = var(37) != root,var(37)
var(37) = root,var(37)
ignorehitpause = 1
persistent = 1

[State 1010, ParentVarAdd - for 'dmg dampening']
type = ParentVarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 908, NoShadow]
type	= Trans
trigger1 = Root, Var(49) != 0
trans	= addalpha
alpha = 200,128
ignorehitpause = 1


[State 1061, NoShadow]
type = Trans
trigger1 = root,var(2)=1
trans = none
ignorehitpause = 1

[State 1061, NoShadow]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1061, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
time = 1
value = SCA, NA, SA, HA, NT, ST, HT
ignorehitpause = 1

[State 1061, HitBy]
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP
time = 1
ignorehitpause = 1

[State 1061, HitOverride]
type = HitOverride
trigger1 = Time >= 0
slot = 1
time = 1
stateno = stateno
attr = SCA, NP, SP, HP
ignorehitpause = 1

[State 1315, image]
type = afterimage
trigger1 = time <= 0
time = 999
timegap = 1
framegap = 2
length = 5
trans = add
ignorehitpause = 1

[State 3005, hit]
type = hitdef
triggerall = !movecontact
trigger1 = root,var(37) = 0
trigger1 = var(37) = 0
attr = S, HA,HP
hitflag = MAF
guardflag = MA
animtype = hard
priority = 4, Hit
damage = ceil(cond(root,fvar(11) * 50 < 7, 7, root,fvar(11) * 50)), 30
;Ceil(cond(fvar(11) * 18 < 7, 7, fvar(11) * 18)), 0
;18, 0
pausetime = 33,33
guard.pausetime = 10,40
sparkno = s285111;s7010
guard.sparkno = s1;s7000
;sparkxy = -10,-33
hitsound   = s30500 + 200*(root,var(52) = 1),3 + 2*(root,var(52) = 1)
;hitsound   = s30500,3;0, 61
guardsound = S6,0
ground.type = low
ground.slidetime = 8  + cond(var(54) > 0, 3,0)
ground.hittime = 8  + cond(var(54) > 0, 3,0)
ground.velocity = -2.3  ;-3
ground.cornerpush.veloff = -2.9 *cond(var(54) > 0,3,1)
guard.hittime = 30
guard.velocity = -6.5
air.velocity = -2,-2
air.animtype = back
getpower= 0,0 ;ceil(40 * cond(var(54) > 0, fvar(6),1)), ceil(35 * cond(var(54) > 0, fvar(6),1))
givepower = 35,35
yaccel = 0.5
;Control P2 during Winposes system by altoiddealer
fall.envshake.freq = TeamSide ;Optional... but recommended as another failproof
fall.envshake.ampl = root,ID ;REQUIRED
ID = 30500

[State 0, EnvShake]
type = EnvShake
trigger1 = movehit = 1
trigger1 = numtarget(stateno)
trigger1 = cond(numtarget,!(target,IsHelper),0)
time = 29
freq = 60
ampl = -20
phase = 120
ignorehitpause = 1
persistent = 0


[State 1061, End]
type = destroyself
trigger1 = pos x!=[-240,240]
trigger2 = prevstateno = stateno
trigger3 = time > 80


;===========================================================================
;P2 Get Hit by Eternal Uniter (Causes HKD)
[Statedef 30501]
type = A
movetype = H
physics = N
anim = cond(selfanimexist(5052),5052,5030)
ctrl = 0
;velset = -3.86, -7.7
;facep2 = 1

[State 0, vel]
type = velset
triggerall = PlayerIDExist(gethitvar(fall.envshake.ampl))
triggerall = time <= 0
trigger1 = facing != PlayerID(gethitvar(fall.envshake.ampl)),facing
x =-9 
y =-3

[State 0, vel]
type = velset
triggerall = PlayerIDExist(gethitvar(fall.envshake.ampl))
triggerall = time <= 0
trigger1 = facing = PlayerID(gethitvar(fall.envshake.ampl)),facing
x = 9 
y =-3

;Added to mend issues when hitting an opponent that's behind you
[State 0, turn]
type = turn
triggerall = PlayerIDExist(gethitvar(fall.envshake.ampl))
triggerall = time <= 0
trigger1 = facing = PlayerID(gethitvar(fall.envshake.ampl)),facing
Ignorehitpause = 1

[State 0, invulk]
type = nothitby
trigger1 = 1
value = SCA,AA,AP,AT
Ignorehitpause = 1

[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.35
Ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
time = 15
freq = 60
ampl = -12
phase = 90
;ignorehitpause = 
;persistent = 

[State 2308, end]
type = changestate;selfstate
trigger1 = pos y >= 0 && vel y > 0
value = 5954;5100