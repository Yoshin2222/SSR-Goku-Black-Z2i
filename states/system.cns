; Lose by Time Over
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Draw game (time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 1] ; If no anim, use go to lose state.
type = ChangeState
trigger1 = time <= 0
trigger1 = !SelfAnimExist(175)
value = 170
persistent = 0

[State 175, 2]
type = ChangeAnim
trigger1 = time <= 0
value = 175

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;===========================================================================
; <<<<< WINPOSES >>>>>
; Winpose Decider : 180
; Winpose 1 - Cocky Sneer : 181
; Winpose 2 - Ominous : 182
; Winpose 3 - Win by Resentful Angel : 28540
; Winpose 4 - Heroic Departure : 183
; Winpose 5 - Glorious end  : 184
; Winpose 6 - Attack of the clones (perfect) : 185
; Winpose 7 - Impressed (Clutch) : 186
; Winpose 8 - Superior : 188
; Winpose 9 - Foolish : 189

;===========================================================================

; WIN STATE DECIDER
[Statedef 180]
type = S

;for testing
[State 180,Foolish winpose]
type = null;changestate
trigger1 =1
;value = 1895104;72;28517;1894
;value = 18972;28517;1894
value = cond(abs(ceil(Pos X - var(52))) <= 60,1897,18972)

[State 180,win Container]
type = varadd
trigger1 = time <= 0
var(59) = 1
persistent = 0

[State 180, VICTORY winpose]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**15) != 0;Ruined Future check is true
triggerall = (var(26)&2**17) = 0 ;Spirit God Impact
triggerall = (var(26)&2**16) = 0 ;Resentful Angel
triggerALL = (var(26)&2**19) = 0 ;Sivine Rush LVL1
;triggerall = Matchover
;triggerall = var(19) < floor((var(19)/2) + (var(19)/4))
triggerall = random%10 < 3
;triggerall = random%20 > 14
trigger1 = time <= 0
;value = 1897; + random%4
value = cond((abs(ceil(Pos X + fvar(18))) >= 60),1897,18972)

[State 180, VICTORY winpose]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**17) = 0 ;Spirit God Impact
triggerall = (var(26)&2**16) = 0 ;Resentful Angel
triggerALL = (var(26)&2**19) = 0 ;Sivine Rush LVL1
triggerall = Matchover
triggerall = random%10 < 5
;triggerall = random%20 > 14
trigger1 = time <= 0
value = cond((abs(ceil(Pos X + fvar(18))) >= 60),1894,1895104)

[State 180, DR LVL1 winpose]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**17)=0 ;Spirit God Impact
triggerall = (var(26)&2**16)=0 ;Resentful Angel
trigger1 = (var(26)&2**19) > 0 ;Sivine Rush LVL1
;trigger1 = matchover
value = 28517

[State 180, R.A winpose]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**17)=0 ;Spirit God Impact
triggerALL = (var(26)&2**19) = 0 ;Sivine Rush LVL1
trigger1 = (var(26)&2**16) > 0 ;Resentful Angel
;trigger1 = matchover
value = 28541

[State 180, S.G.I  winpose]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**16) = 0 ;Resentful Angel
triggerALL = (var(26)&2**19) = 0 ;Sivine Rush LVL1
trigger1 = (var(26)&2**17) > 0 ;Spirit God Impact
;trigger1 = matchover
value = 304192

[State 180, Foolish winpose]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**17) = 0 ;Spirit God Impact
triggerall = (var(26)&2**16) = 0 ;Resentful Angel
triggerALL = (var(26)&2**19) = 0 ;Sivine Rush LVL1
triggerall = var(54) <= 1
triggerall = matchover
trigger1 = random%10 <= 3
value = 189

[State 180, Perfect Winpose]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**17) = 0 ;Spirit God Impact
triggerall = (var(26)&2**16) = 0 ;Resentful Angel
triggerALL = (var(26)&2**19) = 0 ;Sivine Rush LVL1
triggerall = var(54) <= 1
triggerall = time <= 0
trigger1 = !matchover
trigger1 = WinPerfect
trigger1 = random%10 <=3
trigger2 = matchover
trigger2 = WinPerfect
trigger2 = random%10 <=5
value = 185

[State 180, Superior Winpose]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**17) = 0 ;Spirit God Impact
triggerall = (var(26)&2**16) = 0 ;Resentful Angel
triggerALL = (var(26)&2**19) = 0 ;Sivine Rush LVL1
triggerall = var(54) >= 2
trigger1 = time <= 0
value = 188

[State 180, Clutch Winpose]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**17) = 0 ;Spirit God Impact
triggerall = (var(26)&2**16) = 0 ;Resentful Angel
triggerALL = (var(26)&2**19) = 0 ;Sivine Rush LVL1
triggerall = var(54) <= 1
triggerall = life <= lifemax/10 ;Chanege to this if health is less than 10%
trigger1 = time <= 0
trigger1 = random&4 >=3
value = 186

[State 180, winpose]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**17) = 0 ;Spirit God Impact
triggerall = (var(26)&2**16) =0 ;Resentful Angel
triggerALL = (var(26)&2**19) = 0 ;Sivine Rush LVL1
triggerall = var(54) <= 1
trigger1 = time <= 0
value = 181 + random%6

;===========================================================================
; WIN POSE 1: COCKY SNEER
[Statedef 181]
type = S
anim = 181
ctrl = 0

[State 181, laugh]
type = playsnd
trigger1 = animelemtime(4) = 0
value = 215, 4

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 181, 1]
type = assertspecial
trigger1 = time < 150
flag = roundnotover

;===========================================================================
; WIN POSE 2: Ominous
[Statedef 182]
type = S
anim = 182
ctrl = 0

[State 181, footstep]
type = playsnd
trigger1 = animelemtime(3) = 0
value = 0, 51
channel = 0
[State 181, raise]
type = playsnd
trigger1 = animelemtime(5) = 0
value = 0, 1
channel = 1
[State 181, sword]
type = playsnd
trigger1 = animelemtime(5) = 0
value = 0, 52
channel = 2

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 181, 1]
type = assertspecial
trigger1 = time < 112
flag = roundnotover

;===========================================================================
; WIN POSE 3: RESENTFUL ANGEL
[Statedef 28541]
type = S
anim = 2853

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 181, 1]
type = assertspecial
trigger1 = time < 150
flag = roundnotover


;===========================================================================
; WIN POSE 4: HEROIC DEPARTURE
[Statedef 183]
type = S
movetype = I
anim = 183
ctrl = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, Helper]
type = Helper
triggerall = !numhelper(1831)
trigger1 = animelemtime(7) = 0
;helpertype = normal ;player
name = "Intro 3: Trail FX"
ID = 1831
stateno = 1831
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 200, 1] ;hit ground SND
type = PlaySnd
trigger1 = time <= 0
value = 215,8
channel = 2
persistent = 0

[State 200, 1] ;hit ground SND
type = PlaySnd
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(6) = 0
value = 0,51
channel = 0
persistent = 1

[State 200, 1] ;Launching SND
type = PlaySnd
trigger1 = animelemtime(7) = 0
value = 0,73
channel = 0
persistent = 0
[State 200, 1] ;Launching SND
type = PlaySnd
trigger1 = animelemtime(7) = 0
value = 9,0
channel = 1
persistent = 0

[State 183, fly u[]
type = velset
trigger1 = animelemtime(7) = 0
y = -14

[state 181, 1]
type = assertspecial
trigger1 = time < 250
flag = roundnotover

;===========================================================================
; WIN POSE 5: GLORIOUS END
[Statedef 184]
type = S
movetype = I
anim = 184
ctrl = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, Explod]
type = Explod
triggerall = !numexplod(30402956)
trigger1 = animelemtime(3) = 0
anim = 30402956
ID = 30402956
pos = 0,0
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause =1
;trans = 
persistent = 1
;supermove = 0
;pausemove = 0


[State 0, Explod]
type = Explod
triggerall = !numexplod(1841)
trigger1 = animelemtime(3) = 0
anim = 1841
ID = 1841
pos = 62,-85
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause =1
;trans = 
persistent = 1
;supermove = 0
;pausemove = 0

[State 0, Explod]
type = Explod
triggerall = !numexplod(1842)
trigger1 = animelemtime(3) = 0
anim = 1842
ID = 1842
pos = 62,-85
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause =1
;trans = 
persistent = 1
;supermove = 0
;pausemove = 0

[State 200, 1] ;POWER DOWN
type = PlaySnd
trigger1 = animelemtime(3) = 0
value = 1301,0
channel = 0
persistent =0

[State 200, 1] 
type = posadd
trigger1 = animelemtime(3) = 0
X = -27
persistent =0

[State 200, 1] ;glorious end
type = PlaySnd
trigger1 = animelemtime(5) = 0
value = 215,0
channel = 1
persistent = 0
[state 181, 1]
type = assertspecial
trigger1 = time < 250
flag = roundnotover

;===========================================================================
; WIN POSE 6: ATTACK OF THE CLONES
[Statedef 185]
type = S
movetype = I
anim = 185
sprpriority = 1
ctrl = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


[State 189, chair]
type = Helper
triggerall = !numhelper(1851)
trigger1 = animelemtime(5) = 0
ID = 1851
Stateno = 1851
pos = 20,0
postype = p1  ;p2,front,back,left,right

[State 0, Explod]
type = null;Explod
triggerall = !numexplod(1851)
trigger1 = animelemtime(5) = 0
anim = 1851
ID = 1851
pos = 20,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause =1
;trans = 
persistent = 1
;supermove = 0
;pausemove = 0

[State 0, Explod]
type = Explod
triggerall = !numexplod(1852)
trigger1 = animelemtime(3) = 0
anim = 1852
ID = 1852
pos = 10,-80
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause =1
;trans = 
persistent = 1
;supermove = 0
;pausemove = 0

[State 251, teleport snd]
type = playsnd
trigger1 =  animelemtime(3) = 0
value = 2302,0
channel = 1
[State 251, teleport snd]
type = playsnd
trigger1 =  animelemtime(5) = 0
value = 2302,0
channel = 2

[State 200, 1] ;slash snd
type = PlaySnd
trigger1 = animelemtime(5) = 0
value = 0,52
channel = 0
persistent = 0
[State 200, 1] ;voice
type = PlaySnd
trigger1 = time = 40
value = 215,9
channel = 1
persistent = 0

[state 181, 1]
type = assertspecial
trigger1 = time < 210
flag = roundnotover

;===========================================================================

; WIN POSE 6: Clone 1helper
[Statedef 1851]
type = S
anim = 1851
sprpriority = 0
ctrl = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;===========================================================================
; WIN POSE 7: IIMPRESSED
[Statedef 186]
type = S
movetype = I
anim = cond(random%10 < 5,186,1862)
sprpriority = 1
ctrl = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 200, 1] ;voice
type = posadd
trigger1 = animelemtime(3) = 0
X = 7
persistent = 0
[State 200, 1] ;voice
type = PlaySnd
trigger1 = animelemtime(3) = 0
value = 215,7+cond(anim = 186,0,10)
channel = 1
persistent = 0

[state 181, 1]
type = assertspecial
trigger1 = time < 300
flag = roundnotover

;===========================================================================
; WIN POSE 8: SUPERIOR
[Statedef 188]
type = S
movetype = I
anim = 188
sprpriority = 1
ctrl = 0


[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 2196, hitadd]
type = envshake
trigger1 = animelemtime(4) >= 0 
time = cond(var(54) > 0,15,12)
freq = random%150 + (15 * var(54))
ampl = random%-17 - (3 * var(54))
phase = random%120 + (15 * var(54))
persistent = 1

[State 0, nobars]
type = assertspecial
trigger1 = 1
flag = nobardisplay

[State 251, voice] ;AHHHHHH
type = playsnd
trigger1 = time <= 0
;trigger1 = animelemtime(6) = 0
value = 215,222
channel = 1
volumescale = 455

[State 0palfx]
type = palfx
trigger1 = animelemtime(7) = 0
add = 20,20,20
mul = 256,256,256
time = 7

[State fly up]
type = posadd
trigger1 = animelemtime(7) = 0
y = -20
[State fly up]
type = velset
trigger1 = animelemtime(7) = 0
y = -4
[State fly up]
type = veladd
trigger1 = animelemtime(7) > 0
y = 0.2

[State fly up]
type = velset
triggerall = animelemtime(7) > 0
trigger1 = vel y >= 0
y = 0

[State 2197, charge fx 2];THUNDAH
type = helper
triggerALL = !numhelper(1881)
trigger1 = animelemtime(10) = 0
trigger2 = animelemtime(7) > 0
trigger2 = var(54) >= 2
trigger2 = random%5 >= 4
id = 1881
stateno = 1881
pos = ((random%80 - random%60) * cond(screenpos x < 0, 1,-1)), -floor(pos y)
postype = P1
facing = cond(random<500,-1,1)

[state 181, 1]
type = assertspecial
trigger1 = time < 300
flag = roundnotover

;===========================================================================
; WIN 8: THUNDER
[Statedef 1881]
type = S
movetype = I
anim = 2450 + random% 5
sprpriority = 1
ctrl = 0

[State 1061, NoShadow]
type = Trans
trigger1 = root,var(49)>0
trans = addalpha
alpha = 200 ,128
ignorehitpause = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1881, size]
type = angledraw
trigger1 = 1
scale = 1,4
[State 2197, thundersnd]
type = playsnd
trigger1 = time <= 0
value = 2400,1
channel = 0
volumescale = 49


[State 0, Explod]
type = Explod
trigger1 = time <= 0
anim = 192311
ID = 192311
pos = 0,floor(-root,pos y)-20
postype = p1  ;p2,front,back,left,right
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.5+(random%3*0.1),0.5+(random%3*0.1)
sprpriority = random%3
ontop = 0;1
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause =1
;trans = 
persistent = 0
;supermove = 0
;pausemove = 0

[State 0, destroyself]
type = destroyself
trigger1 = !animtime
trigger2 = root,stateno != 188

;===========================================================================

; WIN POSE 9: Foolish
[Statedef 189]
type = S
anim = 189
sprpriority = 1
ctrl = 0


[State 251, posadd]
type = posadd
trigger1 = animelemtime(4) = 0
X = 16
ignorehitpause = 1
persistent = 1
[State 251, posadd]
type = posadd
trigger1 = animelemtime(11) = 0
X = 6
ignorehitpause = 1
persistent = 1


[State 189, Chair]
type = Null;Explod
triggerall = !numexplod(1891)
trigger1 = animelemtime(11) = 0
anim = 1891
ID = 1891
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
scale = 1,1
sprpriority = 0
ontop = 0
shadow = -1

[State 189, Tea]
type = Null;Explod
triggerall = !numexplod(1892)
trigger1 = animelemtime(11) = 0
anim = 1892
ID = 1892
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
scale = 1,1
sprpriority = 1
ontop = 0
shadow = -1

[State 189, chair]
type = Helper
triggerall = !numhelper(1891)
trigger1 = animelemtime(11) = 0
ID = 1891
Stateno = 1891
pos = 0,0
postype = p1  ;p2,front,back,left,right

[State 189, tea]
type = Helper
triggerall = !numhelper(1892)
trigger1 = animelemtime(11) = 0
ID = 1892
Stateno = 1892
pos = 0,0
postype = p1  ;p2,front,back,left,right

[State 0, smoke]
type = helper
triggerall = !numhelper(18921)
trigger1 = animelemtime(11) = 0
id = 18921
stateno = 18921
pos = 0,0
postype = p1  ;p2,front,back,left,right

[State 189, face]
type = Helper
triggerall = !numhelper(1893)
trigger1 = animelemtime(11) = 0
ID = 1893
Stateno = 1893
pos = 0,0
postype = p1  ;p2,front,back,left,right

[State 251, teleport snd]
type = playsnd
trigger1 = animelemtime(7) = 0
trigger2 = animelemtime(9) = 0
value = 2302,0
channel = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 181, 1]
type = assertspecial
trigger1 = time < 290
flag = roundnotover

;===========================================================================

;===========================================================================

; WIN POSE 9: Foolish chair helper
[Statedef 1891]
type = S
anim = 1891
sprpriority = 0
ctrl = 0

[State 0, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0
time = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;===========================================================================

; WIN POSE 9: Foolish tea helper
[Statedef 1892]
type = S
anim = 1892
sprpriority = 3
ctrl = 0

[State 0, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0
time = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;===========================================================================

; WIN POSE 9: Foolish tea helper
[Statedef 18921]
type = S
anim = 18921
sprpriority = 3
ctrl = 0

[state trans]
type = trans
trigger1 = 1
trans = addalpha
alpha = cond(root,var(49) != 0 ,200,256),cond(root,var(49) != 0 ,128,0)

[State 0, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0
time = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 0, assertspecial]
type = assertspecial
trigger1 = 1
flag = noshadow

;===========================================================================

; WIN POSE 9: Foolish Face helper
[Statedef 1893]
type = S
anim = 1893
sprpriority = 3
ctrl = 0

[State 0, bind]
type = bindtoroot
trigger1 = 1
pos = 0,0
time = 1

[State 251, teleport snd]
type = playsnd
trigger1 = animelemtime(1) = 0
value = 215, 4
channel = 1

[State 251, teleport snd]
type = playsnd
trigger1 = animelemtime(4) = 0
value = 1893,0
channel = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;===========================================================================

;===========================================================================

; VICTORY POSE 1: Portal
[Statedef 1894]
type = S
physics = N
anim = 1894
sprpriority = 1
ctrl = 0
velset = 0,0

[state 0, camera]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[state 0, snd]
type = playsnd
triggerall = anim = 1894
trigger1 = animelemtime(4) = 0
value = s0,66
channel = 0

[state 0, what in the]
type = playsnd
triggerall = anim = 1894
triggerall = numhelper(1895)
trigger1 = helper(1895),time = 60
value = s12,0
channel = 0
pan = 1
persistent = 0

[state 0, NO]
type = playsnd
triggerall = anim = 5007
triggerall = numhelper(1895)
trigger1 = helper(1895),time = 103
value = s5020,0
channel = 0
pan = 1
volumescale = 255
persistent = 0

[state 0, NO]
type = stopsnd
trigger1 = anim = 1
channel = 0
persistent = 0

[state 0, poral open]
type = varadd
triggerall = var(54) > 0
triggerall = anim != 1894
trigger1 = time%20 = 0
var(54) = -1
persistent = 1

[state 0, poral open]
type = playsnd
triggerall = anim = 1894
triggerall = numhelper(1895)
trigger1 = helper(1895),time = 59
value = s2930,0
channel = 2
abspan = 1
volumescale = 255
persistent = 0


[state 0, poral open]
type = playsnd
trigger1 = anim = 1
value = s2000,14
channel = 2
abspan = 1
volumescale = 255
persistent = 0

[state 1215, Smoke FX]
type = explod
triggerall = !numexplod(1206)
trigger1 = time = 5
anim = 1206+10000*(var(49)=0)
id = 1206
pos = -25,3
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1

[State 0, Super FX]
type = Explod
triggerall = !numexplod(2003)
trigger1 = time = 5
anim = 2003
id = 2003
pos = -139,50    ;-145,52
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -2
sprpriority = 8
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Charge Ball FX]
type = Explod
triggerall = !numexplod(2001)
trigger1 = time = 5
anim = 2001+10000*(var(49)=0)
id = 2001
pos = -25,-59   ;-31,-57
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -1
sprpriority = 5
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, Ki Gather FX]
type = Explod
triggerall = !numexplod(2002)
trigger1 = time = 5
anim = 2002+10000*(var(49)=0)
id = 2002
pos = -25,-59   ;-31,-57
postype = p1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
supermovetime = 9999
pausemovetime = 9999
;helpertype = normal
removetime = -1
sprpriority = 6
ownpal = 1
bindtime = -1
scale = 1,1
persistent = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time = [0,48]
flag = noBG
flag2 = noFG

[State 200, Kmh charge]
type = PlaySnd
trigger1 = time = 10
trigger2 = time = 30
value = 2000,12
;volume = 355
channel = 1

[State 0, portal]
type = velset
triggerall = anim = 1894
triggerall = numhelper(1895)
trigger1 = helper(1895),time = 60
x = -0.2

[State 0, remove Ki charge]
type = removeexplod
triggerall = numexplod(2002)
trigger1 = anim = 5007
id = 2002

[State 0, remove Ki charge]
type = removeexplod
triggerall = numexplod(2001)
trigger1 = anim = 5007
id = 2001

[State 0, portal]
type = changeanim
triggerall = anim = 1894
triggerall = numhelper(1895)
trigger1 = helper(1895),time = 60
value = 5007

[State 0, portal]
type = changeanim
triggerall = anim = 5007
triggerall = numhelper(1895)
trigger1 = helper(1895),time = 110
value = 5012
elem = 1

[State 0, portal]
type = velset
trigger1 = anim = 5012
x = -3.2
y = -3

[State 0, palfx]
type = palfx
trigger1 = anim = 5012
add = ceil(256-1.7*time),ceil(256-1.7*time),ceil(256-1.7*time)
mul	= 256,256,256
time = 1

[State 0, portal]
type = changeanim
triggerall = anim = 5012
triggerall = numhelper(1895)
trigger1 = helper(1895),time = 134
value = 1

[State 0, camera]
type = helper
triggeraLL = !numhelper(1895105)
triggerall = anim = 1894
trigger1 = animelemtime(8) = 23
id = 1895105
stateno = 1895105
postype = P1
Pos = 0,0
ownpal = 1

[State 0, portal]
type = helper
triggeraLL = !numhelper(1895)
triggerall = anim = 1894
trigger1 = animelemtime(8) = 23
id = 1895
stateno = 1895
postype = p1
ownpal = 1

[state 1215, Smoke under portal]
type = explod
triggeraLL = numhelper(1895)
triggeraLL = !numexplod(120600)
trigger1 =helper(1895),anim = 1895
anim = 8060
id = 120600
pos = ceil(helper(1895),pos x+40),0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
sprpriority = 3
ownpal = 1
scale = 0.7,0.7
removetime = -1
facing = -1
persistent = 0
ignorehitpause = 1

[State 0, scale]
type = modifyexplod
triggeraLL = numhelper(1895)
triggeraLL = numexplod(120600)
triggerall = helper(1895),anim = 1895
trigger1 = helper(1895),time = [0,60]
scale = 0.7+(0.005*time),0.7+(0.005*time)
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)

[State 0, scale]
type = modifyexplod
triggeraLL = numhelper(1895)
triggeraLL = numexplod(120600)
triggerall = helper(1895),anim = 1895
trigger1 = helper(1895),time = [61,71]
scale = 0.6-(0.001*time),0.6-(0.001*time)
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)

[State 0, scale]
type = modifyexplod
triggeraLL = numhelper(1895)
triggeraLL = numexplod(120600)
triggerall = anim != 1
triggerall = helper(1895),anim = 1895
trigger1 = helper(1895),time = [72,560]
scale = 1.7+(0.005*time),1.7+(0.005*time)
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
id = 120600

[State 0, modify dust]
type = modifyexplod
triggeraLL = numhelper(1895)
triggeraLL = numexplod(120600)
trigger1 = anim = 1
scale = 4.5-(0.019*time),4.5-(0.019*time)
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
id = 120600

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 181, 1]
type = assertspecial
trigger1 = time < 290
flag = roundnotover


;===========================================================================
; Portal
[Statedef 1895]
type = S
physics = N
anim = 1895
sprpriority = 1
ctrl = 0
;velset = 0.005,0.005

[state 0, camera]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[state 0, camera]
type = assertspecial
trigger1 = 1
flag = noshadow
persistent = 1

[State 0, pos]
type = posset
trigger1 = time <= 0
x = root,pos x - 113 * root,facing
y = root,pos y - 123

[State 0, pos]
type = posfreeze
trigger1 = time > 0
value = 1

[State 0, scale]
type = angledraw
triggerall = anim = 1895
trigger1 = time = [0,60]
scale = 0.7+(0.005*time),0.7+(0.005*time)

[State 0, scale]
type = angledraw
triggerall = anim = 1895
trigger1 = time = [61,71]
scale = 0.6-(0.001*time),0.6-(0.001*time)

[State 0, scale]
type = angledraw
triggerall = anim = 1895
trigger1 = time = [72,560]
scale = 1.7+(0.005*time),1.7+(0.005*time)

[State 0, scale]
type = angledraw
trigger1 = anim = 1896
scale = 4.5-(0.022*time),4.5-(0.022*time)

[State 0, portal]
type = changeanim
triggerall = anim = 1895
trigger1 = root,anim = 1
value = 1896

[state 0, destroyself]
type = destroyself
trigger1 = root,stateno != 1894
trigger2 = anim = 1896
trigger2 = !animtime

;===========================================================================
; WALK
[Statedef 1895104]
type = S
physics = N
anim = 20
sprpriority = 1
ctrl = 0

[state 0, changestate]
type = changestate
trigger1 = (ceil(Pos X - fvar(18)) >= -60) && (ceil(Pos X - fvar(18)) <= 60)
value = 1894

[State 20, VelSet]
type = VelSet
trigger1 = time <= 0
x = const(velocity.walk.fwd.x)

[State 100, steps]
type = playsnd
trigger1 = anim=20
trigger1 = animelemtime(4)=0 || animelemtime(7)=0
;trigger2 = anim=21
;trigger2 = animelemtime(2)=0  || animelemtime(6)=0
value = 0,54+(Random%2)

[state 181, 1]
type = assertspecial
trigger1 = time < 3332
flag = roundnotover


;===========================================================================
; Camera Helper
[Statedef 1895105]
type = S
physics = N
anim = 1
sprpriority = 1
ctrl = 0
velset = -10.005,0.005

[State 0, camera]
type = screenbound
trigger1 = !numhelper(1895)
value = 0
movecamera = 1,1

[State 0, camera]
type = screenbound
trigger1 = numhelper(1895)
value = 0
movecamera = 1,1

[State 0, camera]
type = null;posadd
trigger1 = !numhelper(1895)
x = 170
persistent = 0

[State 0, camera]
type = velset
trigger1 = numhelper(1895)
x = -1
persistent = 0

[State 0, camera]
type = velset
trigger1 = !numhelper(1895)
x = 4
persistent = 0

[state 0,destroyself]
type = destroyself
trigger1 = time >= 170

;===========================================================================
; VICTORY POSE 2: BULLET
[Statedef 1897]
type = S
physics = N
anim = 1897
sprpriority = 1
ctrl = 0
velset = 0,0

[state 0, camera]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[state 0, SUPERIOR DISSIPATE]
type = varadd
triggerall = var(54) > 0
triggerall = anim != 1894
trigger1 = time%8 = 0
var(54) = -1
persistent = 1

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 1];revert SFX
type = PlaySnd
trigger1 = animelemtime(7) = 0
value = 181,0

[State 8000, less vibrant]
type = PalFX
trigger1 = animelemtime(7) >= 0
add = -15,-15,-15
color = 200
time = 1000

[State 191, laugh]
type = playsnd
trigger1 = animelemtime(11) = 0
value = 215,4
channel = 2
;;volume = 100

[State 191, gun]
type = playsnd
trigger1 = time = 90
value = 215,227
channel = 0
;;volume = 100

[State 191, bullet]
type = helper
triggerall = !numhelper(18971)
trigger1 = time = 90
id = 18971
stateno = 18971
postype = P1
pos = floor(-gamewidth*2),-90
;;volume = 100

[State 191, slow]
type = playsnd
trigger1 = time = 102
value = 215,225
channel = 1
;;volume = 100

[State 191, slow]
type = playsnd
triggerall = numhelper(18971)
;trigger1 = var(58)
trigger1 = helper(18971),var(3) = 1
;trigger1 = helper(18971),cond(1,var(3) = 1,0)
;trigger1 = time = 122
value = 215,226
channel = 1
persistent = 0
;;volume = 100

[State 191, i think not]
type = playsnd
trigger1 = animelemtime(21) = 0
value = 215,228
channel = 2
;;volume = 100

[State 191, snd1]
type = turn
trigger1 = animelemtime(21) = 0

[state 0,slow]
type = velset
trigger1 = animelemtime(24) = 0
x = 22

[State 0, EnvShake]
type = EnvShake
trigger1 = animelemtime(24) = 0
time = 12
freq = 60
ampl = 55
phase = 90
;ignorehitpause = 
persistent = 0

[State 191, i think not]
type = playsnd
trigger1 = animelemtime(24) = 0
value = 0,71
channel = 1
persistent = 0
;;volume = 100

[State 191, i think not]
type = playsnd
trigger1 = animelemtime(24) = 0
value = 0,72
channel = 2
persistent = 0
;;volume = 100

[state 1215, Smoke FX]
type = explod
triggerall = !numexplod(1206)
trigger1 = animelemtime(24) = 0
anim = 1206+10000*(var(49)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1

[state 181, 1]
type = assertspecial
trigger1 = time < 333
flag = roundnotover

;===========================================================================
; WALK
[Statedef 18972]
type = S
physics = N
anim = 20
sprpriority = 1
ctrl = 0

[state 0, changestate]
type = changestate
trigger1 = (ceil(Pos X - fvar(18)) >= -60) && (ceil(Pos X - fvar(18)) <= 60)
value = 1897

[State 20, VelSet]
type = VelSet
trigger1 = time <= 0
x = const(velocity.walk.fwd.x)

[State 100, steps]
type = playsnd
trigger1 = anim=20
trigger1 = animelemtime(4)=0 || animelemtime(7)=0
;trigger2 = anim=21
;trigger2 = animelemtime(2)=0  || animelemtime(6)=0
value = 0,54+(Random%2)

[state 181, 1]
type = assertspecial
trigger1 = time < 3332
flag = roundnotover

;===========================================================================
; BULLET
[Statedef 18971]
type = A
physics = N
anim = 18971
sprpriority = 2
ctrl = 0
velset = 44,0

[State 802, Proximity boundary X]
type = varset
trigger1 = 1
var(12) = 88 ;+ abs(enemynear,vel X)
ignorehitpause = 1
persistent = 1

;Proximity Calculation
[State 802, Proximity X Calculation]
type = varset
trigger1 = 1
;var(13) = (Pos X - enemynear,pos X - abs(enemynear,vel X)) * facing
var(13) = ceil((Pos X - root,pos X) * facing)
ignorehitpause = 1
persistent = 1

[State 802, Proximity check]
type = varset
trigger1 = var(13) >= -var(12) && var(13) <= var(12) ;X AXIS
var(3) = 1
ignorehitpause = 1
persistent = 1

[State 802, Proximity check]
type = varset
trigger1 = var(13) <= -var(12) || var(13) >= var(12) ;X AXIS
var(3) = 0
ignorehitpause = 1
persistent = 1

[state 0,slow]
type = velset
trigger1 = var(3) = 1
x = 0.6

[state 0,slow]
type = assertspecial
trigger1 = var(3) = 1 ;root,animelemtime(16) < 0
flag = nobg
flag2 = nofg
[state 0,slow]
type = velset
trigger1 = root,animelemtime(16) >= 0
trigger1 = var(3) := 2 ;root,animelemtime(16) < 0
x = 44

[State 191, i think not]
type = playsnd
trigger1 = root,animelemtime(16) >= 0
value = 215,229
channel = 0
persistent = 0
;;volume = 100

[state 0, camera]
type = screenbound
trigger1 = 1
value = 0
movecamera = 0,0

;===========================================================================
;SGI Winpose
[Statedef 304192]
type = S
movetype = I
;ctrl = 0
velset = 0,0

[State 0, anim]
type = changeanim
trigger1 = anim != 304065
value = 304065

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3410, PlaySND];Sound from Majin Vegeta Aftermath
type		= PlaySND
trigger1		= Time = 50
value		= 3000, 51
volumescale	= 175
loop = 1
[State 3410, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= TimerFreeze
flag2		= NoBarDisplay

[State 3410, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag 		= NoFG
flag2 		= NoBG
flag3 		= GlobalNoShadow

[State 3410, AssertSpecial]
type		= AssertSpecial
trigger1		= 1
ignorehitpause	= 1
persistent	= 1
flag		= NoMusic

[State 30000, Stand Hover]	;copied from Jailbot by altoiddealer and edited a bit. ;)
type = Offset
trigger1 = 1
y = 4*cos(GameTime/24.0)
x= 6
[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 181, 1]
type = assertspecial
trigger1 = time < 400
flag = roundnotover

;===========================================================================
; <<<<< SUPER JUMP >>>>>
; SJ after c.SP : 10230
; SJ Straight : 10231
; SJ Forward : 10232
; SJ Backward : 10233
; LJ West : 10240
;===========================================================================

;SUPER JUMP AFTER C.SP
[Statedef 10230]
type    = S
physics = S
anim = 40
ctrl = 0
velset = 0,0
facep2 = 1

[State 55, SND Super jump]
type = PlaySND
triggerall = !numexplod(80518)
trigger1 = time <= 0
value = 0,24

[State 890, 2];FX
type = Explod
triggerall = !numexplod(80518)
trigger1 = time <= 0
Anim = 8051
id = 80518
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 0,-20
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 41, Train]
type = AfterImage
trigger1 = time <= 0
time= 30
timegap= 1
framegap= 3
length= 12
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 10230, 11]
type = VelSet
trigger1 = !Animtime
x = 0.85 * Const(velocity.jump.fwd.x)
y = Const(velocity.jump.y) - 2

[State 10230, 13]
type = ChangeState
trigger1 = !Animtime
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; SUPER JUMP STRAIGHT UP
[Statedef 10231]
type    = S
physics = S
anim = 40
ctrl = 0
velset = 0,0
facep2 = 1

[State 55, SND Super jump]
type = PlaySND
triggerall = !numexplod(80518)
trigger1 = time <= 0
value = 0,24

[State 55, Dash Effects]
type = Explod
triggerall = !numexplod(80518)
trigger1 = time <= 0
Anim = 8051
id = 80518
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 0,-20
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 55, Give Player control]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 55, Trail]
type = AfterImage
trigger1 = time <= 0
time= 30
timegap= 1
framegap= 3
length= 12
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 55, VelSet]
type = VelSet
trigger1 = !Animtime
x = Const(velocity.jump.neu.x)
y = Const(velocity.jump.y) - 2.2;2.5

[State 55, Go to real Super Jump state]
type = ChangeState
trigger1 = !Animtime
value = 58
ctrl = 1

;---------------------------------------------------------------------------
; SUPER JUMP FORWARD
[Statedef 10232]
type    = S
physics = S
anim = 40
ctrl = 0
velset = 0,0
facep2 = 1

[State 56, SND Super jump]
type = PlaySND
triggerall = !numexplod(80518)
trigger1 = time <= 0
value = 0,24

[State 56, Dash Effects]
type = Explod
triggerall = !numexplod(80518)
trigger1 = time <= 0
Anim = 8051
id = 80518
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 0,-20
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 56, Give Player control]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 56, Trail]
type = AfterImage
trigger1 = time <= 0
time= 30
timegap= 1
framegap= 3
length= 12
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 56, VelSet]
type = VelSet
trigger1 = !Animtime
x = Const(velocity.jump.fwd.x)
y = Const(velocity.jump.y) - 2.0;2.2

[State 56, Go to real Super Jump state]
type = ChangeState
trigger1 = !Animtime
value = 58
ctrl = 1

;---------------------------------------------------------------------------
; SUPER JUMP BACKWARD
[Statedef 10233]
type    = S
physics = S
anim = 40
ctrl = 0
velset = 0,0
facep2 = 1

[State 57, SND Super jump]
type = PlaySND
triggerall = !numexplod(80518)
trigger1 = time <= 0
value = 0,24

[State 57, Dash Effects]
type = Explod
triggerall = !numexplod(80518)
trigger1 = time <= 0
Anim = 8051
id = 80518
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 0,-20
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 57, Give Player control]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 57, Trail]
type = AfterImage
trigger1 = time <= 0
time= 30
timegap= 1
framegap= 3
length= 12
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 57, VelSet]
type = VelSet
trigger1 = !Animtime
x = Const(velocity.jump.back.x)
y = Const(velocity.jump.y) - 2.0;2.2

[State 57, Go to real Super Jump state]
type = ChangeState
trigger1 = !Animtime
value = 58
ctrl = 1

;---------------------------------------------------------------------------
; Super Jump
[Statedef 58]
type    = A
physics = A

[State 58, System Variable Set]
type = VarSet
trigger1 = time <= 0
sysvar(1) = 0

[State 58, only once - Explod]
type = Explod
triggerall = !numexplod(41)
trigger1 = time <= 0
anim = 1	;empty anim
ID = 41
removetime = -1
pausemovetime = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 58, 2]
type = ChangeAnim
trigger1 = time <= 0
value = cond((vel x)=0, 41, cond((vel x)>0, 42, 43))

[State 58, 3]
type = ChangeAnim
trigger1 = Vel y > Const720p(-8)
trigger1 = SelfAnimExist(anim + 3)
trigger1 = anim >= 41 && anim <= 43
persistent = 0
value = Anim + 3

[State 55, Trail]
type = AfterImage
trigger1 = time <= 0
time= 30
timegap= 1
framegap= 3
length= 12
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1


;These commands are needed to perform an air dash during the super jump, since I wouldn't be able to
;dash for the explod (ID=41) I put in state 58 (this one) that prevents Tien from levitating after a super jump.
;[State 58, Dash forward]
;type = ChangeState
;triggerall = NumExplod(41)	;only once
;triggerall = Time >=10
;trigger1 = command = "FF"
;value = 110
;ctrl = 1

[State 58, Dash forward]
type = ChangeState
triggerall = NumExplod(41)	;only once
triggerall = Time >=10
trigger1 = cond(Facing = 1, NumExplod(90001016),NumExplod(90001064))
value = 110
ctrl = 1

;[State 58, Dash back]
;type = ChangeState
;triggerall = NumExplod(41)	;only once
;triggerall = Time >=10
;trigger1 = command = "BB"
;value = 113
;ctrl = 1

[State 58, Dash back]
type = ChangeState
triggerall = NumExplod(41)	;only once
triggerall = Time >=10
trigger1 = cond(Facing = 1, NumExplod(90001064),NumExplod(90001016))
value = 112
ctrl = 1



;[State 58, Levitation]
;type = ChangeState
;triggerall = NumExplod(41)	;only once
;triggerall = Time >=10
;trigger1 = command = "QCB_p";"UU"
;value = 109
;ctrl = 1

[State 58, Levitation]
type = ChangeState
triggerall = NumExplod(41)	;only once
triggerall = Time >=10
trigger1 = NumExplod(90000230) && NumExplod(90000240) && NumExplod(90000250)
value = 109
ctrl = 1

[State 58, VelAdd - fwd]
type = VelAdd
triggerall = (PrevStateNo = [10231,10233])
trigger1 = Time > 8 && vel X < 4
trigger1 = command = "holdfwd" && command != "holdback"
x = 0.25

[State 58, VelAdd - back]
type = veladd
triggerall = (PrevStateNo = [10231,10233])
trigger1 = time > 15 && vel X> -4
trigger1 = command != "holdfwd" && command = "holdback"
x = -0.1




;===========================================================================
;POWER CHARGE
;===========================================================================

;Power Charge
[StateDef 900]
type = S
movetype = I
physics = S
anim = cond(var(54) > 0, 903,900)
velset = 0,0
ctrl = 0

[State 200, BGPalFX]
type = BGPalFX
triggerall = prevstateno = 902
trigger1 =  time <= 0 ;animelemtime(40) <= 0
time = 1
add	= 20,-50,20
mul	= 256,100,256
invertall = 0
color = 256

[State 902, adjust]
type = posadd
triggerall = prevstateno = 902
trigger1 =  time <= 0 ;animelemtime(40) <= 0
x = 5
ignorehitpause = 1

[State 902, pause]
type = superpause
triggerall = prevstateno = 902
trigger1 =  time <= 0 ;animelemtime(40) <= 0
time = 0
movetime = 0
sound = -1
anim = -1
pos = 0,0
p2defmul = 1
unhittable = 1
darken = 1
ignorehitpause = 1
persistent = 0


[State 2196, hitadd]
type = envshake
triggerall = prevstateno = 902
trigger1 = 1;animelemtime(5) > 0 && animelemtime(34) < 0
time = cond(var(54) > 0,15,12)
freq = cond(var(54) > 0,random%150,random%120)
ampl = cond(var(54) > 0,random%-17,random%-9)
phase = cond(var(54) > 0,random%120,random%90)
persistent = 1

[State 2190, aura]
type = removeexplod
trigger1 = numexplod(2189)
id = 2189

[State 900, Emoanim]
type = changeanim
trigger1 = time <= 0
trigger1 = prevstateno = 902 ;Emo Activate
value = 900
elem = 20

[State 1000, Power]
type = PowerAdd
triggerall = Time >= 12
triggerall = (Anim = 900 || Anim = 903)  && (power < 3000)
trigger1 = (AILevel <= 0) && (command = "holdb") && (command = "holdy")
trigger2 = AILevel >= 1
value = floor(5 + (time/20) * (cond(var(54) > 0, fvar(6),1)))

[State 4500, 2];long sound
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
triggerall = anim = 900
trigger1 = animelemtime(5)=0
trigger2 = prevstateno = 902 && animelem = 20
value = 215,5
channel = 7

[State 4500, 2];long sound
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
triggerall = anim = 903
trigger1 = animelemtime(5)=0
value = 215,5
channel = 7

[State 4500, 2];long sound
type = PlaySnd
triggerall = anim = 900
trigger1 = animelemtime(5)=0
trigger2 = prevstateno = 902 && animelem = 20
value = 8,0
loop = 1
pan = 1
volumescale = 25
channel = 3

[State 4500, 2];long sound
type = PlaySnd
triggerall = anim = 903
trigger1 = animelemtime(5)=0
trigger2 = prevstateno = 902 && animelem = 20
value = 8,0
loop = 1
pan = 1
volumescale = 25
channel = 3
[State 4500, 2];long sound
type = PlaySnd
trigger1 = time=130
value = 8,0
loop = 1
pan = 1
volumescale = 25
channel = 3

[State 4500, 1];Small sound
type = PlaySnd
triggerall = anim = 900
trigger1 = animelemtime(4)=0
trigger2 = prevstateno = 902 && animelem = 20
value = 8,1
volumescale = 255

[State 4500, 1];Small sound
type = PlaySnd
triggerall = anim = 903
trigger1 = animelemtime(4)=0
value = 8,1
volumescale = 255

[State 1000, shake]
type = EnvShake
triggerall = prevstateno != 902
triggerall = anim=900 && animelemtime(4)>=0
trigger1 = !(time%4)
time=4
freq=80
ampl=1+0.02*time*(cond(var(54) > 0, 2,1))

[State 1000, shake]
type = EnvShake
triggerall = prevstateno != 902
triggerall = anim=903 && animelemtime(4)>=0
trigger1 = !(time%4)
time=4
freq=80
ampl=6+0.02*time*(cond(var(54) > 0, 2,1))

[State 1000, flash]
type = PalFX
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = Anim = 900 && !(time%10) && animelemtime(4)>=0
add = -10, 20, 60
sinadd = -10,20,60,10
time = 10

[State 1000, flash]
type = PalFX
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = Anim = 903 && !(time%10) && animelemtime(4)>=0
add = -10, 20, 60
sinadd = -10,20,60,10
time = 10

[State 1900, Aura helper]
type = Helper
triggerall = !numhelper(905) 
trigger1 = animelemtime(4) >= 0
id = 905
name = "Charge"
pos = -24,-2
postype = P1
stateno = 905
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 1900, Dust helper (Power charge)]
type = Helper
triggerall = !numhelper(908)
trigger1 = animelemtime(4) >= 0
id = 908
name = "Dust"
pos = -17,5
postype = P1
stateno = 908
keyctrl = 0
ownpal = 1
ignorehitpause = 1


;[State 1900, dust]
;type = explod
;trigger1 = animelemtime(4)=0
;anim = 908+(var(2)=0)
;id = 908
;pos = 17,5
;sprpriority = 4
;bindtime = -1
;ownpal = 1
;removeongethit = 1
;ignorehitpause = 1
;facing = -1
;removetime = -1
;;pausemovetime = 99999
;;supermovetime = 99999

[State 1900, mouth closed]
type = explod
triggerall = !numexplod(91599)
trigger1 = time=70;anim=900 && time=70
anim = 915
id = 91599
pos = 0,0
sprpriority = 2
bindtime = -1
ownpal = 0
removeongethit = 1
ignorehitpause = 1
removetime = -1
supermovetime = 99999
pausemovetime = 99999


[State 1001, stopsnd]
type = stopsnd
trigger1 = (command != "holdb") || (command != "holdy") || (power >= 3000)
trigger2 = anim != 900
trigger2 = anim != 903
channel = 3
persistent = 0

[State 1000, PC-End]
type = ChangeState
triggerall = anim = 900
trigger1 = !AILevel
trigger1 = (command != "holdb") || (command != "holdy")
trigger2 =  AIlevel && (inguarddist || p2bodydist x <= 120&&p2statetype !=L)
trigger3 = Power >= const(data.power) || Power >= PowerMax || RoundState != 2
value = 901
Ctrl = 1

[State 1000, PC-End]
type = ChangeState
triggerall = anim = 903
trigger1 = !AILevel
trigger1 = (command != "holdb") || (command != "holdy")
trigger2 =  AIlevel && (inguarddist || p2bodydist x <= 120&&p2statetype !=L)
trigger3 = Power >= const(data.power) || Power >= PowerMax || RoundState != 2
value = 904
Ctrl = 1

;--------------------------------------
; End of Power Charge 
[StateDef 901] 
type = S
movetype = I
physics = S
ctrl = 0
anim = 901

[State 2190, dust]
type = removeexplod
triggerall = NumExplod(2188)
trigger1 = time <= 0
id = 2188
[State 2190, aura]
type = removeexplod
triggerall = NumExplod(2189)
trigger1 = time <= 0
id = 2189

[state -2, remove mouth closed]
type = removeexplod
triggerall = NumExplod(91599)
trigger1 = time <= 0
id = 91599

[State 1001, full power]
type = PlaySnd
trigger1 = anim = 901 && power >= 3000
value = 8,3
channel = 8
persistent = 0

[State 1001, full power voice]
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = anim = 901 && power >= 3000
value = 215,16
channel = 9
persistent = 0

[State 1001, EndByPowMax]
type = PalFX
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = Power = 3000
time = 1
add = 255-(20*Time), 255-(20*Time), 255-(20*Time)

[State 1001, End]
type = ChangeState
trigger1 = !Animtime
value = 0
ctrl = 1

;--------------------------------------
; End of Power Charge Emo
[StateDef 904] 
type = S
movetype = I
physics = S
ctrl = 0
anim = 904

[State 2190, dust]
type = removeexplod
triggerall = NumExplod(2188)
trigger1 = time <= 0
id = 2188
[State 2190, aura]
type = removeexplod
triggerall = NumExplod(2189)
trigger1 = time <= 0
id = 2189

[state -2, remove mouth closed]
type = removeexplod
triggerall = NumExplod(91599)
trigger1 = time <= 0
id = 91599

[State 1001, full power]
type = PlaySnd
trigger1 = anim = 904 && power >= 3000
value = 8,3
channel = 8
persistent = 0

[State 1001, full power voice]
type = PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = anim = 904 && power >= 3000
value = 215,16
channel = 9
persistent = 0

[State 1001, EndByPowMax]
type = PalFX
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = Power = 3000
time = 1
add = 255-(20*Time), 255-(20*Time), 255-(20*Time)

[State 1001, End]
type = ChangeState
trigger1 = !Animtime
value = 0
ctrl = 1

;===========================================================================
;AIR DASH
;===========================================================================
[Statedef 110]
type = A
movetype = I
physics = N
anim = 110
velset = 0,0
ctrl = 0

[State 110, removebuffers]
type = removeexplod
triggerall =NumExplod(90001064) 
trigger1 = time <= 0
id = 90001064
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall =NumExplod(90001016) 
trigger1 = time <= 0
id = 900010616
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000200)
trigger1 = time <= 0
id = 90000200
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000210)
trigger1 = time <= 0
id = 90000210
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000220)
trigger1 = time <= 0
id = 90000220
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000230)
trigger1 = time <= 0
id = 90000230
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000240)
trigger1 = time <= 0
id = 90000240
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000250)
trigger1 = time <= 0
id = 90000250
ignorehitpause = 1
persistent = 1

[State 110, end]
type = ChangeState
trigger1 = !Animtime
value = 111

;------------------------------------------
; DASH FORWARD
[Statedef 111]
type = A
movetype = I
physics = N
anim = 112
ctrl = 1
velset = 9,0

[State 100, 7]
type = removeexplod
trigger1 = numexplod(8056)
trigger1 = time <= 0
id = 8056

[State 110, var]
type = Varadd
trigger1 = time <= 0
var(10)=1
persistent = 0

[State 41, Train]
type = AfterImage
trigger1 = time <= 0
time= 30
timegap= 1
framegap= 3
length= 12
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 115, dash Sound]
type = PlaySnd
;triggerall = !numexplod(8054)
trigger1 = time <= 0
value = 100,0
ignorehitpause =0 
persistent = 0

[State 100, 7]
type = Explod
triggerall = !numexplod(8056)
trigger1 = time <= 0
Anim = 8050
id = 8056
postype = P1
pos = -10,-20
scale = 1,.8
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1
ignorehitpause = 1
persistent = 0

[State 111, 1]
type = VelAdd
trigger1 = time>=5 && vel X>=0
x = -0.3

[State 111, 1]
type = StateTypeSet
trigger1 = time >= 5
physics = A

[State 111, 1]
type = ChangeState
triggerall = time > 7
trigger1 = ((cond(P2DisT x < -12, Facing = -1, Facing = 1) && !NumExplod(90000006)) || (cond(P2DisT x < -12, Facing = 1, Facing = -1) && !NumExplod(90000004)))
value = 50

[State 111, end]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 112

;------------------------------------------
;LAND FROM AERIAL DASH FORWARD
[Statedef 112]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 103

[State 115, 1]
type = VelSet
trigger1 = time <= 0
x = 15
y = 0

[State 115, 3]
type = VelAdd
trigger1 = Time > 0
x = .15

[state 115, 2]
type = posset
trigger1 = time <= 0
y = 0

[State 115, Landing Sound]
type = PlaySnd
trigger1 = animelem = 2
value = 52,0

[State 115, e]
type = ChangeState
trigger1 = !Animtime
value = 0
ctrl = 1

;-----------------------------------------
;AIR DASH BACK
[Statedef 115]
type = A
movetype = I
physics = N
anim = 115
ctrl = 1
velset = 0,0

[State 100, 7]
type = removeexplod
trigger1 = numexplod(8050)
trigger1 = time <= 0
id = 8054

[State 110, removebuffers]
type = removeexplod
triggerall =NumExplod(90001064) 
trigger1 = time <= 0
id = 90001064
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall =NumExplod(90001016) 
trigger1 = time <= 0
id = 900010616
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000200)
trigger1 = time <= 0
id = 90000200
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000210)
trigger1 = time <= 0
id = 90000210
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000220)
trigger1 = time <= 0
id = 90000220
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000230)
trigger1 = time <= 0
id = 90000230
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000240)
trigger1 = time <= 0
id = 90000240
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000250)
trigger1 = time <= 0
id = 90000250
ignorehitpause = 1
persistent = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = PrevStateNo = 251
trigger1 = time <= 0
y = -30

[State 41, Train]
type = AfterImage
trigger1 = time <= 0
time= 30
timegap= 1
framegap= 3
length= 12
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 115, dash Sound]
type = PlaySnd
;triggerall = !numexplod(8054)
trigger1 = time <= 0
value = 100,0
ignorehitpause =0 
persistent = 0

[State 100, 7]
type = Explod
triggerall = !numexplod(8050)
trigger1 = time <= 0
Anim = 8050
id = 8054
postype = P1
pos = 0,-20
scale = 1,.8
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1
facing = -1
ignorehitpause = 1
persistent = 0

[State 111, 1]
type = VelSet
trigger1 = time <= 0
x = -7

[State 111, 1]
type = VelAdd
trigger1 = time>=5 && vel X<=0
x = 0.2

[State 111, 1]
type = StateTypeSet
trigger1 = time >= 5
physics = A

[State 111, 1]
type = ChangeState
triggerall = time > 7
trigger1 = ((cond(P2DisT x < -12, Facing = -1, Facing = 1) && !NumExplod(90000004)) || (cond(P2DisT x < -12, Facing = 1, Facing = -1) && !NumExplod(90000006))) || time = 15
value = 116

[State 112, end]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
; Back Dash in air - modified state 50
[Statedef 116]
type    = A
physics = A


[State 110, var]
type = Varadd
trigger1 = time <= 0
var(10)=1
persistent = 0

[State 50, 1]
type = VarSet
trigger1 = time <= 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = time <= 0
value = cond(vel x = 0, 44,cond(vel x > 0, 45,104))
elem = cond(vel x = 0, 0, cond(vel x > 0, 5, 0))

;-----------------------------------------
;AIR UP DASH
[Statedef 117]
type = A
movetype = I
physics = N
anim = 116
ctrl = 0
FaceP2 = 1
poweradd = cond(Prevstateno < 117, 0, -750)

[State 110, removebuffers];Upx2
type = removeexplod
triggerall =NumExplod(90000518)
trigger1 = time <= 0
id = 90000518
ignorehitpause = 1
persistent = 1


[State 110, removebuffers]
type = removeexplod
triggerall =NumExplod(90001064) 
trigger1 = time <= 0
id = 90001064
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall =NumExplod(90001016) 
trigger1 = time <= 0
id = 900010616
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000200)
trigger1 = time <= 0
id = 90000200
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000210)
trigger1 = time <= 0
id = 90000210
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000220)
trigger1 = time <= 0
id = 90000220
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000230)
trigger1 = time <= 0
id = 90000230
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000240)
trigger1 = time <= 0
id = 90000240
ignorehitpause = 1
persistent = 1
[State 110, removebuffers]
type = removeexplod
triggerall = numexplod(90000250)
trigger1 = time <= 0
id = 90000250
ignorehitpause = 1
persistent = 1

[State 110, var]
type = Varadd
trigger1 = time <= 0
var(10)=1
ignorehitpause = 1
persistent = 0

;Store X velocity
[State 110, var]
type = Varset
trigger1 = time <= 0
fvar(7)= vel x
ignorehitpause = 1

;Store Y velocity
[State 110, var]
type = Varset
trigger1 = time <= 0
fvar(16)= vel Y
ignorehitpause = 1

[State 110, var]
type = Velset
trigger1 = time <= 0
x = 0
y = 0

[State 110, var]
type = Varadd
triggerall = time <= 0
trigger1 = prevstateno = [600,650] ;Air Normals
trigger2 = prevstateno = 1203 ;EX Tatsu
trigger3 = prevstateno = [3000,3001] ;Rising Justice
trigger4 = prevstateno = 1100 ;Dive Kicks
trigger5 = prevstateno = 11110 ;Dive Kicks
trigger6 = prevstateno = 212 ;Elbow Drop
trigger7 = prevstateno = [1204,1205] ;Air Hurricane Kicks
var(10)=1
ignorehitpause = 1
persistent = 0

[State 251, teleport snd]
type = playsnd
triggerall = anim = 116
trigger1 = animelemtime(2) = 0
value = 2302,0
channel = 0

[State 2302, teleport pause]
type = pause
trigger1 = anim = 116
trigger1 = animelemtime(2)=0
time = 8
movetime = 8
ignorehitpause = 1

[State 2302, teleport pause]
type = posadd
triggerall = prevstateno != [600,650] ;Air Normals
triggerall = prevstateno != 1203 ;EX Tatsu
triggerall = prevstateno != [3000,3001] ;Rising Justice
triggerall = prevstateno != 1100 ;Dive Kicks
triggerall = prevstateno != 11110 ;Dive Kicks
triggerall = prevstateno != 212 ;Elbow Drop
triggerall = prevstateno != [1204,1205] ;Air Hurricane Kicks
trigger1 = anim = 116
trigger1 = animelemtime(4)=0
y = -120 
ignorehitpause = 1

[State 2302, teleport pause]
type = posadd
triggerall = anim = 116
triggerall = animelemtime(4)=0
trigger1 = prevstateno = [600,650] ;Air Normals
trigger2 = prevstateno = 1203 ;EX Tatsu
trigger3 = prevstateno = [3000,3001] ;Rising Justice
trigger4 = prevstateno = 1100 ;Dive Kicks
trigger5 = prevstateno = 11110 ;Dive Kicks
trigger6 = prevstateno = 212 ;Elbow Drop
trigger7 = prevstateno = [1204,1205] ;Air Hurricane Kicks
y = -70
x = fvar(7)*2 
ignorehitpause = 1

[State 41, Train]
type = AfterImage
trigger1 = time <= 0
time= 30
timegap= 1
framegap= 3
length= 12
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1

[State 111, 1]
type = StateTypeSet
trigger1 = animelemtime(5) = 0
physics = A


[State 111, 1]
type = null;turn
trigger1 = animelemtime(1) = 0
trigger1 = facing = enemynear,facing

[State 111, 1]
type = CtrlSet
trigger1 = animelemtime(4) = 0
value = 1
ignorehitpause =1 

[State 111, 1]
type = velset
triggerall = anim = 116
triggerall = !animtime
trigger1 = prevstateno = [600,650] ;Air Normals
trigger2 = prevstateno = 1203 ;EX Tatsu
trigger3 = prevstateno = [3000,3001] ;Rising Justice
trigger4 = prevstateno = 1100 ;Dive Kicks
trigger5 = prevstateno = 11110 ;Dive Kicks
trigger6 = prevstateno = 212 ;Elbow Drop
trigger7 = prevstateno = [1204,1205] ;Air Hurricane Kicks
X = fvar(7)
y = cond(fvar(16) <0, -fvar(16),fvar(16))

[State 111, 1]
type = ChangeState
trigger1 = !animtime
value = 118
ctrl = 1

[State 112, end]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52
;-----------------------------------------
;AIR UP DASH FALL
[Statedef 118]
type = A
movetype = I
physics = A
anim = 44
ctrl = 1
facep2 = 1

[state 0, noguard]
type = assertspecial
trigger1 = 1
flag = noairguard

[State 112, end]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52

;===================<GUARD>================
;Guard Start
[StateDef 120]
type = U
physics = U
anim = 120 + (StateType = C) + (StateType = A) * 2
 
[State 120, StateTypeSet: Standing]
type = StateTypeSet
trigger1 = !Time && StateType = S
physics = S
 
[State 120, StateTypeSet: Crouching]
type = StateTypeSet
trigger1 = !Time && StateType = C
physics = C
 
[State 120, StateTypeSet: Jumping]
type = StateTypeSet
trigger1 = !Time && StateType = A
physics = A
 
[State 120, VelSet]
type = VelSet
trigger1 = !Time && StateType != A
x = 0
y = 0
 
[State 120, Stand to Crouching]
type = StateTypeSet
trigger1 = !enemy, NumExplod(92828282) && !enemy, NumExplod(92468246)
trigger1 = !AILevel && StateType = S && command = "holddown"
trigger2 = enemy, NumExplod(92828282) || enemy, NumExplod(92468246)
trigger2 = !AILevel && StateType = S && command = "holdup"
trigger3 = AILevel && StateType = S && (EnemyNear, MoveType = A) && (EnemyNear, StateType = C)
stateType = C
physics = C
 
[State 120, Crouching to Stand]
type = StateTypeSet
trigger1 = !enemy, NumExplod(92828282) && !enemy, NumExplod(92468246)
trigger1 = !AILevel && StateType = C && command != "holddown"
trigger2 = enemy, NumExplod(92828282) || enemy, NumExplod(92468246)
trigger2 = !AILevel && StateType = C && command != "holdup"
trigger3 = AILevel && StateType = C && (EnemyNear, MoveType = A) && (EnemyNear, StateType != C)
stateType = S
physics = S
 
[State 120, AI Fix]
type = CtrlSet
trigger1 = AILevel && NumEnemy
value = (EnemyNear, Time >= 120 || Time >= 180)
 
[State 120, Change to Guard State]
type = ChangeState
trigger1 = !AnimTime || AILevel
value = 130 + (StateType = C) + (StateType = A) * 2
 
[State 120, Stop Guarding]
type = ChangeState
trigger1 = !AILevel && (ifElse(!enemy, NumExplod(94646464) && !enemy, NumExplod(92468246), ifElse(P2dist x < 0, command != "holdfwd", command != "holdback"), ifElse(P2dist x < 0, command != "holdback", command != "holdfwd")))
trigger2 = !InGuardDist
trigger3 = AILevel && NumEnemy
trigger3 = EnemyNear, HitDefAttr = SCA, AT
value = 140
 
 
;Standing Guard
[StateDef 130]
type = S
physics = S
 
[State 130, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 130
value = 130
 
[State 130, AI Fix]
type = CtrlSet
trigger1 = AILevel && NumEnemy
value = (EnemyNear, Time >= 120 || Time >= 180)
 
[State 130, Standing to Crouch]
type = ChangeState
trigger1 = !enemy, NumExplod(92828282) && !enemy, NumExplod(92468246)
trigger1 = !AILevel && StateType = S && command = "holddown"
trigger2 = enemy, NumExplod(92828282) || enemy, NumExplod(92468246)
trigger2 = !AILevel && StateType = S && command = "holdup"
trigger3 = AILevel && Random < (250 * (AILevel ** 2 / 64.0))
trigger3 = (EnemyNear, MoveType = A) && (EnemyNear, StateType = C)
value = 131
 
[State 130, Stop Guarding]
type = ChangeState
trigger1 = !AILevel && (ifElse(!enemy, NumExplod(94646464) && !enemy, NumExplod(92468246), ifElse(P2dist x < 0, command != "holdfwd", command != "holdback"), ifElse(P2dist x < 0, command != "holdback", command != "holdfwd")))
trigger2 = !InGuardDist
trigger3 = AILevel && NumEnemy
trigger3 = EnemyNear, HitDefAttr = SCA, AT
value = 140
 
[State 130, Landing Sound]
type = PlaySnd
trigger1 = !Time
trigger1 = PrevStateNo = 132 || (PrevStateNo = [154,155])
value = 52,0
 
[State 130, Landing Dust Expod]
type = Explod
trigger1 = !Time
trigger1 = PrevStateNo = 132 || (PrevStateNo = [154,155])
anim = 8102
sprpriority = -3
posType = P1
scale = 0.5,0.5
pauseMoveTime = -1
superMoveTime = -1
ownPal = 1
 
 
;Crouch Guarding
[StateDef 131]
type = C
physics = C
 
[State 131, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 131
value = 131
 
[State 131, Crouching to Standing]
type = ChangeState
trigger1 = !enemy, NumExplod(92828282) && !enemy, NumExplod(92468246)
trigger1 = !AILevel && StateType = C && command != "holddown"
trigger2 = enemy, NumExplod(92828282) || enemy, NumExplod(92468246)
trigger2 = !AILevel && StateType = C && command != "holdup"
trigger3 = AILevel && Random < (125 * (AILevel ** 2 / 64.0))
trigger3 = (EnemyNear, MoveType = A) && (EnemyNear, StateType != C)
value = 130
 
[State 131, AI Fix]
type = CtrlSet
trigger1 = AILevel && NumEnemy
value = (EnemyNear, Time >= 120 || Time >= 180)
 
[State 131, Stop Guarding]
type = ChangeState
trigger1 = !AILevel && (ifElse(!enemy, NumExplod(94646464) && !enemy, NumExplod(92468246), ifElse(P2dist x < 0, command != "holdfwd", command != "holdback"), ifElse(P2dist x < 0, command != "holdback", command != "holdfwd")))
trigger2 = !InGuardDist
trigger3 = AILevel && NumEnemy
trigger3 = EnemyNear, HitDefAttr = SCA, AT
value = 140
 
 
;Air Guard
[StateDef 132]
type = A
physics = N
 
[State 132, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 132
value = 132
 
[State 132, VelAdd]
type = VelAdd
trigger1 = 1
y = const(movement.yAccel)
 
[State 132, VarSet]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0 && vel y > 0)
 
[State 132, VelSet]
type = VelSet
trigger1 = sysvar(0)
y = 0
 
[State 132, PosSet]
type = PosSet
trigger1 = sysvar(0)
y = 0
 
[State 132, AI Fix]
type = CtrlSet
trigger1 = AILevel && NumEnemy
value = (EnemyNear, Time >= 120 || Time >= 180)
 
[State 132, Jumping to Standing]
type = ChangeState
trigger1 = sysvar(0) && InGuardDist
trigger1 = (!AILevel && (ifElse(!enemy, NumExplod(94646464) && !enemy, NumExplod(92468246), ifElse(P2dist x < 0, command = "holdfwd", command = "holdback"), ifElse(P2dist x < 0, command = "holdback", command = "holdfwd")))) || AILevel
value = 130
 
[State 132, Change to Falling]
type = ChangeState
trigger1 = sysvar(0)
value = 52
 
[State 132, Stop Guarding]
type = ChangeState
trigger1 = !AILevel && (ifElse(!enemy, NumExplod(94646464) && !enemy, NumExplod(92468246), ifElse(P2dist x < 0, command != "holdfwd", command != "holdback"), ifElse(P2dist x < 0, command != "holdback", command != "holdfwd")))
trigger2 = !InGuardDist
trigger3 = AILevel && NumEnemy
trigger3 = EnemyNear, HitDefAttr = SCA, AT
value = 140
 
 
;Guard End
[StateDef 140]
type = U
physics = U
ctrl = 1
 
[State 140, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
value = 140 + (StateType = C) + (StateType = A) * 2
 
[State 140, StateTypeSet: Standing]
type = StateTypeSet
trigger1 = !Time && StateType = S
physics = S
 
[State 140, StateTypeSet: Crouching]
type = StateTypeSet
trigger1 = !Time && StateType = C
physics = C
 
[State 140, StateTypeSet: Jumping]
type = StateTypeSet
trigger1 = !Time && StateType = A
physics = A
 
[State 140, Standing to Crouching]
type = StateTypeSet
trigger1 = !AILevel && StateType = S && (NumExplod(90000002) || NumExplod(90000001) || NumExplod(90000003))
trigger2 = AILevel && Random < (250 * (AILevel ** 2 / 64.0))
trigger2 = StateType = S && (EnemyNear, MoveType = A) && (EnemyNear, StateType = C)
stateType = C
physics = C
 
[State 140, Crouching to Standing]
type = StateTypeSet
trigger1 = !AILevel && StateType = C && (!NumExplod(90000002) && !NumExplod(90000001) && !NumExplod(90000003))
trigger2 = AILevel && Random < (125 * (AILevel ** 2 / 64.0))
trigger2 = StateType = C && (EnemyNear, MoveType = A) && (EnemyNear, StateType != C)
stateType = S
physics = S
 
[State 140, End]
type = ChangeState
trigger1 = !AnimTime
value = (StateType = C) * 11 + (StateType = A) * 51
 
 
;Hit while Guarding (Standing)
[StateDef 150]
type = S
movetype = H
physics = N
velSet = 0,0
 
[State 150, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 150
 
[State 150, End]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2 * ((!AILevel && (NumExplod(90000002) || NumExplod(90000001) || NumExplod(90000003))) || (AILevel && (EnemyNear, MoveType = A) && (EnemyNear, StateType = C)))
 
[State 150, Standing to Crouching]
type = StateTypeSet
trigger1 = !AILevel && StateType = S && (NumExplod(90000002) || NumExplod(90000001) || NumExplod(90000003))
trigger2 = AILevel && Random < (250 * (AILevel ** 2 / 64.0))
stateType = C
physics = C
 
[State 150, Crouching to Standing]
type = StateTypeSet
trigger1 = !AILevel && StateType = C && (!NumExplod(90000002) && !NumExplod(90000001) && !NumExplod(90000003))
trigger2 = AIlevel && Random < (125 * (AILevel ** 2 / 64.0))
trigger2 = StateType = C && (EnemyNear, MoveType = A) && (EnemyNear, StateType != C)
stateType = S
physics = S
 
 
;Knocked Back while Guarding (Standing)
[StateDef 151]
type = S
moveType = H
physics = S
anim = 150
 
[State 151, HitVelSet]
type = HitVelSet
trigger1 = !Time
x = 1
 
[State 151, VelSet]
type = VelSet
trigger1 = Time = GetHitVar(SlideTime)
trigger2 = HitOver
x = 0
 
[State 151, CtrlSet]
type = CtrlSet
trigger1 = time = GetHitVar(CtrlTime)
value = 1
 
[State 151, Standing to Crouching]
type = StateTypeSet
trigger1 = !AILevel && StateType = S && (NumExplod(90000002) || NumExplod(90000001) || NumExplod(90000003))
trigger2 = AILevel && Random < (250 * (AILevel ** 2 / 64.0))
trigger2 = StateType = S && (EnemyNear, MoveType = A) && (EnemyNear, StateType = C)
stateType = C
physics = C
 
[State 151, Crouching to Standing]
type = StateTypeSet
trigger1 = !AILevel && StateType = C && (!NumExplod(90000002) && !NumExplod(90000001) && !NumExplod(90000003))
trigger2 = AILevel && Random < (125 * (AILevel ** 2 / 64.0))
trigger2 = StateType = C && (EnemyNear, MoveType = A) && (EnemyNear, StateType != C)
stateType = S
physics = S
 
[State 151, End]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1
 
 
;Hit while Guarding (Crouching)
[StateDef 152]
type = C
moveType = H
physics = N
velSet = 0,0
 
[State 152, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 151
 
[State 152, End]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2 * ((!AILevel && ((!enemy, NumExplod(92828282) && !enemy, NumExplod(92468246) && command = "holddown") || ((enemy, NumExplod(92828282) || enemy, NumExplod(92468246)) && command = "holdup"))) || (AILevel && (EnemyNear, MoveType = A) && (EnemyNear, StateType = C)))
 
[State 152, Standing to Crouching]
type = StateTypeSet
trigger1 = !enemy, NumExplod(92828282) && !enemy, NumExplod(92468246)
trigger1 = !AILevel && StateType = S && command = "holddown"
trigger2 = enemy, NumExplod(92828282) || enemy, NumExplod(92468246)
trigger2 = !AILevel && StateType = S && command = "holdup"
trigger3 = AILevel && Random < (250 * (AILevel ** 2 / 64.0))
trigger3 = StateType = S && (EnemyNear, MoveType = A) && (EnemyNear, StateType = C)
stateType = C
physics = C
 
[State 152, Crouching to Standing]
type = StateTypeSet
trigger1 = !enemy, NumExplod(92828282) && !enemy, NumExplod(92468246)
trigger1 = !AILevel && StateType = C && command != "holddown"
trigger2 = enemy, NumExplod(92828282) || enemy, NumExplod(92468246)
trigger2 = !AILevel && StateType = C && command != "holdup"
trigger3 = AILevel && Random < (125 * (AILevel ** 2 / 64.0))
trigger3 = StateType = C && (EnemyNear, MoveType = A) && (EnemyNear, StateType != C)
stateType = S
physics = S
 
 
;Knocked Back while Guarding (Crouching)
[StateDef 153]
type = C
moveType = H
physics = C
anim = 151
 
[State 153, HitVelSet]
type = HitVelSet
trigger1 = !Time
x = 1
 
[State 153, VelSet]
type = VelSet
trigger1 = Time = GetHitVar(SlideTime)
trigger2 = HitOver
x = 0
 
[State 153, CtrlSet]
type = CtrlSet
trigger1 = Time = GetHitVar(CtrlTime)
value = 1
 
[State 153, Standing to Crouching]
type = StateTypeSet
trigger1 = !enemy, NumExplod(92828282) && !enemy, NumExplod(92468246)
trigger1 = !AILevel && StateType = S && command = "holddown"
trigger2 = enemy, NumExplod(92828282) || enemy, NumExplod(92468246)
trigger2 = !AILevel && StateType = S && command = "holdup"
trigger3 = AILevel && Random < (250 * (AILevel ** 2 / 64.0))
trigger3 = StateType = S && (EnemyNear, MoveType = A) && (EnemyNear, StateType = C)
stateType = C
physics = C
 
[State 153, Crouching to Standing]
type = StateTypeSet
trigger1 = !enemy, NumExplod(92828282) && !enemy, NumExplod(92468246)
trigger1 = !AILevel && StateType = C && command != "holddown"
trigger2 = enemy, NumExplod(92828282) || enemy, NumExplod(92468246)
trigger2 = !AILevel && StateType = C && command != "holdup"
trigger3 = AILevel && Random < (125 * (AILevel ** 2 / 64.0))
trigger3 = StateType = C && (EnemyNear, MoveType = A) && (EnemyNear, StateType != C)
stateType = S
physics = S
 
[State 153, End]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1
 
 
;Hit while Guarding (Jumping)
[StateDef 154]
type = A
moveType = H
physics = N
velSet = 0,0
 
[State 154, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 152
 
[State 154, End]
type = ChangeState
trigger1 = HitShakeOver
value = 155
 
 
;Knocked Back while Guarding (Jumping)
[StateDef 155]
type = A
moveType = H
physics = N
anim = 152
 
[State 155, HitVelSet]
type = HitVelSet
trigger1 = !Time
x = 1
y = 1
 
[State 155, VelAdd]
type = VelAdd
trigger1 = 1
y = const(movement.yAccel)
 
[State 155, VarSet]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0 && vel y > 0)
 
[State 155, VelSet]
type = VelSet
trigger1 = sysvar(0)
y = 0
 
[State 155, PosSet]
type = PosSet
trigger1 = sysvar(0)
y = 0
 
[State 155, End]
type = ChangeState
trigger1 = sysvar(0) && InGuardDist
trigger1 = (!AILevel && (ifElse(!enemy, NumExplod(94646464) && !enemy, NumExplod(92468246), ifElse(P2dist x < 0, command != "holdfwd", command != "holdback"), ifElse(P2dist x < 0, command != "holdback", command != "holdfwd")))) || AILevel
value = 130
 
[State 155, End]
type = ChangeState
trigger1 = sysvar(0)
value = 52
;===========================================================================
; Z COUNTER
; counter state : 750
; snap kick : 751
; Crouching SK : 752
; Lightning anim : 753
;===========================================================================


;INTRO DECIDER
[Statedef 191]
type = S
ctrl = 0

[state 191, Initial X Pos container]
type = varset
trigger1 = fvar(14) = 0 ;Not set
fvar(14) = pos x
[state 191, Initial X Pos container]
type = varset
trigger1 = fvar(15) = 0 ;Not set
fvar(15) = pos y

[state 191, random number container]
type = varset
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = var(19) = 0 ;Not set
var(19) = random%9

[state 191, TEST]
type = null;changestate
trigger1 = 1
value = 198

[State 196, VS Buu]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**18) = 0 ;Not in Simul
triggerall = time <= 0
trigger1 = random%10 < 1
trigger1 = enemy,name = "SSR Goku Black Z2i" ;Mirror Match
value = cond(teamside = 1, 194,195)

[State 196, VS Buu]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
triggerall = (var(26)&2**18) = 0 ;Not in Simul
triggerall = time <= 0
trigger1 = random%10 < 1
trigger1 = enemy,name = "SSR Goku Black Z2i" ;Mirror Match
value = cond(teamside = 1, 194,195)

[State 190, 2] ;Assert this until you want "round 1, fight" to begin
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, intro]
type = changestate
triggerall = (name = "SSR Goku Black Z2i")
trigger1 = time <= 0
;value = cond(random < 500, 192+(random%2),195+(random%3))
;value = cond(random%8<5, 192+random%8, 1990)  ;192+(random%6);cond(random < 500,192,193) 
;value = 1991
value = cond(var(19)<=3,192+random%2,cond(var(19)<=6,196+random%4,1990+cond(var(25) = 1,0,random%2)))

;---------------------------------------------------------------------------
;INTRO 1: COCKY TRANSFORMATION
[Statedef 192]
type = S
movetype = I
ctrl = 0
anim = 190
velset = 0,0

[State 0, ctrl]
type = ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 191, overlay FX]
type = explod
triggerall = !numexplod(1961)
triggerall = anim = 190
trigger1 = animelemtime(5) = 0
anim = 1961
id = 1961
pos = 7,-54
postype = P1
bindtime= 1
removetime = 60
scale = 0.3,0.3
sprpriority = 22
ontop = 1

[State 0, scale up]
type = modifyexplod
triggerall = numexplod(1961)
triggerall = anim = 190
trigger1 = animelemtime(5) >= 0
id = 1961
scale = 20,20
pos = 7,300
bindtime = 0
postype = P1
trans = addalpha
alpha = ceil(356-(time*4)),256
sprpriority = 22
persistent = 1

[State 5900, Apply Pal]
type = RemapPal
;triggerall = (var(39)&1) != 0
;trigger1 = var(58)
;Old trigger caused a brief, albeit inconsequential error message
trigger1 = var(5) > 0
trigger1 = var(5) <= var(29)
source = 1,1
dest = 1,var(5)
persistent = 1

[State 180, 1];Ensure mirror match triggers correctly
type = ChangeState
triggerall = teammode != Simul
triggerall = numenemy
trigger1 = enemy,name = "SSR Goku Black Z2i" 
trigger1 = enemy,stateno = cond(teamside = 1, 195,194)
value = cond(teamside = 1, 194,195)

[State 182, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, power up]
type = explod
triggerall = !numexplod(905)
triggerall = anim = 190
trigger1 = animelemtime(5) = 0
anim = 905
id = 905
pos = 0,0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
bindtime= 1
sprpriority = 0
[State 191, powrupend]
type = modifyexplod
triggerall = numexplod(905)
triggerall = anim = 190
trigger1 = animelemtime(15) = 0
id = 905
anim = 906
pos = 0,0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
bindtime = 1
sprpriority = 0
[State 191, powerupremove]
type = removeexplod
triggerall = numtarget(905)
trigger1 = !animtime
id = 905
[State 191, groundshock]
type = explod
triggerall = !numexplod(192)
triggerall = anim = 190
trigger1 = animelemtime(5) = 0
anim =  192
id = 192
pos = 0,0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
bindtime = 1
sprpriority = 0
[State 191, shockremove]
type = removeexplod
triggerall = numtarget(192)
trigger1 = !animtime
id = 192
[State 191, dust]
type = explod
triggerall = !numexplod(191)
triggerall = anim = 190
trigger1 = animelemtime(5) = 0
anim =  191
id = 191
pos = -31,0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
bindtime = 1
sprpriority = 1
[State 191, dustremove]
type = removeexplod
triggerall = numtarget(191)
trigger1 = !animtime
id = 191

[State 191, snd1]
type = playsnd
triggerall = anim = 190
trigger1 = animelemtime(5) = 0
value = 1301,0
channel = 18
;;volume = 100

[State 191, snd1]
type = playsnd
triggerall = anim = 190
trigger1 = animelemtime(8) = 0
value = 8,0
channel = 19
;;volume = 100

[State 191, snd1]
type = playsnd
triggerall = anim = 190
trigger1 = animelemtime(15) = 0
value = 8,1
channel = 20
;;volume = 100

[State 191, introflag] ;Essential, declares state as an Intro till "Round -, FIGHT"
type = assertspecial
trigger1 = 1
flag = intro

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(39) > 0
trigger1 = Anim != 0
trigger1 = !Animtime
value = 0

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Var(39) = 0
trigger1 = !Animtime
trigger2 = Var(39) > 0
trigger2 = Anim = 0
trigger2 = NumExplod(21) || enemy, command = "start"
trigger2 = AILevel=0
trigger3 = Var(39) > 0
trigger3 = Anim = 0
trigger3 = AILevel>0
value = 0

;---------------------------------------------------------------------------
;INTRO 2: You should learn when to quit!
[Statedef 193]
type = S
movetype = I
ctrl = 0
anim = 193
velset = 0,0

[State 0, ctrl]
type = ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 5900, Apply Pal]
type = RemapPal
;triggerall = (var(39)&1) != 0
;trigger1 = var(58)
;Old trigger caused a brief, albeit inconsequential error message
trigger1 = var(5) > 0
trigger1 = var(5) <= var(29)
source = 1,1
dest = 1,var(5)
persistent = 1

[State 180, 1];Ensure mirror match triggers correctly
type = ChangeState
triggerall = teammode != Simul
triggerall = numenemy
trigger1 = enemy,name = "SSR Goku Black Z2i" 
trigger1 = enemy,stateno = cond(teamside = 1, 195,194)
value = cond(teamside = 1, 194,195)

[State 192,voice]
type = playsnd
trigger1 = time <= 0
value = 215,11
channel = 18

[State 192,voice]
type = playsnd
triggerall = anim = 193
trigger1 = animelemtime(21) = 14
value = 0,1
channel = 19
persistent = 0

[State 182, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, introflag] ;Essential, declares state as an Intro till "Round -, FIGHT"
type = assertspecial
trigger1 = 1
flag = intro

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(39) > 0
trigger1 = Anim != 0
trigger1 = !Animtime
value = 0

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Var(39) = 0
trigger1 = !Animtime
trigger2 = Var(39) > 0
trigger2 = Anim = 0
trigger2 = NumExplod(21) || enemy, command = "start"
trigger2 = AILevel=0
trigger3 = Var(39) > 0
trigger3 = Anim = 0
trigger3 = AILevel>0
value = 0

;---------------------------------------------------------------------------
;INTRO 3: Mirror Match! (P1)
[Statedef 194]
type = S
movetype = I
ctrl = 0
anim = 194
velset = 0,0

[State 199, intro]
type = screenbound
trigger1 = 1
movecamera = 0,1
value = 1

[State 5900, Apply Pal]
type = RemapPal
;triggerall = (var(39)&1) != 0
;trigger1 = var(58)
;Old trigger caused a brief, albeit inconsequential error message
trigger1 = var(5) > 0
trigger1 = var(5) <= var(29)
source = 1,1
dest = 1,var(5)
persistent = 1

[State 194, sndstop]
type = stopsnd
trigger1 = time <= 0
channel = 18
persistent = 0
[State 194, sndstop]
type = stopsnd
trigger1 = time <= 0
channel = 19
persistent = 0
[State 194, sndstop]
type = stopsnd
trigger1 = time <= 0
channel = 20
persistent = 0

[State 194, set5]
type = posset
trigger1 = time <= 0
x = fvar(14)
y = fvar(15)
persistent = 0

[State 0, ctrl]
type = ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 192,flexsnd]
type = playsnd
triggerall = anim = 194
trigger1 = animelemtime(38) = 0
value = 0,1
channel = 18

[State 192,voice]
type = playsnd
triggerall = anim = 194
trigger1 = animelemtime(36) = 0
value = 215,12
channel = 19

[State 192,hitsnd]
type = playsnd
triggerall = anim = 194
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(4) = 0
trigger3 = animelemtime(6) = 0
trigger4 = animelemtime(8) = 0
trigger5 = animelemtime(10) = 0
trigger6 = animelemtime(12) = 0
trigger7 = animelemtime(14) = 0
trigger8 = animelemtime(16) = 0
trigger9 = animelemtime(18) = 0
trigger10 = animelemtime(20) = 0
trigger11 = animelemtime(22) = 0
value = 5,3
channel = 19

[State 192,hitsnd]
type = playsnd
triggerall = anim = 194
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(5) = 0
trigger3 = animelemtime(7) = 0
trigger4 = animelemtime(9) = 0
trigger5 = animelemtime(11) = 0
trigger6 = animelemtime(13) = 0
trigger7 = animelemtime(15) = 0
trigger8 = animelemtime(17) = 0
trigger9 = animelemtime(19) = 0
trigger10 = animelemtime(21) = 0
value = 5,4
channel = 20

[State 192,hitsnd]
type = playsnd
triggerall = anim = 194
trigger1 = animelemtime(23) = 0
value = 5,5
channel = 20

[State 192,hitsnd]
type = playsnd
triggerall = anim = 194
trigger1 = animelemtime(26) = 0
value = 5,6
channel = 20

[State 192,hitsnd]
type = AllPalFX
triggerall = anim = 194
trigger1 = animelemtime(26) = 0
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 194,posadd]
type = posadd
trigger1 = time <= 0
x = floor(-screenpos x + (gamewidth / 3)) ;+ 30
y = -50

[State 194,posadd]
type = velset
trigger1 = animelemtime(28) = 0
x = -5
y = -5

[State 194,posadd]
type = veladd
trigger1 = animelemtime(28) >= 0
trigger1 = pos y < 0
y = 0.5
persistent = 1

[State 194,posadd]
type = velset
triggerall = vel x != 0
trigger1 = abs(pos x <= fvar(14))
x = 0

[State 194,posadd]
type = changeanim
;triggerall = animelem = 34
trigger1 = (vel y >= 0 && pos y >=0)
value = anim
elem = 35 ;animelemno(0) + 1
persistent = 0

[State 194,posadd]
type = velset
trigger1 = (vel y >= 0 && pos y >=0)
y = 0

[State 194,posadd]
type = posset
trigger1 = (vel y >= 0 && pos y >=0)
x = fvar(14)
y = 0


;[State 194,posadd]
;type = posadd
;triggerall = anim = 194
;trigger1 = animelemtime(27) = 0
;x = -2
;y = 5
;[State 194,posadd]
;type = posadd
;triggerall = anim = 194
;trigger1 = animelemtime(28) = 0
;x = -2
;y = 6
;[State 194,posadd]
;type = posadd
;triggerall = anim = 194
;trigger1 = animelemtime(29) = 0
;x = -2
;y = 8
;[State 194,posadd]
;type = posadd
;triggerall = anim = 194
;trigger1 = animelemtime(30) = 0
;x = -1
;y = 6
;[State 194,posadd]
;type = posadd
;triggerall = anim = 194
;trigger1 = animelemtime(31) = 0
;x = -1
;y = 6
;[State 194,posadd]
;type = posadd
;triggerall = anim = 194
;trigger1 = animelemtime(32) = 0
;x = -1
;y = 6
;[State 194,posadd]
;type = posadd
;triggerall = anim = 194
;trigger1 = animelemtime(33) = 0
;x = -1
;y = 6
;[State 194,posadd]
;type = posadd
;triggerall = anim = 194
;trigger1 = animelemtime(34) = 0
;x = -1
;y = 3
;[State 194,posadd]
;type = posadd
;triggerall = anim = 194
;trigger1 = animelemtime(35) = 0
;y = 4

[State 182, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, introflag] ;Essential, declares state as an Intro till "Round -, FIGHT"
type = assertspecial
trigger1 = 1
flag = intro

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(39) > 0
trigger1 = Anim != 0
trigger1 = !Animtime
value = 0

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Var(39) = 0
trigger1 = !Animtime
trigger2 = Var(39) > 0
trigger2 = Anim = 0
trigger2 = NumExplod(21) || enemy, command = "start"
trigger2 = AILevel=0
trigger3 = Var(39) > 0
trigger3 = Anim = 0
trigger3 = AILevel>0
value = 0

;---------------------------------------------------------------------------
;INTRO 3: Mirror Match! (P2)
[Statedef 195]
type = S
movetype = I
ctrl = 0
anim = 195
velset = 0,0

[State 199, intro]
type = screenbound
trigger1 = 1
movecamera = 0,1
value = 1
[State 194, set5]
type = posset
trigger1 = time <= 0
y = 0
persistent = 0

[State 5900, Apply Pal]
type = RemapPal
;triggerall = (var(39)&1) != 0
;trigger1 = var(58)
;Old trigger caused a brief, albeit inconsequential error message
trigger1 = var(5) > 0
trigger1 = var(5) <= var(29)
source = 1,1
dest = 1,var(5)
persistent = 1

[State 0, ctrl]
type = ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 192,flexsnd]
type = playsnd
triggerall = anim = 195
trigger1 = animelemtime(37) = 0
value = 0,1
channel = 18

[State 192,hurtsnd]
type = playsnd
triggerall = anim = 195
trigger1 = animelemtime(27) = 1
value = 5001,1
channel = 19

[State 192,voice]
type = playsnd
triggerall = anim = 195
trigger1 = animelemtime(36) = 0
value = 0,68
channel = 20


[State 194,posadd]
type = posadd
trigger1 = time <= 0
x = floor(-screenpos x + (gamewidth / 1.5)) * facing ;+ 30
y = -50

[State 194,posadd]
type = velset
trigger1 = animelemtime(28) = 0
x = -5
y = 4

[State 194,posadd]
type = veladd
trigger1 = animelemtime(28) >= 0
trigger1 = pos y < 0
y = 0.5
persistent = 1

[State 194,posadd]
type = velset
triggerall = vel x != 0
trigger1 = abs(pos x <= fvar(14))
x = 0

[State 194,posadd]
type = changeanim
;triggerall = animelem = 34
trigger1 = (vel y >= 0 && pos y >=0)
value = anim
elem = 31 ;animelemno(0) + 1
persistent = 0

[State 194,posadd]
type = velset
trigger1 = (vel y >= 0 && pos y >=0)
y = 0

[State 194,posadd]
type = posset
trigger1 = (vel y >= 0 && pos y >=0)
x = fvar(14)
y = 0

;[State 194,posadd]
;type = posset
;trigger1 = time <= 0
;x = fvar(14) + cond(teamside = 1,23,-23)
;y = fvar(15)-50
;[State 194,posadd]
;type = posadd
;triggerall = anim = 195
;trigger1 = animelemtime(28) = 0
;x = -9
;y = 10
;[State 194,posadd]
;type = posadd
;triggerall = anim = 195
;trigger1 = animelemtime(29) = 0
;x = -5
;y = 14
;[State 194,posadd]
;type = posadd
;triggerall = anim = 195
;trigger1 = animelemtime(30) = 0
;x = -5
;y = 13
;[State 194,posadd]
;type = posadd
;triggerall = anim = 195
;trigger1 = animelemtime(31) = 0
;x = -4
;y = 13

[State 182, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, introflag] ;Essential, declares state as an Intro till "Round -, FIGHT"
type = assertspecial
trigger1 = 1
flag = intro

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(39) > 0
trigger1 = Anim != 0
trigger1 = !Animtime
value = 0

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Var(39) = 0
trigger1 = !Animtime
trigger2 = Var(39) > 0
trigger2 = Anim = 0
trigger2 = NumExplod(21) || enemy, command = "start"
trigger2 = AILevel=0
trigger3 = Var(39) > 0
trigger3 = Anim = 0
trigger3 = AILevel>0
value = 0

;---------------------------------------------------------------------------
;INTRO 4: FighterZ style
[Statedef 196]
type = S
movetype = I
ctrl = 0
anim = 196
velset = 0,0

[State 0, ctrl]
type = ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 5900, Apply Pal]
type = RemapPal
;triggerall = (var(39)&1) != 0
;trigger1 = var(58)
;Old trigger caused a brief, albeit inconsequential error message
trigger1 = var(5) > 0
trigger1 = var(5) <= var(29)
source = 1,1
dest = 1,var(5)
persistent = 1

[State 180, 1];AEnsure mirror match triggers correctly
type = ChangeState
triggerall = teammode != Simul
triggerall = numenemy
trigger1 = enemy,name = "SSR Goku Black Z2i" 
trigger1 = enemy,stateno = cond(teamside = 1, 195,194)
value = cond(teamside = 1, 194,195)

[State 890, 2]
type = Explod
triggerall = !numexplod(2430)
triggerall = anim = 196
trigger1 = animelem = 6
Anim = 2430
id = 2430
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 5,-70
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1

[State 890, 2]
type = Explod
triggerall = !numexplod(2517)
triggerall = anim = 196
trigger1 = animelem = 6
Anim = 2517
id = 2517
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 5,-70
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1

[State 191, power up]
type = explod
triggerall = !numexplod(905)
triggerall = anim = 196
trigger1 = animelem = 6
anim = 905
id = 905
pos = 0,0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
bindtime= 1
sprpriority = 0


[State 191, overlay FX]
type = explod
triggerall = !numexplod(1961)
triggerall = anim = 196
trigger1 = animelem = 6
anim = 1961
id = 1961
pos = 7,-54
postype = P1
bindtime= 1
removetime = 60
scale = 0.3,0.3
sprpriority = 22
ontop = 1

[State 0, scale up]
type = modifyexplod
triggerall = numexplod(1961)
trigger1 = animelem = 6 >=7
id = 1961
scale = ceil(356-(time*2)),ceil(356-(time*2))
pos = 7,300
postype = P1
trans = addalpha
alpha = ceil(356-(time*2)),256
sprpriority = 22
persistent = 1

[State 1900, Dust helper (Power charge)]
type = Helper
triggerall = !numhelper(908)
triggerall = anim = 196
trigger1 = animelem = 2
id = 908
name = "Dust"
pos = -10,5
postype = P1
stateno = 908
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 191, green mist]
type = explod
triggerall = !numexplod(1960)
triggerall = anim = 196
trigger1 = animelem = 1
anim = 1960
id = 1960
pos = 0,15
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
bindtime= 1
sprpriority = 0
ownpal = 1
id = 1960
ontop = 1
[State 191, green mist size]
type = modifyexplod
trigger1 = 1
scale = 2.6+0.002*(time-20),2.1+0.006*(time-20)
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
id = 1960
[State 191, green  mist]
type = removeExplod
trigger1 = numtarget(1960)
trigger1 = !target,animtime 
id = 1960

[State 191, snd1]
type = playsnd
triggerall = anim = 196
trigger1 = animelemtime(6) = 0
value = 2001,1
channel = 19
;;volume = 100

[State 191, snd1]
type = playsnd
triggerall = anim = 196
trigger1 = animelemtime(6) = 0
value = 8,1
channel = 18
;;volume = 100

[State 191, snd1]
type = playsnd
triggerall = anim = 196
trigger1 = animelemtime(1) = 0
value = 8,3
channel = 19
;;volume = 100

[State 8000, less vibrant]
type = PalFX
triggerall = anim = 196
trigger1 = animelemtime(6) < 0
add = -15,-15,-15
color = 200
time = 1

[State 192,voice]
type = playsnd
triggerall = anim = 196
trigger1 = animelemtime(1) = 0
value = 215,10
channel = 18

[State 182, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, introflag] ;Essential, declares state as an Intro till "Round -, FIGHT"
type = assertspecial
trigger1 = 1
flag = intro

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(39) > 0
trigger1 = Anim != 0
trigger1 = !Animtime
value = 0

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Var(39) = 0
trigger1 = !Animtime
trigger2 = Var(39) > 0
trigger2 = Anim = 0
trigger2 = NumExplod(21) || enemy, command = "start"
trigger2 = AILevel=0
trigger3 = Var(39) > 0
trigger3 = Anim = 0
trigger3 = AILevel>0
value = 0

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;INTRO 5: PORTAL
[Statedef 197]
type = S
movetype = I
ctrl = 0
anim = 197
velset = 0,0

[State 5900, Apply Pal]
type = RemapPal
;triggerall = (var(39)&1) != 0
;trigger1 = var(58)
;Old trigger caused a brief, albeit inconsequential error message
trigger1 = var(5) > 0
trigger1 = var(5) <= var(29)
source = 1,1
dest = 1,var(5)
persistent = 1

[State 180, 1];Ensure mirror match triggers correctly
type = ChangeState
triggerall = teammode != Simul
triggerall = numenemy
trigger1 = enemy,name = "SSR Goku Black Z2i" 
trigger1 = enemy,stateno = cond(teamside = 1, 195,194)
value = cond(teamside = 1, 194,195)

[State 0, ctrl]
type = ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 182, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, introflag] ;Essential, declares state as an Intro till "Round -, FIGHT"
type = assertspecial
trigger1 = 1
flag = intro

[State 200, Warp]
type = playsnd
trigger1 = time <= 0
value = 192, 0
channel = 18
volumescale = 300

[State 200, Warp]
type = playsnd
trigger1 = Anim = 197
trigger1 = animelem = 11
value = 300, 1
channel = 18
volumescale = 300

[State 200, Warp]
type = playsnd
trigger1 = Anim = 197
trigger1 = animelem = 2
value = 5100, 0
channel = 18
volumescale = 300

[State 730, X set]
type = PosSet
trigger1 = time <= 0
y = fvar(15)-70

[State 890, 2]
type = Explod
triggerall = !numexplod(2826)
trigger1 = Anim = 197
trigger1 = animelem = 11
Anim = 2826
id = 2826
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 15,0
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1

[State 0, Explod]
type = Explod
triggerall = !numexplod(1921)
trigger1 = time <= 0
anim = 1921
ID = 1921
pos = -30,20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
;ignorehitpause =
;trans = 
;persistent =
;supermove = 0
;pausemove = 0

[State 192, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 197
trigger1 = !animtime
value = 44
;elem = 1
;ignorehitpause =
;persistent =

[State 192, gravity]
type = Velset
trigger1 = Anim = 44
trigger1 = Animelemtime(1)=0
Y = 5

[State 192, Change to landing]
type = ChangeAnim
trigger1 = Anim = 44
trigger1 = Pos Y >= 0
value = 1970

[State 192, reset]
type = PosSet
trigger1 = Anim = 1970
trigger1 = Pos Y >= 0
Y = 0

[State 192, stop]
type = VelSet
trigger1 = Anim = 1970
Y = 0

[State 1900, Dust helper (Power charge)]
type = Helper
triggerall = !numhelper(908)
trigger1 = Anim = 1970
trigger1 = animelem = 3
id = 908
name = "Dust"
pos = -10,5
postype = P1
stateno = 908
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(39) > 0
trigger1 = Anim != 0
trigger1 = anim = 1970
trigger1 = !Animtime
value = 0

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Var(39) = 0
trigger1 = Anim=1970
trigger1 = !Animtime
trigger2 = Var(39) > 0
trigger2 = Anim = 0
trigger2 = NumExplod(21) || enemy, command = "start"
trigger2 = AILevel=0
trigger3 = Var(39) > 0
trigger3 = Anim = 0
trigger3 = AILevel>0
value = 0

;---------------------------------------------------------------------------

;INTRO 6: THUNDERSTRUCK
[Statedef 198]
type = A
movetype = I
physics = N
ctrl = 0
anim = 1922
velset = 0,0
sprpriority = 0


[state 191, Initial X Pos container]
type = varset
trigger1 = fvar(14) = 0 ;Not set
fvar(14) = pos x
[state 191, Initial X Pos container]
type = varset
trigger1 = fvar(15) = 0 ;Not set
fvar(15) = pos y

[State 5900, Apply Pal]
type = RemapPal
;triggerall = (var(39)&1) != 0
;trigger1 = var(58)
;Old trigger caused a brief, albeit inconsequential error message
trigger1 = var(5) > 0
trigger1 = var(5) <= var(29)
source = 1,1
dest = 1,var(5)
persistent = 1

[State 180, 1];Ensure mirror match triggers correctly
type = ChangeState
triggerall = teammode != Simul
triggerall = numenemy
trigger1 = enemy,name = "SSR Goku Black Z2i" 
trigger1 = enemy,stateno = cond(teamside = 1, 195,194)
value = cond(teamside = 1, 194,195)

[State 3000, Kamehameha]
type = helper
triggerall = !numhelper(19231)
triggerall = anim = 1922
trigger1 = time <= 0
;helpertype = normal
stateno = 19231
ID = 19231
name = "Victim"
postype = p1
pos = -20,0
ownpal = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = anim = 1924
id = 19240
;ignorehitpause = 
;persistent = 


[state 19231, death] ;DIO PT2
type = allpalfx
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 192390
trigger1 = helper(19231),animelemtime(11) = 0
mul = 256,256,256
invertall = 1
time = 4
persistent = 1
[state 19231, death] ;DIO PT2
type = allpalfx
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 192390
trigger1 = helper(19231),animelemtime(13) >= 0
add = -255,-255,-255
mul = 256,256,256
time = 1
persistent = 1

[state 19231, death] ;DIO PT2
type = assertspecial
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 192390
trigger1 = helper(19231),animelemtime(11) >= 0
flag = nomusic
flag2 = nobardisplay
persistent = 1

[State 0, ctrl]
type = ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

;THANOS/DIO EXCEPTION
[State 0, camera]
type = screenbound
triggerall = numhelper(19231)
;trigger1 = helper(19231), anim = 19238 || helper(19231), anim = 192380;THANOS
trigger1 = helper(19231), anim = 19238 ;THANOS
trigger2 = helper(19231), anim = 192380 ;THANOS
value = 0
movecamera = 0,0
persistent = 1

;THANOS/DIO EXCEPTION
[State 0, camera]
type = screenbound
triggerall = numhelper(19231)
;trigger1 = helper(19231), anim = 19239 || helper(19231), anim = 192390 ;DIO
trigger1 = helper(19231), anim = 19239 ;DIO
trigger2 = helper(19231), anim = 192390 ;DIO
value = 0
movecamera = 0,0
persistent = 1

[State 182, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, introflag] ;Essential, declares state as an Intro till "Round -, FIGHT"
type = assertspecial
trigger1 = 1
flag = intro

[State 198, fly up]
type = playsnd
triggerall = anim = 1922 ;Going Up
trigger1 = animelem = 2
value = 2907,0
channel = 18
volumescale = 70

[State 198, fly up]
type = posadd
triggerall = anim = 1922 ;Going Up
trigger1 = animelem = 2
x = 25
[State 198, fly up]
type = velset
triggerall = anim = 1922 ;Going Up
trigger1 = animelem = 2
y = -30

[State 198, thunder]
type = playsnd
triggerall = anim = 1922 ;Going Up
triggerall = vel y < 0
trigger1 = time  = 120
value = 2950,3
channel = 19
volumescale = 80
[State 198, thunder]
type = changeanim
triggerall = anim = 1922 ;Going Up
triggerall = vel y < 0
trigger1 = time  = 120
value = 1923
[State 198, fly up]
type = velset
trigger1 = anim = 1923 ;Going Down
trigger1 = 1
y = 35
[State 198, anim]
type = changeanim ; Thunderstruck
triggerall = anim != 1925
triggerall = anim = 1923 ;Going Down
triggerall = numexplod(1924) = 0
trigger1 = vel y >= 0
trigger1 = pos y >= 0
value = 1925
[State 198, size]
type = velset
triggerall = anim = 1925 ;Going Down
trigger1 =1
y = 0
;[State 198, size]
;type = angledraw
;trigger1 = anim = 1924 ;Going Down
;trigger1 = animelemtime(0) = 0
;scale =9,9

[State 13300, Expl]
type = Explod
triggerall = numexplod(1924) = 0
trigger1 = anim = 1925
trigger1 = animelemtime(1) = 0
anim = 1924
ID = 1924
postype = left
pos = -30,-30
bindtime = -1
removetime = 99999
pausemovetime = 99999
ontop = 1
scale = 3,3

[State 198, remove]
type = removeexplod
triggerall = anim = 1925
trigger1 = animelem = 2
id = 1924

[State 194, set5]
type = posset
trigger1 = anim = 1925
x = fvar(14)
Y = 0
persistent = 0


;----------- VICTIM SOUNDS---------------------

[state 19231, death] ;HAUZER
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 19231 ;MUST BE HAUZER
triggerall = stateno = 198
trigger1 = anim = 1925 ;Thunderstruck
trigger1 = animelemtime(1) = 0
value = 19231,0
channel = 20
[state 19231, death] ;COPY VEGETA
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 19232 ;MUST BE C.VEGETA
triggerall = stateno = 198
trigger1 = anim = 1925 ;Thunderstruck
trigger1 = animelemtime(1) = 0
value = 19231,1
channel = 20
[state 19231, death] ;JEDAH
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 19233 ;MUST BE JEDAH
triggerall = stateno = 198
trigger1 = anim = 1925 ;Thunderstruck
trigger1 = animelemtime(1) = 0
value = 19231,2
channel = 20
[state 19231, death] ;E.RYU
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 19234 ;MUST BE E.RYU
triggerall = stateno = 198
trigger1 = anim = 1925 ;Thunderstruck
trigger1 = animelemtime(1) = 0
value = 19231,3
channel = 20
[state 19231, death] ;BLACKHEART
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 19235 ;MUST BE BLACKHEART
triggerall = stateno = 198
trigger1 = anim = 1925 ;Thunderstruck
trigger1 = animelemtime(1) = 0
value = 19231,4
channel = 20
[state 19231, death] ;SATAN
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 19236 ;MUST BE SATAN
triggerall = stateno = 198
trigger1 = anim = 1925 ;Thunderstruck
trigger1 = animelemtime(1) = 0
value = 19231,5
channel = 20
[state 19231, death] ;RAVANGE
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 19237 ;MUST BE RAVANGE
triggerall = stateno = 198
trigger1 = anim = 1925 ;Thunderstruck
trigger1 = animelemtime(1) = 0
value = 19231,6
channel = 20
volumescale = 255
[state 19231, death] ;THANOS
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 192380 ;MUST BE THANOS
trigger1 = helper(19231), animelemtime(2) = 1
value = 19231,7
channel = 20
volumescale = 255
[state 19231, death] ;DIO - GRUNT
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 192390 ;MUST BE DIO
trigger1 = helper(19231), animelemtime(1) = 1
value = 19231,8
channel = 20
volumescale = 255
[state 19231, death] ;DIO - THE WORLD
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 192390 ;MUST BE DIO
trigger1 = helper(19231), animelemtime(10) = 1
value = 19232,0
channel = 20
[state 19231, dance noises] ;COOLER DANCE SOUNDS
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 19240 ;MUST BE COOLER
trigger1 = helper(19231), animelemtime(1) = 1 && Time < 145
value = 19233,0
channel = 20
[state 19231, death noises] ;COOLER DEATH SOUNDS
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),anim = 19240 ;MUST BE COOLER
trigger1 = helper(19231), animelemtime(8) = 1 && Time > 145
value = 19233,1
channel = 20
[state 19231, death] ;THUNDER 1
type = playsnd
triggerall = numhelper(19231)
triggerall = helper(19231),stateno = 198
trigger1 = anim = 11925 ;Thunderstruck
trigger1 = animelemtime(1) = 0
value = 2511,0
channel = 18
volumescale = 60
[state 19231, death] ;THUNDER 2
type = playsnd
trigger1 = anim = 1925 ;Thunderstruck
trigger1 = animelemtime(1) = 0
value = 2400,1
channel = 18
volumescale = 70

;----------- END OF SECTION ---------------------

[State 192,teleport snd]
type = playsnd
triggerall = anim = 1925
trigger1 = !animtime
value = 2302,0
channel = 18
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(39) > 0
trigger1 = Anim != 0
trigger1 = anim = 1925
trigger1 = !Animtime
value = 0

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Var(39) = 0
trigger1 = anim = 1925
trigger1 = !Animtime
trigger2 = Var(39) > 0
trigger2 = Anim = 0
trigger2 = NumExplod(21) || enemy, command = "start"
trigger2 = AILevel=0
trigger3 = Var(39) > 0
trigger3 = Anim = 0
trigger3 = AILevel>0
value = 0

;---------------------------------------------------------------------------

;INTRO 7: REMNANT
[Statedef 199]
type = S
movetype = I
physics = N
ctrl = 0
anim = 199

[State 0, ctrl]
type = ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 5900, Apply Pal]
type = RemapPal
;triggerall = (var(39)&1) != 0
;trigger1 = var(58)
;Old trigger caused a brief, albeit inconsequential error message
trigger1 = var(5) > 0
trigger1 = var(5) <= var(29)
source = 1,1
dest = 1,var(5)
persistent = 1

[State 180, 1];Ensure mirror match triggers correctly
type = ChangeState
triggerall = teammode != Simul
triggerall = numenemy
trigger1 = enemy,name = "SSR Goku Black Z2i" 
trigger1 = enemy,stateno = cond(teamside = 1, 195,194)
value = cond(teamside = 1, 194,195)

[State 199, intro]
type = assertspecial
trigger1 = 1
flag = intro

[State -2, explodtest]
type = explod
triggerall = !numexplod(1990)
triggerall = anim = 199
trigger1 = animelemtime(5) = 0
id = 1990
anim = 1990
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 0,0
removetime = -2
bindtime = -1
ontop = 1


[State 890, 2]
type = Explod
triggerall = !numexplod(2430)
triggerall = anim = 199
trigger1 = animelem = 8
Anim = 2430
id = 2430
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 5,-70
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1

[State 890, 2]
type = Explod
triggerall = !numexplod(2517)
triggerall = anim = 199
trigger1 = animelem = 8
Anim = 2517
id = 2517
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 5,-70
bindtime = 15
sprpriority = 2
ownpal = 1
removetime = -2
removeongethit = 1

[State 191, power up]
type = explod
triggerall = !numexplod(905)
triggerall = anim = 199
trigger1 = animelem = 8
anim = 905
id = 905
pos = 0,0
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
bindtime= 1
sprpriority = 0

[State 191, extend arm]
type = playsnd
triggerall = anim = 199
trigger1 = animelemtime(3) = 0
value = 0,1
channel = 18
;;volume = 100

[State 191, extend arm]
type = playsnd
triggerall = anim = 199
trigger1 = animelemtime(3) = 0
value = 15000,2
channel = 19
;;volume = 100
[State 191, extend arm]
type = playsnd
triggerall = anim = 199
trigger1 = animelemtime(3) = 0
value =  199,0
channel = 20
;;volume = 100

[state 52, Land FX]
type = explod
triggerall = !numexplod(17100)
triggerall = anim = 199
trigger1 = animelemtime(3) = 0
anim = 17100
id = 17100
postype = P1
trans = addalpha
alpha = cond(var(49) != 0 ,200,256),cond(var(49) != 0 ,128,0)
pos = 50,1
removetime = -2
supermovetime = 99999
pausemovetime = 99999

[State 191, snd1]
type = playsnd
triggerall = anim = 199
trigger1 = animelemtime(8) = 0
value = 2001,1
channel = 19
;volume = 100

[State 191, snd1]
type = playsnd
triggerall = anim = 199
trigger1 = animelemtime(8) = 0
value = 8,1
channel = 18
;volume = 100

[State 8000, less vibrant]
type = PalFX
triggerall = anim = 199
trigger1 = animelemtime(8) < 0
add = -15,-15,-15
color = 200
time = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(39) > 0
trigger1 = Anim != 0
trigger1 = !Animtime
value = 0

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Var(39) = 0
trigger1 = !Animtime
trigger2 = Var(39) > 0
trigger2 = Anim = 0
trigger2 = NumExplod(21) || enemy, command = "start"
trigger2 = AILevel=0
trigger3 = Var(39) > 0
trigger3 = Anim = 0
trigger3 = AILevel>0
value = 0

;---------------------------------------------------------------------------

;INTRO 8: SMUG DUO
[Statedef 1990]
type = S
movetype = I
physics = N
ctrl = 0
anim = 187
sprpriority = 1

[State 0, ctrl]
type = ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 5900, Apply Pal]
type = RemapPal
;triggerall = (var(39)&1) != 0
;trigger1 = var(58)
;Old trigger caused a brief, albeit inconsequential error message
trigger1 = var(5) > 0
trigger1 = var(5) <= var(29)
source = 1,1
dest = 1,var(5)
persistent = 1

[State 180, 1];Ensure mirror match triggers correctly
type = ChangeState
triggerall = teammode != Simul
triggerall = numenemy
trigger1 = enemy,name = "SSR Goku Black Z2i" 
trigger1 = enemy,stateno = cond(teamside = 1, 195,194)
value = cond(teamside = 1, 194,195)

[State 199, intro]
type = assertspecial
trigger1 = 1
flag = intro

[State -2, zamasu]
type = helper
triggerALL = !numhelper(1991)
trigger1 = time <= 0
id = 1991
stateno = 1992
postype = P1
pos = -30,0

[State 192,scoff]
type = playsnd
triggerall = anim = 187
trigger1 = animelemtime(1) = 17
value = s0,68
channel = 18
persistent = 0

[State 200, 1] ;hit ground SND
type = PlaySnd
triggerall = anim = 187
trigger1 = !animtime
value = s40,0
channel = 20
persistent = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(39) > 0
trigger1 = Anim != 0
trigger1 = !Animtime
value = 0

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Var(39) = 0
trigger1 = !Animtime
trigger2 = Var(39) > 0
trigger2 = Anim = 0
trigger2 = NumExplod(21) || enemy, command = "start"
trigger2 = AILevel=0
trigger3 = Var(39) > 0
trigger3 = Anim = 0
trigger3 = AILevel>0
value = 0

;---------------------------------------------------------------------------

;INTRO 8:(Zamasu)
[Statedef 1992]
type = S
movetype = I
physics = N
ctrl = 0
anim = 1871
sprpriority = 1

[State 199, intro]
type = assertspecial
trigger1 = 1
flag = intro

[State 192,teleport snd]
type = playsnd
trigger1 = animelemtime(2) = 0
value = 2302,0
channel = 19
persistent = 0

[state 1991, end]
type = destroyself
trigger1 = !animtime
trigger2 = root, stateno = [194,195] ;Mirror Match

;---------------------------------------------------------------------------

;INTRO 9: KILL BABIDI
[Statedef 1991]
type = S
movetype = I
physics = N
ctrl = 0
anim = 1991
sprpriority = 1

[State 0, ctrl]
type = ctrlset
trigger1 = 1
value = 0
ignorehitpause = 1
persistent = 1

[State 5900, Apply Pal]
type = RemapPal
;triggerall = (var(39)&1) != 0
;trigger1 = var(58)
;Old trigger caused a brief, albeit inconsequential error message
trigger1 = var(5) > 0
trigger1 = var(5) <= var(29)
source = 1,1
dest = 1,var(5)
persistent = 1

[State 180, 1];Ensure mirror match triggers correctly
type = ChangeState
triggerall = teammode != Simul
triggerall = numenemy
trigger1 = enemy,name = "SSR Goku Black Z2i" 
trigger1 = enemy,stateno = cond(teamside = 1, 195,194)
value = cond(teamside = 1, 194,195)

[State 199, intro]
type = assertspecial
trigger1 = 1
flag = intro
[State 199, intro]
type = screenbound
triggerall = anim != 12 && anim != 1997
trigger1 = (enemy,name != "SSR Goku Black Z2i") || (enemy,name = "SSR Goku Black Z2i" && enemy,stateno != cond(teamside = 1, 195,194))
movecamera = 0,0
value = 0
[State 199, intro]
type = screenbound
trigger1 = anim = 12 && anim = 1997
movecamera = 1,1
value = 1

[State -2, zamasu]
type = helper
triggerALL = !numhelper(19911)
triggerall = (enemy,name != "SSR Goku Black Z2i") || (enemy,name = "SSR Goku Black Z2i" && enemy,stateno != cond(teamside = 1, 195,194))
trigger1 = time <= 0
id = 19911
stateno = 19911
postype = P1
pos = -30,0

[State 1992, saet]
type = posset
triggerall = (enemy,name != "SSR Goku Black Z2i") || (enemy,name = "SSR Goku Black Z2i" && enemy,stateno != cond(teamside = 1, 195,194))
trigger1 = time <= 0
x = fvar(14) + cond(teamside = 1,-1200,1200)
y = fvar(15) - 1200

[State 1992, saet]
type = posset
triggerall = numhelper(19911)
trigger1 = helper(19911),anim = 1993
;x = helper(19911),pos x + cond(teamside = 1,-350,350)
x = helper(19911),pos x + (-350*facing)
y = helper(19911),pos y+20;-60; -350 
persistent = 0

[State 1992, saet]
type = velset
triggerall = numhelper(19911)
trigger1 = helper(19911),anim = 1993
x =vel x + (3*facing) ; pos x - (helper(19911),pos x / 34)
;y = 6
persistent = 0

[State 1992, saet]
type = changeanim
triggerall = numhelper(19911)
triggerALL = helper(19911),anim = 1993
trigger1 = teamside = 1
trigger1 = pos x - helper(19911),pos x >= -2
trigger2 = teamside = 2
trigger2 = pos x - helper(19911),pos x <= 2
value = 1996
persistent = 0

[State 1992, saet]
type = changeanim
triggerall = anim = 1996
trigger1 = animelemtime(5) >=0
value = 1996
elem = 5
persistent = 0

[State 1992, slash snd]
type = playsnd
triggerall = anim = 1996
trigger1 = animelemtime(1) = 0
value = s0,52
channel = 19

[State 1992, slash snd]
type = playsnd
triggerall = anim = 1996
trigger1 = animelemtime(1) = 0
value = s0,61
channel = 20

[State 1992, set]
type = velset
triggerall = numhelper(19911)
trigger1 = helper(19911),anim = 1993
x = 6.6
persistent = 0

;freeze when in first frame of slashing
[State 1992, sat]
type = velset
triggerall = anim = 1996
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
x = 0
y = 0
persistent = 0

[State 1992, saet]
type = posset
triggerall = anim = 1996
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
x = helper(19911),pos x + (-20*facing)
;y = helper(1911),pos y - 20
persistent = 0

;Continue falling after slash
[State 1992, sat]
type = velset
triggerall = anim = 1996
trigger1 = animelemtime(2) >= 0
x = 4.7;1.5
y = 4
persistent = 0

[state 1992, stop when hit ground]
type = velset
triggerall = anim = 1996
trigger1 = pos y >= 0 && vel y >= 0
x = 0
y = 0

[state 1992, hit ground anim]
type = changeanim
triggerall = anim = 1996
trigger1 = pos y >= 0 && vel y >= 0
value = 1997

[state 1992, pos safety]
type = posset
triggerall = anim = 1997
trigger1 = pos y > 0
y = 0

[State 200, 1] ;laugh
type = PlaySnd
triggerall = anim = 1997
trigger1 = animelemtime(1) = 0
value = s215,4
channel = 19
persistent = 1
[State 200, 1] ;hit ground SND
type = PlaySnd
triggerall = anim = 1997
trigger1 = animelemtime(1) = 0
value = s0,51
channel = 20
persistent = 1

[State 200, 1] ;dash back SND
type = PlaySnd
triggerall = anim = 1997
trigger1 = animelemtime(7) = 0
value = s100,0
channel = 20
persistent = 1

[state 1992, dash back]
type = velset
triggerall = anim = 1997
trigger1 = animelemtime(7) = 0
x = -6
y = 0

;Stop if past or on starting point
[state 1992, velset]
type = velset
triggerall = anim = 1997
trigger1 = teamside = 1
trigger1 = pos x <= fvar(14)
trigger2 = teamside = 2
trigger2 = pos x >= fvar(14)
x = 0
y = 0

[state 1992, velset]
type = changeanim
triggerall = anim = 1997
trigger1 = teamside = 1
trigger1 = pos x <= fvar(14)
trigger2 = teamside = 2
trigger2 = pos x >= fvar(14)
value = 12

[State 200, 1] ;hit ground SND
type = PlaySnd
triggerall = anim = 12
trigger1 = animelemtime(1) = 0
value = s0,51
channel = 19
persistent = 1


[state 1992, velset]
type = posset
triggerall = anim = 1997
trigger1 = teamside = 1
trigger1 = pos x < fvar(14)
trigger2 = teamside = 2
trigger2 = pos x > fvar(14)
x = fvar(14)
;x = pos x - fvar(14)
persistent = 0

[state 1992, velset]
type = posset
trigger1 = anim = 12
x = fvar(14)
;x = pos x - fvar(14)
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Var(39) > 0
trigger1 = Anim != 0
trigger1 = !Animtime
value = 0

;What??!
[state 1992, SND]
type = playsnd
triggerall = (enemy,name != "SSR Goku Black Z2i") || (enemy,name = "SSR Goku Black Z2i" && enemy,stateno != cond(teamside = 1, 195,194))
trigger1 = time <= 0
value = s1902,random%2
channel = 18

;Help Me!
[state 1992, SND]
type = playsnd
triggerall = numhelper(19911)
triggerall = helper(19911),anim = 1992
trigger1 = teamside = 1
trigger1 = helper(19911),pos x >= fvar(14) - 40
trigger2 = teamside = 2
trigger2 = helper(19911),pos x <= fvar(14) + 40
value = s1901,1
channel = 18
persistent = 0

;Death snd
[State 1992, slash snd]
type = playsnd
triggerall = anim = 1996
trigger1 = animelemtime(1) = 0
value = s1901,0
channel = 18

[State 190, 4] ;Change to stand state
type = ChangeState
trigger1 = Var(39) = 0
trigger1 = anim = 12
trigger1 = !Animtime
trigger2 = Var(39) > 0
trigger2 = Anim = 0
trigger2 = NumExplod(21) || enemy, command = "start"
trigger2 = AILevel=0
trigger3 = Var(39) > 0
trigger3 = Anim = 0
trigger3 = AILevel>0
value = 0

;---------------------------------------------------------------------------

;INTRO 9: BABIDI
[Statedef 19911]
type = S
movetype = I
physics = N
ctrl = 0
anim = 1992
sprpriority = 1
velset = 0.55,0

[State pal]
type = remappal
trigger1 = time <= 0
trigger1 = root,ID <= 59  ;Incase of weird Mugen build shenanigans
source = 1991,0
dest = 1991,root,ID - 56;1 ;Root can only ever be 56-59 so this calculation correspoonds to 0-3
persistent = 0

;Set Babidi closawe to starting position
[State 1992, saet]
type = posset
trigger1 = time <= 0
x = root,fvar(14) + cond(teamside = 1,-80,80)
y = root,fvar(15) - 80

[State 1992, saet]
type = turn
trigger1 = time <= 0

[state 1992, blocking]
type = changeanim
triggerall = anim = 1992
trigger1 = teamside = 1
trigger1 = pos x >= root,fvar(14) - 40
trigger2 = teamside = 2
trigger2 = pos x <= root,fvar(14) + 40
value = 1993

[state 1992, hit to falling]
type = changeanim
triggerall = root,anim = 1996
trigger1 = root,animelemtime(1) >= 0 && root,animelemtime(2) < 0
value = 1994

[state 1992, freeze when black is slashing]
type = velset
triggerall = root,anim = 1996
trigger1 = root,animelemtime(1) >= 0 && root,animelemtime(2) < 0
x = 0
y = 0

[state 1992,fly up when slash is over]
type = velset
triggerall = anim = 1994
trigger1 = root,animelemtime(2) >= 0 
x = -9.5
y = 4

[state 1992,fly up when slash is over]
type = veladd
triggerall = anim = 1994
trigger1 = root,animelemtime(2) >= 0
y = 0.5


[state 1992, fstop when hit ground]
type = velset
triggerall = anim = 1994
trigger1 = pos y >= 0 && vel y >= 0
x = 0
y = 0

[state 1992, hit ground anim]
type = changeanim
triggerall = anim = 1994
trigger1 = pos y >= 0 && vel y >= 0
value = 1995

[state 1992, pos safety]
type = posset
triggerall = anim = 1995
trigger1 = pos y > 0
y = 0


[State -2, Hitting ground sound effect];Weak sound effect, second bounce
type		= PlaySnd
triggerall = anim = 1995
trigger1 = animelemtime(1) = 0
value		= 15000, 0
ignorehitpause	= 1
channel		= 23

[State 199, intro]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 0

[State 199, intro]
type = assertspecial
trigger1 = 1
flag = intro

[state 1991, end]
type = destroyself
trigger1 = anim = 1995 ;Babidi hit ground
trigger1 = !animtime
trigger2 = root, stateno = [194,195] ;Mirror Match


;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;Knocked Back while Guarding (Crouching)
[StateDef 153]
type = C
moveType = H
physics = C
anim = 151

[State 153, VelSet]
type = VelSet
trigger1 = Time = GetHitVar(SlideTime)
trigger2 = HitOver
x = 0

[State 153, CtrlSet]
type = CtrlSet
trigger1 = Time = GetHitVar(CtrlTime)
value = 1

[State 153, Standing to Crouching]
type = StateTypeSet
trigger1 = !enemy, NumExplod(92828282) && !enemy, NumExplod(92468246)
trigger1 = !AILevel && StateType = S && command = "holddown"
trigger2 = enemy, NumExplod(92828282) || enemy, NumExplod(92468246)
trigger2 = !AILevel && StateType = S && command = "holdup"
trigger3 = AILevel && Random < (250 * (AILevel ** 2 / 64.0))
trigger3 = StateType = S && (EnemyNear, MoveType = A) && (EnemyNear, StateType = C)
stateType = C
physics = C

[State 153, Crouching to Standing]
type = StateTypeSet
trigger1 = !enemy, NumExplod(92828282) && !enemy, NumExplod(92468246)
trigger1 = !AILevel && StateType = C && command != "holddown"
trigger2 = enemy, NumExplod(92828282) || enemy, NumExplod(92468246)
trigger2 = !AILevel && StateType = C && command != "holdup"
trigger3 = AILevel && Random < (125 * (AILevel ** 2 / 64.0))
trigger3 = StateType = C && (EnemyNear, MoveType = A) && (EnemyNear, StateType != C)
stateType = S
physics = S

[State 153, End]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1


;Hit while Guarding (Jumping)
[StateDef 154]
type = A
moveType = H
physics = N
velSet = 0,0

[State 154, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, End]
type = ChangeState
trigger1 = HitShakeOver
value = 155


;Knocked Back while Guarding (Jumping)
[StateDef 155]
type = A
moveType = H
physics = N
anim = 152

[State 155, VelAdd]
type = VelAdd
trigger1 = 1
y = const(movement.yAccel)

[State 155, CtrlSet]
type = CtrlSet
trigger1 = Time = GetHitVar(CtrlTime)
value = 1

[State 155, VarSet]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0 && vel y > 0)

[State 155, VelSet]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, PosSet]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, End]
type = ChangeState
trigger1 = sysvar(0) && InGuardDist
trigger1 = (!AILevel && (cond(!enemy, NumExplod(94646464) && !enemy, NumExplod(92468246), cond(P2dist x < 0, command != "holdfwd", command != "holdback"), cond(P2dist x < 0, command != "holdback", command != "holdfwd")))) || AILevel
value = 130

[State 155, End]
type = ChangeState
trigger1 = sysvar(0)
value = 52


;===========================================================================
; ZERO COUNTER
; counter state : 750
; Elbow! (f+2p) : 751
; Stab! (f+2k) : 755
; Lightning anim : 753
;===========================================================================
[Statedef 750]
type = S
physics = S
movetype = I
anim = 750
ctrl = 0
velset = 0,0
poweradd = -1000
sprpriority = 2
facep2 = 1

[State 750, Punches or Kicks?]
type		= VarSet
trigger1		= !Time && !AILevel
var(17)		= IfElse(((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90000006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90000004))) && ((ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)),1,2)
ignorehitpause	= 1

[State 750, Punches or Kicks?]
type		= VarSet
trigger1		= !Time && AILevel
var(17)		= IfElse(p2bodydist x > 70, 1,2)
ignorehitpause	= 1

[State 750, Punches or Kicks?]
type		= VarSet
triggerall          = p2statetype != A
trigger1		= !Time && AILevel>0
trigger1            = (p2bodydist x=[61,120])
var(17)		= 1
ignorehitpause	= 1
[State 750, Punches or Kicks?]
type		= VarSet
triggerall          = p2statetype != A
trigger1		= !Time && AILevel>0
trigger1            = (p2bodydist x!=[0,120])
var(17)		= 0
ignorehitpause	= 1

[State 750, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 750, ECreset]
type = palfx
trigger1 = !time
time = 1

[State 900, 2]
type = EnvColor
trigger1 = !Time
value = 240,240,240 
time = 1

[State 900, 3] ;Counter Lightning
type = Explod
trigger1 = !Time
anim = 753
sprpriority = 10
pos = 40, Floor(-ScreenPos Y)
postype = P1
persistent = 0
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 750, superpause]
type = superpause
trigger1 = !time
time = 20
movetime = 20
anim = -1
sound = s750,0
p2defmul = 1
darken = 0

[State 750, end]
type = changestate
trigger1 =  time>=20
value = Cond(var(17)=1,751,755)

;---------------------------------
;make sure zetto attacks can be hit after they can no longer hit the opponent

;Punch Zetto
[StateDef 751]
type = S
physics = S
movetype = A
ctrl = 0
anim = 751
velset = 0,0
sprpriority = 3
juggle = 15

[State 100, A must for dashes everywhere]
type = Assertspecial
trigger1 = 1
flag = nowalk
[State 100, No Turn]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[state 0, invul[]
type = nothitby
triggerall = !movecontact
trigger1 = animelemtime(6) < 0
value = SCA,NA,SA,HA,NP,SP,HP

[state 0, invul[]
type = hitby
triggerall = !movecontact
trigger1 = animelemtime(6) < 0
value = SCA,NT,ST,HT

[State 250, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0,2
channel = 2

[State 250, 1]
type = PlaySnd
trigger1 = AnimElem = 7
value = 40,1
channel = 1

[State 250, 1]
type = PlaySnd
trigger1 = AnimElem = 10
value = 40,0
channel = 1

[state 52, Land FX]
type = helper
triggerall = !numhelper(17100)
trigger1 = animelemtime(10) = 0
name = "LandFX"
StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

[State 1200, 2]
type = HitDef
triggerall = Var(1) <= var(36) 
trigger1 = AnimElem = 5
attr = S, SA
animtype  = Hard
pausetime = 10,10
damage    = 50, 11
sparkno = s7030
guard.sparkno = s7000
priority  = 5
guardflag = MA
sparkxy = -8,-49
hitsound   = S5, 5
guardsound = S6,1
ground.type = Low
ground.slidetime = 25
ground.hittime  = 25
guard.hittime = 4
nochainid = 3000
ground.velocity = -5, 0;-3
ground.cornerpush.veloff = -12 ;To push far away when p2 is in corner
guard.velocity = 0
air.velocity = -12, -2
airguard.velocity = -3.5,-4.5
p2facing = 1
persistent = 0
getpower = 0, 35;make sure you get no power
fall.recover = 0
fall = 0;1
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
air.fall = 1
kill = 0;make sure it cannot kill

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit=1
fvar(13) = 23
ignorehitpause = 1
persistent = 0

;;juggle limit LVL2
[State 0, VarAdd]
type = VarAdd
trigger1 = MoveHit = 1
var(1) = var(36) +1
Ignorehitpause = 1
persistent = 0

;[State 0, pushbox] ;Not needed
;type = width
;trigger1 = animelemtime(3) < 0
;value = floor(48+ enemynear,vel x), 20
;persistent = 1
;[State 0, pushbox]
;type = width
;trigger1 = animelemtime(3) >= 0
;value = floor(10+ enemynear,vel x), 20
;persistent = 1

[State 0, adjust]
type = posadd
trigger1 = animelemtime(2) = 0
x = 18
persistent = 0

[State 0, adjust]
type = posadd
trigger1 = animelemtime(2) = 1
x = 18
persistent = 0

[State 0, adjust]
type = posadd
trigger1 = animelemtime(2) = 2
x = 18
persistent = 0

[State 0, adjust]
type = posadd
trigger1 = animelemtime(3) = 0
x = 5
persistent = 0

[State 0, adjust]
type = posadd
trigger1 = animelemtime(3) = 1
x = 5
persistent = 0

[State 1500]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------
;make sure zetto attacks can be hit after they can no longer hit the opponent

; Kick Zetto
[Statedef 755]
type = S
movetype = A
physics = N
anim = 755
ctrl = 0
sprpriority = 3
juggle = 15

[State 100, A must for dashes everywhere]
type = Assertspecial
trigger1 = 1
flag = nowalk
[State 100, No Turn]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[state 0, invul[]
type = nothitby
triggerall = !movecontact
trigger1 = animelemtime(16) < 0
value = SCA,NA,SA,HA,NP,SP,HP

[state 0, invul[]
type = hitby
triggerall = !movecontact
trigger1 = animelemtime(16) < 0
value = SCA,NT,ST,HT

[State 250, 2]
type = HitDef
triggerall = P2BodyDist x > 0 ;In front of Black
triggerall = Var(1) <= var(36) 
trigger1 = Movecontact = 0;AnimElem = 3
attr = S, NA
animtype  = Hard
damage    = 17,0
priority = 4, Hit
guardflag = MA
pausetime = 15,15
guard.pausetime = 15,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-80
hitsound   = s0,61
;hitsound   = s5,5
guardsound = S6,1
ground.type = high
ground.slidetime = 15
ground.hittime = 20
ground.velocity = 2,-3.5
guard.velocity = -9
air.velocity = 3,-3
air.animtype = Back
fall.animtype = Back
yaccel = 0.45
envshake.time = 20
envshake.freq = 180
envshake.ampl = -6 
getpower = 0, 35;make sure you get no power
fall.recover = 0
fall = 1
air.fall = 1
kill = 0;make sure it cannot kill
ID = 751

[State 802, TargetState]
type = Null
triggerALL = cond(numtarget,!(target,IsHelper),0)
trigger1 = movehit = 1
value = stateno + 1
ID = stateno
ignorehitpause = 0
persistent = 0

[State 620, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 52
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit=1
fvar(13) = 23
ignorehitpause = 1
persistent = 0

;[State 802, TargetState]
;type = TargetState
;trigger1 = cond(numtarget,!(target,IsHelper),0)
;trigger1 = movehit = 1
;value = 5951
;ignorehitpause = 1
;persistent = 0

[State 0, adjust anim]
type = changeanim
;triggerall = fvar(13) = 23
;trigger1 = Pos x - enemynear, pos x > -50
trigger1 = movehit=1
value = anim
elem = cond(animelemno(0) + 1 = 12, 12, animelemno(0) + 2)
ignorehitpause = 1
persistent = 0

[State 0, adjust]
type = null;Posadd
;triggerall = enemynear,statetype != A
trigger1 = animelemtime(2) = 0
x = cond(facing = 1,-50,-50)
;x = cond(P2Dist x < 39, P2Dist x, 39)
ignorehitpause = 1
persistent = 0

[State 100, snd]
type = playsnd
trigger1 = animelemtime(2) = 0
value = 5,8
persistent = 0

[State 0, adjust]
type = null;Width
trigger1 = animelemtime(1) = 0 ;movehit=0
value = 250,200
ignorehitpause = 1
persistent = 1

[State 0, adjust]
type = Width
trigger1 = movehit=1
value = 0,33
ignorehitpause = 1
persistent = 1

[State 0, adjust]
type = Playerpush
trigger1 = movehit=1
value = 0
ignorehitpause = 1
persistent = 1

[State 0, adjust]
type = offset
trigger1 = animelemtime(3) >= 0 && animelemtime(19) < 0
y = -20
ignorehitpause = 1
persistent = 1

[State 0, pushbox]
type = width
trigger1 = animelemtime(3) < 0
value = floor(48+ enemynear,vel x), 20
persistent = 1
[State 0, pushbox]
type = width
trigger1 = animelemtime(3) >= 0
value = floor(10+ enemynear,vel x), 20
persistent = 1

[State 0, adjust]
type = veladd
trigger1 = animelemtime(2) = 0
x = 6
ignorehitpause = 1
persistent = 0

[State 0, adjust]
type = veladd
trigger1 = animelemtime(3) = 0
x = 5
ignorehitpause = 1
persistent = 0

[State 0, adjust]
type = veladd
trigger1 = movehit=1
x = 3
ignorehitpause = 1
persistent = 0

[State 0, adjust]
type = veladd
trigger1 = animelemtime(3) > 0 && animelemtime(19) < 0
x = -0.2
ignorehitpause = 1
persistent = 1


[State 0, adjust]
type = velmul
trigger1 = animelemtime(19) = 0
x = 0.6
ignorehitpause = 1
persistent = 0

[State 0, adjust]
type = veladd
triggerall = vel x > 1
trigger1 = animelemtime(19) > 0
x = vel x /12
ignorehitpause = 1
persistent = 1

[State 0, adjust]
type = velset
trigger1 = animelemtime(19) > 0
x = -1
ignorehitpause = 1
persistent = 1

[State 0, turn]
type = turn
trigger1 = animelemtime(18) = 0

[state 52, Land FX]
type = helper
triggerall = !numhelper(17100)
trigger1 = animelemtime(19) = 0
name = "LandFX"
StateNo = 17100
id = 17100
postype = P1
ownpal = 1
keyctrl = 0
supermovetime = 99999
pausemovetime = 99999

;This controller plays a sound everytime the player lands from a jump, or from a back-dash.
[State -3, Landing Sound]
type = PlaySnd
trigger1 = animelemtime(19) = 0
value = 40, 0

[State 100, snd]
type = playsnd
trigger1 = animelemtime(19) = 0
value = 5,8
persistent = 0

[State 0, Explod]
type = Explod
triggerall = !numexplod(1216)
trigger1 = animelemtime(19) = 0
anim = 1216
ID =  1216
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 1,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 1500]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;===========================================================================
;P2 KZC Get Hit
[Statedef 756]
type = A
movetype = H
physics = N
anim = cond(selfanimexist(5052),5052,5030)
velset = gethitvar(xvel)  * facing, gethitvar(yvel)
ctrl = 0
facep2 = 1

;[State 802, Forward throw pause]
;type = pause
;trigger1 = prevstateno = 822
;time = 16
;movetime = 0
;ignorehitpause = 1
;persistent = 0

[state pushbox]
type = playerpush
trigger1 = 1
value = 0

[State 802, Forward throw pause]
type = velset
trigger1 = prevstateno = 822
x = -3.86
y =  -4.5
ignorehitpause = 1
persistent = 0

[State 802, Forward throw pause failsafe]
type = velset
triggerall = time <= 0
trigger1 = vel x = 0
trigger2 = vel y = 0
x = -3.86
y =  -4.5
ignorehitpause = 1
persistent = 0



;ground.velocity = -3.86, -4

[State 9011, VelAdd]
type = VelAdd
trigger1 = 1;(Pos Y < 0)
y = 0.35

[State 9011, ChangeState]
type =  changestate
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5952

;===========================================================================
; AERIAL ZERO COUNTER
; counter state : 760
; Zerou Counter Punch - a.SP : 761
; Zero Counter Kick - a.SK : 762
; Lightning anim : 753
;===========================================================================
[Statedef 760]
type = A
physics = N
movetype = I
anim = 122
ctrl = 0
;velset = 0,0
poweradd = -1000
sprpriority = 2
facep2 = 1

[State 2302, pause]
type = pause
trigger1 = !time
time = 7
movetime = 7
ignorehitpause = 1

[State 750, Punches or Kicks?]
type		= VarSet
trigger1		= !Time && !AILevel
var(17)		= IfElse(((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90000006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90000004))) && ((ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)),1,2)
ignorehitpause	= 1

[State 750, Punches or Kicks?]
type		= VarSet
trigger1		= !Time && AILevel>0
var(17)		= 1
ignorehitpause	= 1

[State 750, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 750, ECreset]
type = palfx
trigger1 = !time
time = 1

[State 900, 2]
type = EnvColor
trigger1 = !Time
value = 240,240,240 
time = 1

[State 900, 3] ;Counter Lightning
type = Explod
trigger1 = !Time
anim = 753
sprpriority = 10
pos = 40, Floor(-ScreenPos Y)
postype = P1
persistent = 0
pausemovetime = -1
supermovetime = -1
ownpal = 1

[State 750, superpause]
type = superpause
trigger1 = !time
time = 20
movetime = 20
anim = -1
sound = s750,0
p2defmul = 1
darken = 0

[State 750, end]
type = changestate
trigger1 = time >= 10 ;!animtime
value = ifelse(var(17)=1,761,762)

;---------------------------------------------------------------------------
;make sure zetto attacks can be hit after they can no longer hit the opponent

; Jump Punch Zetto
[Statedef 761]
type = A
movetype = A
physics = N
anim = 761
ctrl = 0
sprpriority = 2
juggle = 15
velset = 0,0

[State 620, 2]
type = PlaySnd
trigger1 = AnimElem = 6
value = 0, 52
persistent = 0

[State 650, 3];Opponent in air sent to custom bounce state
type = HitDef
triggerall = Var(1) <= var(36) 
trigger1 = AnimElem = 6
attr = A, NA
damage = 38,0
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,15
guard.pausetime = 16,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s0,61
guardsound = S6,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -12*cos(pi/4),12*sin(pi/4) ;45 degree fall. Speed of 12
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
yaccel = 0.35
getpower = 0, 35;make sure you get no power
fall.recover = 0
fall = 1
kill = 0;make sure it cannot kill
ID = 751 ;5951

;[State 750, superpause]
;type = targetstate
;trigger1 = cond(numtarget,!(target,ishelper),0)
;trigger1 = movehit = 1
;value = stateno + 2
;persistent = 0

[state 0, invul[]
type = nothitby
triggerall = !movecontact
trigger1 = animelemtime(6) < 0
value = SCA,NA,SA,HA

[state 0, invul[]
type = hitby
triggerall = !movecontact
trigger1 = animelemtime(6) < 0
value = SCA,NP,SP,HP,NT,ST,HT

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit=1
fvar(13) = 23
ignorehitpause = 1
persistent = 0

[State grounded]
type = posset
trigger1 = animelemtime(7) >= 0
y = 0

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = ifelse(vel X >= 0,50,116)
ctrl = 0

;---------------------------------------------------------------------------
;make sure zetto attacks can be hit after they can no longer hit the opponent

; Jump Kick Zetto
[Statedef 762]
type = A
movetype = A
physics = A
anim = 762 ;650
ctrl = 0
sprpriority = 2
juggle = 15

[State 250, 2]
type = HitDef
triggerall = Var(1) <= var(36) 
trigger1 = AnimElem = 10
attr = A, NA
animtype  = Hard
damage    = 64,0
priority = 4, Hit
guardflag = MA
pausetime = 16,16
guard.pausetime = 16,15
sparkno = s7030
guard.sparkno = s7000
sparkxy = -20,-74
hitsound   = s5,5
guardsound = S6,1
ground.type = low
ground.slidetime = 15
ground.hittime = 20
ground.velocity = -9
air.velocity = -4,-4
air.animtype = back
yaccel = 0.5
getpower = 0, 35;make sure you get no power
fall.recover = 0
fall = 1
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
kill = 0;make sure it cannot kill
ID = 751

[state 0, invul[]
type = nothitby
triggerall = !movecontact
trigger1 = animelemtime(13) < 0
value = SCA,NA,SA,HA

[state 0, invul[]
type = hitby
triggerall = !movecontact
trigger1 = animelemtime(13) < 0
value = SCA,NP,SP,HP,NT,ST,HT

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit=1
fvar(13) = 23
ignorehitpause = 1
persistent = 0

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = ifelse(vel X >= 0,50,116)
ctrl = 0

;Zetto Ground Recovery
[Statedef 799]
type    = L
movetype= H
physics = N
 
 
[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, SelfState]
type = SelfState
trigger1 = 1
value = 5200


;Dash collision
[Statedef 950]
type		= S
physics		= S
movetype		= A
anim		= 950
ctrl		= 0
velset		= 0,0
sprpriority	= 2

[state 0, vel x ]
type = veladd
trigger1 = prevstateno = 899 && enemy,var(0) = 2 && var(0) = 1
x = -0.01

[State 950, Smoke Explod]; Smoke FX
type		= Explod
trigger1		= Time = 5 && NumExplod(956)=0 && TeamSide = 1
anim		= 956
pos		= 45,0
postype		= p1
removetime	= -2
scale		= 1,1
sprpriority	= 0
id		= 956
bindtime		= -1
ownpal		= 1
ignorehitpause	= 1
pausemovetime	= -1
;[State 950, Collision Explod solid]; Collision FX
;type		= Explod
;triggerall	= var(2) = 0 ;solid
;trigger1		= Time = 5 && NumExplod(955)=0 && TeamSide = 1
;anim		= 955
;pos		= 45,-56
;postype		= p1
;removetime	= 80
;supermove		= 1
;sprpriority	= 0
;id		= 955
;bindtime		= -1
;ontop		= 1
;ownpal		= 1
;ignorehitpause	= 1
;pausemovetime	= -1
;[State 950,  Collision Explod transparent]; Collision FX
;type		= Explod
;triggerall	= var(2) = 1 ;transparent
;trigger1		= Time = 5 && NumExplod(955)=0 && TeamSide = 1
;anim		= 958
;pos		= 45,-56
;postype		= p1
;removetime	= 80
;supermove		= 1
;sprpriority	= 0
;id		= 955
;bindtime		= -1
;ontop		= 1
;ownpal		= 1
;ignorehitpause	= 1
;pausemovetime	= -1
;
;[state 950, scale FX]
;type		= ModifyExplod
;trigger1		= NumExplod(955)
;scale		= 0.9+0.1*sin(0.1*time),0.9+0.1*sin(0.1*time)
;id		= 955

[State 950, Explod]; White FG
type		= Explod
trigger1		= Time = 5 && NumExplod(957)=0 && TeamSide = 1
anim		= 957
pos		= 0,0
postype		= left
removetime	= 3
scale		= 1,1
sprpriority	= 7
id		= 957
bindtime		= -1
ontop		= 1
ownpal		= 1
ignorehitpause	= 1
pausemovetime	= -1

[State 950, Notification]
type		= helper
triggerall 	= 	!numhelper(13200)
trigger1		= Time = 5 && TeamSide = 1
stateno		= 13200
ID		= 13200
name		= "notif-col"
postype		= p1
pos		= 45,-57
ownpal		= 1
pausemovetime	= 65535
supermovetime	= 65535
ignorehitpause	= 1
facing		= -1

[State 950, PosAdd 1]
type		= PosAdd
trigger1		= P2bodydist X < 10
X		= -8
[State 950, PosAdd 2]
type		= PosAdd
trigger1		= P2bodydist X < 25
X		= -5
[State 950, PosAdd 3]
type		= PosAdd
trigger1		= P2bodydist X < 35
X		= -2
[State 950, PosAdd 4]
type		= PosAdd
trigger1		= P2bodydist X < 40
X		= -1

[State 950, Width]
type		= Width
trigger1		= 1
edge		= 50,40

[State 950, Grab SND]
type		= PlaySnd
trigger1		= Time = 5
value		= 800,1

[State 950, Voice];Scream
type		= PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1		= Time = 5
value		= 8,2
volumescale		= 255

[State 950, Explosion SND]
type		= PlaySnd
trigger1		= Time = 5 && TeamSide = 1
value		= 950,0

[State 950, 1];Scream
type		= PlaySnd
triggerall = (name = "SSR Goku Black Z2i")
trigger1		= Time = 5
value		= 210,6
volumescale		= 255

[State 950, shake]
type		= EnvShake
trigger1		= !(time%4)
time		= 8
freq		= 20
ampl		= 1+0.1*time

[State 950, count]
type		= VarSet
trigger1		= time <= 0
var(30)		= 0
[State 950, count]
type		= VarAdd
triggerall	= time < 75
trigger1		= command="x" || command="y" || command="z" || command="a" || command="b" || command="c" || command="start"
trigger2		= command = "up" || command = "down" || command = "back" || command = "fwd"
var(30)		= 1

[State 950, ChangeState - Winning]
type		= Changestate
triggerall	= time = 80
trigger1		= var(30) > enemy,var(30)
value		= 951

[State 950, ChangeState - Losing]
type		= Changestate
triggerall	= time = 80
trigger1		= var(30) < enemy,var(30)
value		= 0
ctrl		= 0	;so you don't get away with the punishment >:)

[State 950, ChangeState - Draw]
type		= Changestate
triggerall	= time = 80
trigger1		= var(30) = enemy, var(30)
value		= 105
ctrl		= 0

[State 950, ChangeState - ABORT];this was missing from the HDBZ engine tweaks/fixes topic. Copied from GotenksZ2.
type		= Changestate
trigger1		= enemy,stateno != 950 && enemy,stateno != 951 && Time>=4 && Time<50
value		= 952
ctrl		= 1

;-----------------------------------------
;Grabbing
[Statedef 951]
type		= S
movetype		= A
physics		= S
juggle		= 15
velset		= 0,0
ctrl		= 0
anim		= 951
sprpriority	= 1
facep2		= 1
poweradd		= 20

[State 800, Don't Guard]
type		= attackdist
trigger1		= 1
value		= 0

[State 800, hit]
type		= HitDef
trigger1		= AnimElem = 1
attr		= S,NT
hitflag		= M- 
priority		= 1,Miss 
sparkno		= -1
p1facing		= 1
p2facing		= 1
;p1stateno		= 801
guard.dist	= 0
fall		= 1
fall.recover	= 0
;Control P2 during Winposes system by altoiddealer
fall.envshake.freq = TeamSide ;Optional... but recommended as another failproof
fall.envshake.ampl = ID ;REQUIRED

[State 0, ChangeState]
type = ChangeState
trigger1 = MoveHit = 1
value = 960
ignorehitpause = 1
persistent = 0

[State 951, Abort]
type		= ChangeState
trigger1		= time = 5;2
value		= 952
ctrl		= 0
ignorehitpause	= 1

;-----------------------------------------
;Abort Dash Collision
[Statedef 952];to avoid bugs
type		= S
physics		= N
movetype		= A
ctrl		= 0
velset		= 0,0;cond((prevstateno = 950 && enemy,var(0) = 2 && var(0) = 1),vel x - 1.7,0),0
velset		= 0,0
sprpriority	= 2

[state 200, snd]
type = playsnd
trigger1 = time <= 0
value = 200,1
channel = 2
persistent = 0

[State 0, push fx]
type = explod
triggerall = time <= 0
triggerall = prevstateno = 950 && enemy,var(0) = 2 && var(0) = 1
trigger1 = !Numexplod(899161)
id = 899161
anim = 899161
pos = floor(40+(0.4*time)),-4
postype = P1
bindtime = 1
sprpriority	= 3
removetime = -2
pausemovetime = 9999
supermovetime = 9999

[State 0, push fx]
type = helper
triggerall = time <= 0
triggerall = prevstateno = 950 && enemy,var(0) = 2 && var(0) = 1
trigger1 = !Numhelper(899161)
id = 899161
stateno = 899161
pos = 0,0
postype = P1
pausemovetime = 9999
supermovetime = 9999

[State 952, RemoveExplod]
type		= ModifyExplod
trigger1 = Numexplod(899161)
id = 899161
;anim = 899161
pos = floor(40+(0.4*time)),-4
postype = P1
bindtime = 1

[state pushback]
type = posadd
triggerall = prevstateno = 950 && enemy,var(0) = 2 && var(0) = 1
trigger1 = time <= 0
x = 20
persistent = 0

[state pushback]
type = posadd
triggerall = Numhelper(899161)
trigger1 = Helper(899161),var(6) = 1 ;Check if this var is on
trigger1 = Helper(899161),var(5) = 1 ;Check if this var is on
trigger1 = Helper(899161),cond(time < 11,1,0) ;Check if this var is on
x = -Helper(899161),var(4)

[State 952, RemoveExplod]
type		= RemoveExplod
trigger1		= numexplod(955)
id		= 955
[State 952, RemoveExplod]
type		= RemoveExplod
trigger1		= numexplod(956)
id		= 956
[State 952, RemoveExplod]
type		= RemoveExplod
trigger1		= numexplod(9557)
id		= 957

[State 950, ChangeState - ABORT];this was missing from the HDBZ engine tweaks/fixes topic. Copied from GotenksZ2.
type		= Changestate
trigger1 	= cond((prevstateno = 950 && enemy,var(0) = 2 && var(0) = 1),cond(numhelper(899161),(helper(899161),var(8)= 1),0),1)
value		= 0
ctrl		= 1

;-----------------------------------------
;Push Tech
[Statedef 899161];to avoid bugs
type		= S
physics		= N
movetype		= A
ctrl		= 1
velset		= 0,0;-8*root,facing,0
anim 		= stateno
sprpriority	= 3

[State 0, set]
type = null
trigger1 = 1 || var(55) := enemynear,ID ;Snag ID of closest opponent
trigger1 = 1 || var(7) := 16 ; bounds
trigger1 = 1 || var(4) := 22 ;Store Width
;var(4) = "Width"
;var(5) = Enemy is in the corner
;var(6) = Enemy is in the corner FRAME 1
;var(7) = bounds
;var(8) = enemy has Control again
persistent = 0

[State set corner check]
type = varset
triggerall = var(55)
triggerall = time <= 0
trigger1 = PlayerID(var(55)), frontedgedist <= var(7)
trigger2 = PlayerID(var(55)), backedgedist <= var(7)
var(6) = 1
persistent = 0

[State 0, push fx]
type = helper
triggerall = time <= 0
trigger1 = !Numhelper(899162)
id = 899162
stateno = 899162
pos = -40,0
postype = P2
pausemovetime = 9999
supermovetime = 9999

[state vis]
type = assertspecial
trigger1 = 1
flag = invisible


[State 0 invul]
type = nothitby
trigger1 = time%1 = 0
value = SCA,AT,AA,AP
time = 1
persistent = 1

[state puish]
type = playerpush
trigger1 = 1
value = 1

[State 0 invul]
type = width
trigger1 = 1
value = var(4),70
persistent = 1

[state bind]
type = posset
triggerall = var(55)
trigger1 = time%(1+ceil(time/3)) = 0
x = PlayerID(var(55)), pos x + (var(4)*PlayerID(var(55)),facing)
y = PlayerID(var(55)), pos y

[State set corner check]
type = varset
triggerall = var(55)
triggerall = time%(1+ceil(time/3)) = 0
trigger1 = PlayerID(var(55)), frontedgedist <= var(7)
trigger2 = PlayerID(var(55)), backedgedist <= var(7)
var(5) = 1

[State set corner check]
type = varset
triggerall = var(55)
trigger1 = time%(1+ceil(time/3)) != 0
var(5) = 0

[State 0 end]
type = varset
trigger1 = !(root,numexplod(899161))
trigger2 = PlayerID(var(55)),ctrl = 1
var(8) = 1 ;Turn on

[State 0 end]
type = destroyself
trigger1 = root,ctrl

;-----------------------------------------
;Push Tech 2
[Statedef 899162];to avoid bugs
type		= S
physics		= N
movetype		= A
ctrl		= 1
velset		= 0,0;-2,0
anim 		= stateno-1
sprpriority	= 3

[State 0, set]
type = null
trigger1 = 1 || var(55) := cond(numhelper(stateno-1),(helper(stateno -1),var(55)),0) ; Snag ID of closest opponent
trigger1 = 1 || var(7) := cond(numhelper(stateno-1),(helper(stateno -1),var(7)),0) ; Snag bounds
persistent = 0

[state vis]
type = assertspecial
trigger1 = 1
flag = invisible

[state bind]
type = posset
trigger1 =  1
x = PlayerID(var(55)), pos x - (var(7)*PlayerID(var(55)),facing)
y = PlayerID(var(55)), pos y

[state bound]
type = screenbound
triggerall = var(55)
trigger1 = PlayerID(var(55)),backedgedist < var(7)
trigger2 = PlayerID(var(55)),frontedgedist < var(7)
;trigger1 = PlayerID(var(55)),backedgedist < cond(numhelper(stateno-1),helper(stateno -1),cond(1,var(4),0),0)
;trigger2 = PlayerID(var(55)),frontedgedist < cond(numhelper(stateno-1),helper(stateno -1),cond(1,var(4),0),0)
value = 0
movecamera = 1,0

[State 0 invul]
type = nothitby
trigger1 = time%1 = 0
value = SCA,AT,AA,AP
time = 1
persistent = 1

[state puish]
type = playerpush
trigger1 = 1
value = 0

[State 0 invul]
type = width
trigger1 = 1
value = 140,70
persistent = 1

[State 0 end]
type = varset
trigger1 = !(root,numexplod(899161))
trigger2 = PlayerID(var(55)),ctrl = 1
var(8) = 1 ;Turn on

[State 0 end]
type = destroyself
trigger1 = root,ctrl

;===========================================================================
; CHEAP KO
;===========================================================================
[Statedef 5950]
physics = S
movetype = H
ctrl = 0
velset = 0,0

[State 5950, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5950, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5950, 4]
type = ChangeAnim
trigger1 = !HitOver
value = cond(FVar(1)=0,5000,5020)

[State touch ground sfx]
type = playsnd
triggerall = HitOver
trigger1 = cond(anim = 5020, (animelem = 5),1)
value = 0,54
channel = 1
persistent = 0

[State set anim]
type = ChangeAnim
trigger1 = HitOver
value = 5950
elem  = cond(anim = 5020,5,1)
persistent = 0

[State 5950, snd]
type = playsnd
triggerall = anim = 5950
trigger1 = !Animtime
value = s15000,0
channel = 1

[State 5950, 4]
type = null;turn
triggerall = anim = 5950
trigger1 = !Animtime

[State 5950, 4]
type = posadd
triggerall = anim = 5950
trigger1 = !Animtime
x = -60

[State 1100, ChangeState]
type = Changestate
triggerall = anim = 5950
trigger1 = !Animtime
value = 5150

;================================================
;Killed by Rose Kamehameha (Fatality)
[Statedef 5941]
type    = S
movetype= I
physics = N
ctrl = 0
sprpriority = 7
facep2 = 1

[State 2260, bg]
type = assertspecial
trigger1 = 1
flag = noFG
flag2 = noBG
flag3 = nobardisplay
ignorehitpause = 1

[State 10000, Explod]; White BG
type = Explod
triggerall = !numexplod(19875)
trigger1 = time <= 0
anim = 2763
id = 19875
pos =  160,120
postype = left
sprpriority = 7
bindtime = -1
ownpal = 1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
;supermove = 1
scale = 1.50,1.50
ignorehitpause = 1
persistent = 0

[State 182, 1]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 1

[State 3000, invisibleanim]
type = ChangeAnim
trigger1 = time <= 0
Value = 1
ignorehitpause = 1

[State 3000, shaking]
type = PosAdd
trigger1 = time<30
X = cond(time%4=0,-2,cond(time%4=2,2,0))
ignorehitpause = 1

[State 1315, Vegeta]
type = explod
triggerall = !numexplod(5941)
trigger1 = time <= 0
anim = 5941
ID = 5941
sprpriority=7
postype = p1
pos = 0,-15
removetime=-2
ownpal=0
ignorehitpause=1
bindtime = -1
ontop = 1

[State 13300, Fadeout no selfanim]
type = PalFX
triggerall = !SelfAnimExist(5942)
trigger1 = Time = [0,30]
time = 1
add = -4*(Time),-4*(Time),-4*(Time)

[State 1315, fadeout selfanim]
type = explod
triggerall = !numexplod(5942)
triggerall = SelfAnimExist(5942)
trigger1 = time <= 0
anim = 5942
ID = 5942
sprpriority=7
postype = p1
pos = 0,-15
removetime=-2
ownpal=0
ignorehitpause=1
bindtime = -1
ontop = 1

[State 3000, nhb]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

;This prevent freeze game
[State 49999, 5]
type = ChangeState
trigger1 = time >50
value = 5942

;---------------------------------------------------------------------------------------
;Prevent Freezing from Chou Kmh Kill
[Statedef 5942]
type = S
movetype= H
physics = N
velset = 0,0

[State 182, 1]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 1

[State 49999, 1]
type = LifeSet
trigger1 = 1
value = 0

[State 49999, 1]
type = PosSet
trigger1 = 1
y = 9000

[State 49999, 5]
type = ChangeAnim2
trigger1 = time <= 0
value = 1

[State 444, 0]
type = Changestate
trigger1 = time >=20
value = 5150

;================================================
;Killed by Rose Kamehameha (Fatality) - FULL SCREEN WALT VERSION
[Statedef 5943]
type    = S
movetype= H
physics = N
ctrl = 0
sprpriority = 7
facep2 = 1

[State 2260, bg]
type = assertspecial
trigger1 = 1
flag = noFG
flag2 = noBG
flag3 = nobardisplay
ignorehitpause = 1

[State 182, 1]
type = screenbound
trigger1 = 1
movecamera = 0,0
value = 1

[State 3000, hit anim]
type = ChangeAnim2
trigger1 = Anim!=5943
value = 5943
ignorehitpause = 1

[State 13300, Fadeout]
type = PalFX
trigger1 = Time = [0,30]
time = 1
add = -8*(Time),-8*(Time),-8*(Time)

[State 13300, Fadeout]
type = PalFX
trigger1 = Time >= 30
time = 1
add = -256,-256,-256

[State 3000, shaking]
type = PosAdd
trigger1 = time<30
X = cond(time%4=0,-2,cond(time%4=2,2,0))
ignorehitpause = 1

[State 3000, moving back]
type = Velset
trigger1 = 1
X = -0.2
ignorehitpause = 1

[State 3000, nhb]
type = nothitby
trigger1 = 1
time = 1
value = SCA
ignorehitpause = 1

[State 4500, 1];Dissolve SFX
type = null; PlaySnd
trigger1 = time=30
value = 2950,3
;volume = 355

;This prevent freeze game
[State 49999, 5]
type = ChangeState
trigger1 = time >50
value = 5942

;---------------------------------------------------------------------------
;P2 going to the ground from a.SP
[Statedef 651]
type = A
movetype = H
physics = N
ctrl = 0
sprpriority = -1
velset = 0,0


[State 3020, 2]
type = changeanim2
trigger1 = time <= 0 
value = 652

[State 4005, vel Y]
type = velset
trigger1 = Time = 15;animelemtime(2)=0
y = 8
x = -4
ignorehitpause = 1

[State 3052, Land]
type = changestate
triggerall = Time >= 15;animelemtime(2)=0
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 652

;---------------------------------------------------------------------------
;P2 bouncing on the ground from a.SP
[Statedef 652]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5100, 1]
type = VelSet
trigger1 = time <= 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = time <= 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = time <= 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time <= 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time <= 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = time <= 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = time <= 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = time <= 0
x = 0.5

;[State 5100, 10]
;type = PlaySnd
;trigger1 = Time = 1
;;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;value = f7,2

[State 5100, 5]
type = VelSet
trigger1 = !Animtime
y = -7
x = -2

[State 111, 1]
type = StateTypeSet
trigger1 = !Animtime
physics = A

[State 5100, 12]
type = SelfState
trigger1 = !Animtime
value = 5050


;===========================================================================
;SHOCKED BY MASENKO (code by POTS)
;===========================================================================
[Statedef 7696]
type = U
physics = N
movetype = H
ctrl = 0
velset = 0, 0

[State 7696, sts]
type = null;statetypeset
trigger1 = time <= 0
trigger1 = pos y < 0
statetype = A
[State 7696, sts]
type = null;statetypeset
trigger1 = time <= 0
trigger1 = pos y >= 0
statetype = S

[State 7696, Pos]
type = posset
trigger1 = pos y >= 0
y = 0

[State 7696, Anim]
type = changeanim
trigger1 = time <= 0
trigger1 = anim != 7696 && selfanimexist(7696)
value = 7696
[State 7696, Anim]
type = changeanim
trigger1 = time <= 0
trigger1 = anim != 9010 && !selfanimexist(7696) && selfanimexist(9010)
value = 9010
[State 7696, Anim]
type = changeanim
trigger1 = time <= 0
trigger1 = !selfanimexist(7696) && !selfanimexist(9010)
value = cond(statetype != A, 5002, 5030)

[State 7696, Var]
type = varset
trigger1 = time <= 0
;trigger1 = gethitvar(hitcount) <=1
sysfvar(4) = 0
ignorehitpause = 1
[State 7696, Var]	;stun time variable?
type = varadd
trigger1 = time <= 0
sysfvar(4) = 20+ceil(enemy,var(26)/0.8)+ 90*(enemy,var(19))	;20+ceil(enemy,var(26)/1.2)+ 90*(enemy,var(19))
ignorehitpause = 1

[State 7696, Var if Gohan performed Finisher 1]
type = varset
trigger1 = (enemy,stateno=[3020,3030])
sysfvar(4) = 0
ignorehitpause = 1

[State 7696, nopalfx]
type = palfx
trigger1 = time <= 0
trigger1 = (anim = 7696 || anim = 9010)
add = 0, 0, 0
time = 1

[State 7696, End]
type = changestate
trigger1 = alive && (anim = 7696 || anim = 9010) && hitshakeover
trigger2 = alive && (anim != 7696 && anim != 9010) && hitshakeover
value = cond(statetype = A, 1115020, 5300)
[State 7696, End]
type = selfstate
trigger1 = !alive && (anim != 7696 || anim != 9010) && hitshakeover
value = 5030


;========================< HIT BACK, then dizzy >=============================
[Statedef 1115020]
type = A
movetype = H
physics = N
velset = 0, 0
[State 1115020, Anim]
type = changeanim
trigger1 = 1
value = 5030
[State 1115020, End]
type = changestate
trigger1 = hitshakeover
value = 1115030

[Statedef 1115030]
type = A
movetype = H
physics = N
ctrl = 0
[State 1115030, Accel]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)
[State 1115030, 1] ;Fix by Zzyzzyxx
type = VelSet
trigger1 = !Time
x = GetHitVar(xvel) * facing
y = gethitvar(yvel)
[State 1115030, End]
type = changestate
trigger1 = hitover
trigger2 = vel y > 0 && pos y >= 10
value = 1115050
[State 1115030, End]
type = changestate
trigger1 = !animtime
value = 1115035

[Statedef 1115035]
type = A
movetype = H
physics = N
[State 1115035, Anim]
type = changeanim
trigger1 = !time && selfanimexist(5035)
value = 5035
[State 1115035, Accel]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)
[State 1115035, End]
type = changestate
trigger1 = hitover
trigger2 = !animtime
trigger3 = vel y > 0 && pos y >= 10
trigger4 = !time && anim != 5035
value = 1115050

[Statedef 1115050]
type = A
movetype = H
physics = N
[State 1115050, Anim]
type = changeanim
trigger1 = anim = 5035 && !animtime
trigger2 = anim != 5035 && !time
value = 5050
[State 1115050, Anim]
type = changeanim
trigger1 = anim = [5050, 5059]
trigger1 = vel y >= ifelse(anim = 5050, 1, -2)
trigger1 = selfanimexist(anim + 10)
value = anim + 10
persistent = 0
[State 1115050, Accel]
type = veladd
trigger1 = 1
y = gethitvar(yaccel)
[State 1115050, End]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y >= ifelse((anim = [5051, 5059]) || (anim = [5061, 5069]), 0, 25)
value = 1115100

[Statedef 1115100]
type = L
movetype = H
physics = N
[State 1115100, 1]
type = velset
trigger1 = !time && gethitvar(fall.yvel) = 0 && vel x > 1
x = 1
[State 1115100, Shake]
type = fallenvshake
trigger1 = !time
[State 1115100, Var]
type = varset
trigger1 = !time
sysvar(1) = floor(vel y)
[State 1115100, Anim]
type = ChangeAnim
trigger1 = !time
value = 5100
[State 1115100, Pos]
type = posset
trigger1 = !time
y = 0
[State 1115100, Vel]
type = velset
trigger1 = !time
y = 0
[State 1115100, Vel]
type = velmul
trigger1 = !time
x = 0.75
[State 1115100, End]
type = changestate
trigger1 = !time
trigger1 = gethitvar(fall.yvel) = 0
value = 1115110
;[State 1115100, FX]
;type = gamemakeanim
;trigger1 = time = 1
;value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
;pos = 0, 0
;under = sysvar(1) <= 14
[State 1115100, hurt]
type = hitfalldamage
trigger1 = time = 3
;[State 1115100, snd]
;type = playsnd
;trigger1 = Time = 1
;;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;value = F7,2
[State 1115100, freeze]
type = posfreeze
trigger1 = 1
[State 1115100, End]
type = changestate
trigger1 = !animtime
value = 1115101

[Statedef 1115101]
type = L
movetype = H
physics = N
[State 1115101, Anim]
type = changeanim
trigger1 = !time
value = 5160
[State 1115101, Vel]
type = hitfallvel
trigger1 = !time
[State 1115101, Pos]
type = posset
trigger1 = !time
y = 20
[State 1115101, accel]
type = veladd
trigger1 = 1
y = 0.4
[State 1115101, End]
type = changestate
trigger1 = vel y > 0 && pos y >= 12
value = 1115110

[Statedef 1115110]
type = L
movetype = H
physics = N
[State 1115110, Shake]
type = fallenvshake
trigger1 = !time

[State 1115110, 2]
type = changeanim
trigger1 = !time
value = 5170
[State 1115110, hurt]
type = hitfalldamage
trigger1 = !time
[State 1115110, Pos]
type = posset
trigger1 = !time
y = 0
[State 1115110, Var]
type = varset
trigger1 = !time
trigger1 = gethitvar(fall.yvel) != 0
sysvar(1) = floor(vel y)
;[State 1115110, snd]
;type = playsnd
;trigger1 = !time && !sysvar(0)
;;value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
;value = F7,2
;[State 1115110, FX]
;type = gamemakeanim
;trigger1 = !time && !sysvar(0)
;value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
;pos = 0, 0
;under = sysvar(1) <= 14
[State 1115110, Vel]
type = velset
trigger1 = !time
y = 0
[State 1115110, Anim]
type = changeanim
persistent = 0
triggerall = anim != [5111, 5119]
trigger1 = !animtime
trigger2 = sysvar(0)
value = 5110

[State 1115110, ko]
type = selfstate
triggerall = !alive
trigger1 = !animtime
trigger2 = sysvar(0)
trigger3 = anim = [5110, 5119]
value = 5150
[State 1115110, Var]
type = varset
trigger1 = sysvar(0)
trigger1 = !time
sysvar(0) = 0
[State 1115110, Vel]
type = velmul
trigger1 = 1
x = 0.85
[State 1115110, getup]
type = changestate
trigger1 = alive && time >= 9;const(data.liedown.time)
value = 1115120
persistent = 0

[Statedef 1115120]
type = L
movetype = H
physics = N
[State 1115120, Anim]
type = changeanim
trigger1 = !time
value = 5120
[State 1115120, Vel]
type = velset
trigger1 = !time
x = 0
[State 1115120, NHB]
type = nothitby
trigger1 = 1
value = SCA
time = 1
[State 1115120, hitfall]
type = hitfallset
trigger1 = !animtime
value = 0   ;1
[State 1115120, NHB]
type = nothitby
trigger1 = 1
value = SCA
time = 1
[State 1115120, dizzy]
type = changestate
trigger1 = !animtime
value = 5300




;========================< THROW ESCAPE >=============================
;Throw Escape
[Statedef 5940]
type = S
movetype = H
physics = S
velset = 0, 0
 
[State 0, SelfState]
type = SelfState
trigger1 = !Time
value = Cond(Var(0)=1,950,5949)
ignorehitpause = 1
 
[Statedef 5949]
type = S
movetype = H
physics = S
velset = 0, 0
anim = 5940
 
 
[State 950, PosAdd 1]
type		= PosAdd
trigger1            = Time <=10
trigger1		= P2bodydist X < 10
X		= -8
[State 950, PosAdd 2]
type		= PosAdd
trigger1            = Time <=10
trigger1		= P2bodydist X < 25
X		= -5
[State 950, PosAdd 3]
type		= PosAdd
trigger1            = Time <=10
trigger1		= P2bodydist X < 35
X		= -2
[State 950, PosAdd 4]
type		= PosAdd
trigger1            = Time <=10
trigger1		= P2bodydist X < 40
X		= -1
 
[State 950, Width]
type		= Width
trigger1            = Time <=10
edge		= 50,40
 
[State 41, Train]
type = AfterImage
triggerall = var(43) = 0
trigger1 = Time = 10
time= 30
timegap= 1
framegap= 3
length= 12
palbright= 0,0,0
paladd= 0,0,0
palmul= .9,.9,.9
palcontrast= 120,120,120
palpostbright= 0,0,0
trans= add1
 
[State 115, dash Sound]
type = PlaySnd
trigger1 = time=0
value = 100,0
 
[State 111, 1]
type = VelSet
trigger1 = time>=11 
x = -7
 
[State 111, 1]
type = StateTypeSet
trigger1 = time > 20
movetype = I
 
[State 111, 1]
type = SelfState
trigger1 = time =20
value = 0
ctrl = 1


